<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-coding/hardware/rockchip/rockchip4-vr-manual">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0-alpha.0">
<title data-rh="true">rockchip4 vr manual | 南川笔记</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://markshawn2020.github.io/docs/coding/hardware/rockchip/rockchip4-vr-manual"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="rockchip4 vr manual | 南川笔记"><meta data-rh="true" name="description" content="1. test diy and compile surfaceflinger"><meta data-rh="true" property="og:description" content="1. test diy and compile surfaceflinger"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://markshawn2020.github.io/docs/coding/hardware/rockchip/rockchip4-vr-manual"><link data-rh="true" rel="alternate" href="https://markshawn2020.github.io/docs/coding/hardware/rockchip/rockchip4-vr-manual" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://markshawn2020.github.io/docs/coding/hardware/rockchip/rockchip4-vr-manual" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="南川笔记 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="南川笔记 Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QFQ00XLDNZ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-QFQ00XLDNZ",{anonymize_ip:!0})</script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.b123addb.css">
<link rel="preload" href="/assets/js/runtime~main.aacdcb6f.js" as="script">
<link rel="preload" href="/assets/js/main.c22735e8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a href="#" class="skipToContent_UHvc">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_qLAv themedImage--light_kaXc"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_qLAv themedImage--dark_ONYO"></div><b class="navbar__title text--truncate">南川笔记</b></a><a class="navbar__item navbar__link" href="/blog/archive">My Blog</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">My Notes</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/markshawn2020/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Source of Framework<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/markshawn2020/docusaurus-my-website" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Source of Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/markshawn2020/my-documents" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Source of Documents<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_bT41 colorModeToggle_UolE"><button class="clean-btn toggleButton_x9TT toggleButtonDisabled_Dj8q" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_dnYY"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_OBbf"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_CTO4"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_PEsc"><div class="docsWrapper_lLmf"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_PuQw" type="button"></button><div class="docRoot_kBZ6"><aside class="theme-doc-sidebar-container docSidebarContainer_S51O"><div class="sidebar_vtcw"><nav class="menu thin-scrollbar menu_rWGR"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/coding/SLAM/A01-recognizeLights">coding</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/coding/SLAM/A01-recognizeLights">SLAM</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/coding/DevOps/certbot ssl 证书">DevOps</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/coding/Languages/CPP/cpp-howto">Languages</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/Mac存储清理">Mac存储清理</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/coding/OS/Linux/centos-init-manual">OS</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/Poketto Dev Notes">Poketto Dev Notes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/coding/Software/Adobe/PS/support-for-little-stars/">Software</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/apple">apple</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/clash">clash</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/coding-philosophy">coding philosophy</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/coding/composite/full-guide_cross-copy-over-ssh-vim-tmux">composite</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/css">css</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/electron">electron</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/coding/hardware/rockchip/rockchip4-flash-manual">hardware</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/coding/hardware/rockchip/rockchip4-flash-manual">rockchip</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/hardware/rockchip/rockchip4-flash-manual">Rockchip-4B Android 刷机天坑指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/hardware/rockchip/rockchip4-howto">rockchip howto</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/coding/hardware/rockchip/rockchip4-vr-manual">rockchip4 vr manual</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/init-server">init-server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/moments">moments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/mongodb">mongodb</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/next-i18next">next-i18next</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/next-themes">next-themes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/nextjs-best-practice">nextjs-best-practice</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/nextjs">nextjs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/poetry">poetry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/python">install python 3.11</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/vim">vim</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/websocket">websocket</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/图形化语言">图形化语言</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/微信迁移">微信迁移</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/极客排版微信公众号最佳实践">极客排版微信公众号最佳实践</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/毁灭人生的打包记">毁灭人生的打包记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding/测试不同风格的toc">测试不同风格的toc</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/文集/2020-06-12-王逸成">education</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/series/NC-PFA/">series</a></div></li></ul></nav></div></aside><main class="docMainContainer_EfwR"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_n6xZ"><div class="docItemContainer_RhpI"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Wvrh" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_VLFi"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">coding</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">hardware</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">rockchip</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">rockchip4 vr manual</span><meta itemprop="position" content="4"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">版本：0.17.0+</span><div class="tocCollapsible_BEWm theme-doc-toc-mobile tocMobile_NSfz"><button type="button" class="clean-btn tocCollapsibleButton_IbtT">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>rockchip4 vr manual</h1><ol><li><a href="#test-diy-and-compile-surfaceflinger">test diy and compile surfaceflinger</a><ol><li><a href="#1-white_check_mark-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%89%BE%E4%B8%8D%E5%88%B0adb%E8%AE%BE%E5%A4%87">1. ✅ 虚拟机找不到 adb 设备</a></li><li><a href="#2-white_check_mark-%E5%90%AF%E7%94%A8%E6%8A%95%E5%B1%8F">2. ✅ 启用投屏</a></li><li><a href="#3-white_check_mark-%E4%BF%AE%E6%94%B9%E6%BA%90%E7%A0%81%E5%B0%9D%E8%AF%95%E5%9C%A8surfaceflinger%E9%83%A8%E5%88%86%E5%8A%A0%E5%85%A5%E5%87%A0%E5%8F%A5log">3. ✅ 修改源码，尝试在<code>surfaceflinger</code>部分加入几句 log</a></li><li><a href="#4-white_check_mark-%E6%8E%A8%E5%85%A5%E7%B3%BB%E7%BB%9F">4. ✅ 推入系统</a></li><li><a href="#5-white_check_mark-%E6%B5%8B%E8%AF%95%E6%98%AF%E5%90%A6%E7%BC%96%E8%AF%91%E9%80%9A%E8%BF%87%E6%88%90%E5%8A%9F">5. ✅ 测试是否编译通过成功</a></li></ol></li><li><a href="#compile-and-run-the-first-vr-mode">compile and run the first vr mode</a><ol><li><a href="#error-of-null-pointer">error of null pointer</a></li></ol></li><li><a href="#output-4k">output 4k</a><ol><li><a href="#%E5%88%86%E8%BE%A8%E7%8E%87%E8%BE%93%E5%87%BA%E9%80%BB%E8%BE%91">分辨率输出逻辑</a></li><li><a href="#todo-check-supported-resolutions">TODO: check supported resolutions</a></li><li><a href="#todo-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%86%E8%BE%A8%E7%8E%87%E8%BE%93%E5%87%BA%E5%8F%82%E6%95%B0">TODO: 自定义分辨率输出参数</a></li><li><a href="#change-hdmi-output-resolution">change hdmi output resolution</a><ol><li><a href="#resolution-1-set-framebuffer-and-resolution">resolution 1. set <code>framebuffer</code> and <code>resolution</code></a></li><li><a href="#resolution-2-change-dts">resolution 2. change dts</a></li><li><a href="#passed-change-rkconfig">PASSED: change <code>RkConfig</code></a></li></ol></li><li><a href="#%E4%B8%BB%E6%9D%BF%E6%94%AF%E6%8C%814k60hz%E8%BE%93%E5%87%BA%E4%BF%AE%E6%94%B9">主板支持 4k60hz 输出修改</a></li><li><a href="#%E6%B5%8B%E8%AF%95edid%E4%BF%AE%E6%94%B9%E7%BB%93%E6%9E%9C">测试 edid 修改结果</a></li></ol></li><li><a href="#hdmi-%E7%9B%B8%E5%85%B3%E4%BB%8B%E7%BB%8D">HDMI 相关介绍</a><ol><li><a href="#edid">EDID</a></li><li><a href="#hdmi%E6%AF%94%E4%BE%8B">HDMI 比例</a></li><li><a href="#sparklessparkles-vopvopb--vopl">✨✨ VOP(<code>vopb</code> | <code>vopl</code>)</a><ol><li><a href="#%E5%90%AF%E7%94%A8vopb">启用<code>vopb</code></a></li><li><a href="#%E7%BB%91%E5%AE%9Apll">绑定<code>pll</code></a></li><li><a href="#vop%E8%B0%83%E8%AF%95hdmi-%E5%9B%BE%E5%B1%82%E6%98%BE%E7%A4%BA">VOP 调试（hdmi 图层显示）</a></li></ol></li><li><a href="#sparklessparkles-%E4%B8%BB%E5%89%AF%E5%B1%8F">✨✨ 主副屏</a><ol><li><a href="#%E5%90%AF%E7%94%A8hdmi%E4%B8%BA%E5%89%AF%E5%B1%8F">启用 HDMI 为副屏</a></li><li><a href="#%E6%9F%A5%E7%9C%8B%E4%B8%BB%E5%89%AF%E5%B1%8F%E8%BE%93%E5%87%BA%E6%8E%A5%E5%8F%A3">查看主副屏输出接口</a></li></ol></li><li><a href="#hdmi%E5%BC%95%E8%84%9A">HDMI 引脚</a></li><li><a href="#%E6%98%BE%E7%A4%BA%E6%A1%A5%E6%8E%A5%E8%8A%AF%E7%89%87">显示桥接芯片</a></li></ol></li></ol><h2 class="anchor anchorWithStickyNavbar_rB0w" id="test-diy-and-compile-surfaceflinger">test diy and compile surfaceflinger<a class="hash-link" href="#test-diy-and-compile-surfaceflinger" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_rB0w" id="1--虚拟机找不到-adb-设备">1. ✅ 虚拟机找不到 adb 设备<a class="hash-link" href="#1--虚拟机找不到-adb-设备" title="标题的直接链接">​</a></h3><p>目前 rc 通过 usb 默认连接到了主机上，导致虚拟机里的 ubuntu 找不到 adb，根据 <a href="https://community.spiceworks.com/topic/2303147-in-vmware-player-i-can-t-get-adb-devices-to-see-my-phone" target="_blank" rel="noopener noreferrer">In VMWare Player, I can&#x27;t get adb devices to see my phone - Spiceworks</a></p><p>可以在这里修改：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/diary-public-1644291505272-a4660a930c8165733e3be82a551ea7e9e93b1e4b7cb1dc9d22c9c8cb8f4410d2.png" alt="picture 3" class="img_vXGZ"></p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/diary-public-1644291490776-a17326a3c58a579e8eb0500b03f35d227798b68c05143f45dc160e54686a0eba.png" alt="picture 2" class="img_vXGZ"></p><p>但是刚刚发现还是不行，还是检测不到，后来意识到应该是板子里的系统已经（类似）休眠了，因为蓝灯已经不闪了。所以重新插拔供电线，强制重启板子系统，<strong>十几秒后就跳出 usb 连接哪个主机的弹窗</strong>，在选择连接到 linux 之后，ubuntu 内就出现了 adb 设备。</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/diary-public-1644291859846-df250a16abde64924d64c73c66369636d179e8ea760efd1ba1ff4b0f7dc6183b.png" alt="picture 4" class="img_vXGZ"></p><p>尽管目前已经解决了问题，但是有弹窗也意味着刚刚的配置是失效的，所以检查了一下，果然又变成“ask what to do”了，为了测试是否能够直接连到 vmware，我又加强了一下设置：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/diary-public-1644291965505-85fc02a5056db7b8499280c7dbaa9d03053895e7430c1038c797e6822001617e.png" alt="picture 5" class="img_vXGZ"></p><p>然后<strong>重新登录</strong>之后，发现是可行的，设备还在：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/diary-public-1644292015229-94eb3717c5014f721507b40bbf5900a9747a0da9b920e6d139d2df0e1abf658a.png" alt="picture 6" class="img_vXGZ"></p><p>但这不够，我们再加测<strong>板子重新插拔电后是否能够直接连到虚拟机</strong>。</p><p>测试结果很顺利，没有弹窗，虚拟机里的 adb 继续连上了。</p><p>并且<code>watch adb devices</code>可以发现，断电后设备消失，接电开机后设备自动显示。一切符合预期。</p><h3 class="anchor anchorWithStickyNavbar_rB0w" id="2--启用投屏">2. ✅ 启用投屏<a class="hash-link" href="#2--启用投屏" title="标题的直接链接">​</a></h3><ol><li>更改虚拟机的 vpn</li></ol><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/diary-public-1644292303819-535bf4b5161fe9a7835113252cf96809456a599eef593a12d4ecdecde5ef484d.png" alt="picture 7" class="img_vXGZ"></p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/diary-public-1644292319861-51e3b642065e81eff1efc0c1e6f81a14f161e891a0be68fe835e23b86529c785.png" alt="picture 8" class="img_vXGZ"></p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/diary-public-1644292355761-6b49a051496a88321ad542b062670b7d15c689560a05d624e4d0864775603fec.png" alt="picture 9" class="img_vXGZ"></p><ol start="2"><li>安装<code>scrcpy</code></li></ol><p>首先尝试<code>sudo apt install scrcpy</code>发现不行，好在<code>snap</code>里有，用<code>snap install scrcpy</code>装上了。</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/diary-public-1644292426121-edc7fc3b7060801ff7336e8696b30718cc63b25b1e18edd10e5a4ea6a954198f.png" alt="picture 10" class="img_vXGZ"></p><p>目前一切顺利</p><h3 class="anchor anchorWithStickyNavbar_rB0w" id="3--修改源码尝试在surfaceflinger部分加入几句-log">3. ✅ 修改源码，尝试在<code>surfaceflinger</code>部分加入几句 log<a class="hash-link" href="#3--修改源码尝试在surfaceflinger部分加入几句-log" title="标题的直接链接">​</a></h3><p><strong>加 log 要在函数里加，不能直接加在文件级别</strong>，这是 C++和 python 之类语言的一个比较明显的区别，否则会报函数找不到错误：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/diary-public-1644297427881-4965e9b5200916e5524700d061d8e622ba667a76db3f7becf8360bb498c8bc44.png" alt="picture 14" class="img_vXGZ"></p><p>所以我最后是这么加的：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/diary-public-1644297486127-01a0286a7798e5b1af0ebf954c4af043993cadb69ff848afd1f10f04e63f7b8f.png" alt="picture 15" class="img_vXGZ"></p><p>编译成功：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/diary-public-1644297376178-f3130420824d0b978095a5e477efb6615b17045bde2225334d3286ebc7df1818.png" alt="picture 13" class="img_vXGZ"></p><h3 class="anchor anchorWithStickyNavbar_rB0w" id="4--推入系统">4. ✅ 推入系统<a class="hash-link" href="#4--推入系统" title="标题的直接链接">​</a></h3><ol><li><code>read-only system</code> <img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/diary-public-1644297365734-9aba960db2fae4365663aebfbad05efc10fa2cdf320954dbf2b7f9680a19c07d.png" alt="picture 12" class="img_vXGZ"></li></ol><p>step 1. <code>disable-verity</code></p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;rooting&quot;; adb root;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;waiting to disable verity&quot;; sleep 10; adb disable-verity;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;waiting to remount&quot;; adb remount;</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>step 2. <code>adb push</code></p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">BUILD_SYSTEM=out/target/product/rk3399_Android10/system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ADB_SYSTEM=/system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MODULE=surfaceflinger</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LIB_MODULE=lib$MODULE.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb push $BUILD_SYSTEM/bin/$MODULE /system/bin/$MODULE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb push $BUILD_SYSTEM/lib/$LIB_MODULE /system/lib/$LIB_MODULE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb push $BUILD_SYSTEM/lib64/$LIB_MODULE /system/lib64/$LIB_MODULE</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_rB0w" id="5--测试是否编译通过成功">5. ✅ 测试是否编译通过成功<a class="hash-link" href="#5--测试是否编译通过成功" title="标题的直接链接">​</a></h3><p>确认已经有了我们修改的信息：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/diary-public-1644299092756-8c4e6436e39052c591eef37c23a08975d665aa3141e0b1fc13c869981f670638.png" alt="picture 16" class="img_vXGZ"></p><p>测试通过！</p><h2 class="anchor anchorWithStickyNavbar_rB0w" id="compile-and-run-the-first-vr-mode">compile and run the first vr mode<a class="hash-link" href="#compile-and-run-the-first-vr-mode" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_rB0w" id="error-of-null-pointer">error of null pointer<a class="hash-link" href="#error-of-null-pointer" title="标题的直接链接">​</a></h3><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644322885417-1a0cfd0afbe3b026ac4eccdf3309404fed3c342a037d4712a8ce2245c8d76fe5.png" alt="picture 22" class="img_vXGZ"></p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644323010078-bc993677892afa7108f54e21d796f58d348454602b6e311a1b81aa967731347c.png" alt="picture 23" class="img_vXGZ"></p><h2 class="anchor anchorWithStickyNavbar_rB0w" id="output-4k">output 4k<a class="hash-link" href="#output-4k" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_rB0w" id="分辨率输出逻辑">分辨率输出逻辑<a class="hash-link" href="#分辨率输出逻辑" title="标题的直接链接">​</a></h3><blockquote><p>SDK 默认的分辨率是读取电视的 edid，然后选择最大输出的</p><p>需要在修改内核和配合 Setting 才可以</p></blockquote><p>所谓，内核，也就是 rk3399 已经定义的一些分辨率输出的参数，每种都有自己的时序设置。4k 目前支持的是 3920x2160，如果我们想要 3920x1080，得自己定制。</p><p>设置的话，按照题主的摸索，如下：</p><blockquote><p>谢谢，修改内核代码搞定了 kernel\drivers\video\rockchip\hdmi\rockchip-hdmi.h #define HDMI_VIDEO_DEFAULT_MODE HDMI_1280X720P_60HZ 修改为 HDMI_1920x1080P_60HZ</p></blockquote><p>所以要去<code>kernel/drivers/video/rockchip/hdmi/</code>下找到<code>rockchip-hdmi/h</code>文件，修改器<code>HDMI_VIDEO_DEFAULT_MODE</code>，但实际上我拉的版本里目录已经完全不对了。</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644777515302-76380b70651884e8a52a800ec2f9d1af43781e5a10e465050c69ef24b084e869.png" alt="picture 41" class="img_vXGZ"></p><p>ref:</p><ul><li><a href="https://dev.t-firefly.com/thread-12261-1-1.html" target="_blank" rel="noopener noreferrer">3399 的板子，HDMI 默认输出分辨率在哪里修改 - Firefly-RK3399 - Firefly 开源社区 3399 的板子，HDMI 默认输出分辨率在哪里修改</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="todo-check-supported-resolutions">TODO: check supported resolutions<a class="hash-link" href="#todo-check-supported-resolutions" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">sudo tvservice --status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo tvservice --modes=CEA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo tvservice --modes=RGB</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://stackoverflow.com/questions/34904763/linux-framebuffer-set-resolution-correctly" target="_blank" rel="noopener noreferrer">graphics - Linux Framebuffer set resolution correctly - Stack Overflow</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="todo-自定义分辨率输出参数">TODO: 自定义分辨率输出参数<a class="hash-link" href="#todo-自定义分辨率输出参数" title="标题的直接链接">​</a></h3><ul><li><a href="https://download.csdn.net/download/com6339663/14926373?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522164477580616781685380768%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fdownload.%2522%257D&amp;request_id=164477580616781685380768&amp;biz_id=1&amp;utm_medium=distribute.pc_search_result.none-task-download-2~download~first_rank_ecpm_v1~rank_v31_ecpm-1-14926373.pc_v2_rank_dl_default&amp;utm_term=rk3399+hdmi+&amp;spm=1018.2226.3001.4451.1" target="_blank" rel="noopener noreferrer">(1 条消息) rk3399 的 android7.1 平台新增 HDMI 特殊分辨率输出修改补丁<!-- -->_<!-- -->androidRK3299 显示全屏-其它文档类资源-CSDN 文库</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="change-hdmi-output-resolution">change hdmi output resolution<a class="hash-link" href="#change-hdmi-output-resolution" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-1-set-framebuffer-and-resolution">resolution 1. set <code>framebuffer</code> and <code>resolution</code><a class="hash-link" href="#resolution-1-set-framebuffer-and-resolution" title="标题的直接链接">​</a></h4><p>ref:</p><ul><li>重点看这个：✨<a href="https://mbb.eet-china.com/forum/topic/83050_1_1.html" target="_blank" rel="noopener noreferrer">RK3399 开发板香橙派 4 开发板连接 HDMI 显示屏如何输出 4K 分辨率<!-- -->_<!-- -->嵌入式系统与 MCU-面包板社区</a></li><li>跟上面差不多：<a href="http://arm-cn.com/thread-5422-1-1.html" target="_blank" rel="noopener noreferrer">firefly-rk3399 关于设置 4K 输出答疑 - 开发板使用 - 深圳风火轮科技 - Powered by Discuz!</a></li></ul><h5 class="anchor anchorWithStickyNavbar_rB0w" id="approach-1-define-in-device-and-burn">approach 1. define in device and burn<a class="hash-link" href="#approach-1-define-in-device-and-burn" title="标题的直接链接">​</a></h5><div class="language-yaml codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-yaml codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># suggested: device/rockchip/rk3399/rk3399_mid/system.prop</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># verified by mark: device/rockchip/common/system.prop</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">persist.sys.framebuffer.main = 2160x3840 persist.sys.resolution.main = 3840x2160@60</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>TODO: 不知道副显的 <code>framebuffer</code> 可不可以设置……（以及有没有必要设置）</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644787815780-89404bbb0699a969ab087996915c2a8c6fed47921f9a3ba4eeaeb478b8972036.png" alt="picture 53" class="img_vXGZ"></p><h5 class="anchor anchorWithStickyNavbar_rB0w" id="approach-2-use-adb">approach 2. use adb<a class="hash-link" href="#approach-2-use-adb" title="标题的直接链接">​</a></h5><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell setprop persist.sys.framebuffer.main 2160x3840</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell setprop sys.display.timeline 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell setprop persist.sys.resolution.main = 3840x2160@60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell setprop sys.display.timeline 1</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-2-change-dts">resolution 2. change dts<a class="hash-link" href="#resolution-2-change-dts" title="标题的直接链接">​</a></h4><p>参考由 <a href="https://forum.armbian.com/topic/14167-4k-hdmi-output/" target="_blank" rel="noopener noreferrer">4k HDMI output - Rockchip 3399 - armbian forum</a> 指引到的 <a href="https://github.com/Kwiboo/linux-rockchip/compare/next-20200501...next-20200501-drm-rockchip" target="_blank" rel="noopener noreferrer">Comparing next-20200501...next-20200501-drm-rockchip · Kwiboo/linux-rockchip</a>，这是一份 patch，不过需要自己改。</p><p>不过实际上，我发现很多内容在我的开发板上都已经有了。</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644747572967-ef3850722867f96a735d3ec6002834319cde80524b2d06dbdf11ea2a25115997.png" alt="picture 15" class="img_vXGZ"></p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644747585299-7255b0e7a32198d00bd2bf6bce5a9f26cec5ea0768e64792bbfcae4cccc58af3.png" alt="picture 16" class="img_vXGZ"></p><hr><p>但后续发现，还是有些问题，对照国内朋友修改 dts 的记录，较为详细：<a href="https://www.cxybb.com/article/m0_38022615/109221525" target="_blank" rel="noopener noreferrer">[RK3399] HDMI 正常输出 4K<!-- -->_<!-- -->但行前路 无问西东-程序员宝宝 - 程序员宝宝</a></p><p>核心思路：编译 kernel 时，碰到错误会给出报错行，用 vim 去查看该行，看看是啥问题，对应的删改即可，✨✨。</p><p>这个问题主要是因为帖子中的<code>connect = &lt;&amp;vopb_out_hdmi&gt;;</code> 已经不适用了，导致报错。</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644773468648-9619c41de0933010588837778104f0ca070b4fc7ef8d376b8371a74fd427ff2d.png" alt="picture 38" class="img_vXGZ"></p><p>考虑到这个只是用于开机 logo 的，所以无视，删掉重新编！</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644773568142-3d1f1dbf9d8c1b7072589b7002570e689909da3f65e1ceb221a901d5ea6efcd2.png" alt="picture 39" class="img_vXGZ"></p><hr><p>新的问题是由于写错了：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644773709386-68055eeb44e3e9c18e2509fb299f1207e7007c4cdfdc3284f984b93307c81889.png" alt="picture 40" class="img_vXGZ"></p><p>ref:</p><ul><li><p>sparkles: ✨ ✨ 修改 dts 的 patch <a href="https://github.com/Kwiboo/linux-rockchip/compare/next-20200501...next-20200501-drm-rockchip" target="_blank" rel="noopener noreferrer">Comparing next-20200501...next-20200501-drm-rockchip · Kwiboo/linux-rockchip</a></p></li><li><p><a href="https://www.cxybb.com/article/m0_38022615/109221525" target="_blank" rel="noopener noreferrer">[RK3399] HDMI 正常输出 4K<!-- -->_<!-- -->但行前路 无问西东-程序员宝宝 - 程序员宝宝</a></p></li><li><p>修改 dts 的 patch 的来源与讨论： <a href="https://forum.armbian.com/topic/14167-4k-hdmi-output/" target="_blank" rel="noopener noreferrer">4k HDMI output - Rockchip 3399 - armbian forum</a></p></li><li><p>写到了部分<code>edid</code>相关的：<a href="https://blog.csdn.net/m0_38022615/article/details/109378391" target="_blank" rel="noopener noreferrer">(1 条消息) [RK3399] HDMI 正常输出 4K30 帧 无法输出 60 帧以及设置分辨率的流程分析<!-- -->_<!-- -->但行前路 无问西东-CSDN 博客<!-- -->_<!-- -->hdmi 输出分辨率设置</a></p></li></ul><h4 class="anchor anchorWithStickyNavbar_rB0w" id="passed-change-rkconfig">PASSED: change <code>RkConfig</code><a class="hash-link" href="#passed-change-rkconfig" title="标题的直接链接">​</a></h4><p>看起来对，也改起来很简单，但是我并没有找到对应的配置。</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644759185068-465f770f9da3ec1ba5b5eb8349cfcce5ab6bd64b7faad713b4fc076f0e8ac481.png" alt="picture 17" class="img_vXGZ"></p><p>以下是我们的配置：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644759280740-26f86c67effb30bd3ad77e1b652eaf4061be62cfc031c9509bdddb8b47a5c11a.png" alt="picture 18" class="img_vXGZ"></p><p>ref:</p><ul><li><a href="https://patchwork.ozlabs.org/project/uboot/patch/20200402114125.2501-6-jagan@amarulasolutions.com/" target="_blank" rel="noopener noreferrer">[v3,5/5] video: rockchip: Support 4K resolution for rk3399, HDMI - Patchwork</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="主板支持-4k60hz-输出修改">主板支持 4k60hz 输出修改<a class="hash-link" href="#主板支持-4k60hz-输出修改" title="标题的直接链接">​</a></h3><p>基于 rockchip 开发大佬的文章 <a href="https://blog.csdn.net/kris_fei/article/details/88875516?spm=1001.2014.3001.5502" target="_blank" rel="noopener noreferrer">(1 条消息) [RK3399][Android7.1] HDMI 显示屏(副屏)调试记录小结<!-- -->_<!-- -->Kris Fei&#x27;s blog-CSDN 博客<!-- -->_<!-- -->hdmi 调试</a> ，可以知道修改主板 hdmi 输出主要改以下这几文件：</p><ol><li>drm_edid.c： edid 相关</li><li>dw-hdmi.c： HDMI 驱动，包括内部 I2C 接口实现</li><li>d_hdmi-rockchip.c: drm 框架部分</li></ol><p>修改如下：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644784592881-bc178a2b8c0e656491b1d9d391ce824d505de6d59b27d6e597771aafdb56f7cc.png" alt="picture 45" class="img_vXGZ"></p><p>此外根据官方文档，还要确认一下白名单：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644788099106-e45cfb1288e41b2fcb8fc492775d1c1caafadaffe853db7c11b598d323dd485f.png" alt="picture 54" class="img_vXGZ"></p><p>好在都是有的：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644788109475-28fb54c3d9cf1c8ad4b5c8a86960175d53cb47c9baac61453e3a3f262390d367.png" alt="picture 55" class="img_vXGZ"></p><h3 class="anchor anchorWithStickyNavbar_rB0w" id="测试-edid-修改结果">测试 edid 修改结果<a class="hash-link" href="#测试-edid-修改结果" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">/sys/class/drm/card0-HDMI-A-1/edid</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644784205395-77d07db4f846454f863e84b9907056d36fa1f4833db96a92cf163f5e8feb2d6f.png" alt="picture 43" class="img_vXGZ"></p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644784231104-4eba6721ee143c9eae3ec7cd3225c0bb3544977654ededb257be306bce6db5ea.png" alt="picture 44" class="img_vXGZ"></p><p>ref:</p><ul><li><a href="https://blog.csdn.net/kris_fei/article/details/88875516?spm=1001.2014.3001.5502" target="_blank" rel="noopener noreferrer">(1 条消息) [RK3399][Android7.1] HDMI 显示屏(副屏)调试记录小结<!-- -->_<!-- -->Kris Fei&#x27;s blog-CSDN 博客<!-- -->_<!-- -->hdmi 调试</a></li></ul><h2 class="anchor anchorWithStickyNavbar_rB0w" id="hdmi-相关介绍">HDMI 相关介绍<a class="hash-link" href="#hdmi-相关介绍" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_rB0w" id="edid">EDID<a class="hash-link" href="#edid" title="标题的直接链接">​</a></h3><ul><li><a href="https://zh.wikipedia.org/wiki/EDID" target="_blank" rel="noopener noreferrer">EDID - 维基百科，自由的百科全书</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="hdmi-比例">HDMI 比例<a class="hash-link" href="#hdmi-比例" title="标题的直接链接">​</a></h3><p>在 <a href="https://elixir.bootlin.com/linux/latest/source/include/linux/hdmi.h#L176" target="_blank" rel="noopener noreferrer">hdmi.h - include/linux/hdmi.h - Linux source code (v5.16.9) - Bootlin</a> 可以找到 HDMI 比例的定义：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644783773364-f0284efe7c70b41b399d446a83c40fd85a6f43556b632266c1d4f832b02a4c0b.png" alt="picture 42" class="img_vXGZ"></p><h3 class="anchor anchorWithStickyNavbar_rB0w" id="-vopvopb--vopl">✨✨ VOP(<code>vopb</code> | <code>vopl</code>)<a class="hash-link" href="#-vopvopb--vopl" title="标题的直接链接">​</a></h3><p>ref:</p><ul><li><a href="https://zhuanlan.zhihu.com/p/398362901" target="_blank" rel="noopener noreferrer">如何选择显示桥接芯片（MIPI、LVDS、HDMI、eDP、RGB 转换） - 知乎</a></li></ul><h4 class="anchor anchorWithStickyNavbar_rB0w" id="启用vopb">启用<code>vopb</code><a class="hash-link" href="#启用vopb" title="标题的直接链接">​</a></h4><p>官方文档指示，想使用哪种 VOP，只要关闭另一种就可以了：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644785638794-720b5551c0e5804c25206a1916857db85a96629eec8f7d0ef2e4d4c18641c9fc.png" alt="picture 46" class="img_vXGZ"></p><p>在<code>kernel</code>仓库寻找我们的关键字，找到<code>rk3399</code>和<code>rockpi-4b</code>相关的文件：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644785664838-59156bd86378861e4fd2a7d130470dad45a93c7d60fdf8b737fc58269091829a.png" alt="picture 47" class="img_vXGZ"></p><p>确认内部的信息，是把<code>vopl</code>关闭的，也就是开启了<code>vopb</code>，也就是默认打开了 4k 输出：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644785690918-b5e757b3f43908a931342bdca52d4ec781e36bd7838bdd0e51017f8240e8c043.png" alt="picture 48" class="img_vXGZ"></p><h4 class="anchor anchorWithStickyNavbar_rB0w" id="绑定pll">绑定<code>pll</code><a class="hash-link" href="#绑定pll" title="标题的直接链接">​</a></h4><p>官方文档指示，需要将目标 vop 挂载到<code>vpll</code>，另一个挂载到<code>cpll</code>：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644785899708-1add03724419fab2616149e0a237faf8a18ee8d6a4e2537f764955ff5da436b7.png" alt="picture 49" class="img_vXGZ"></p><p>还是同一个文件，检查确认，是默认的：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644785982133-0ed8b67309f7dae406937160b2ce5cbe82583ebb151e44174960c02c32f5cd29.png" alt="picture 50" class="img_vXGZ"></p><p>ref:</p><ul><li><a href="https://blog.csdn.net/kris_fei/article/details/79030144" target="_blank" rel="noopener noreferrer">(1 条消息) [RK3399][Android7.1] Display 中的 VOP 模块介绍<!-- -->_<!-- -->Kris Fei&#x27;s blog-CSDN 博客<!-- -->_<!-- -->vopb vopl</a></li></ul><h4 class="anchor anchorWithStickyNavbar_rB0w" id="vop-调试hdmi-图层显示">VOP 调试（hdmi 图层显示）<a class="hash-link" href="#vop-调试hdmi-图层显示" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">cat /d/dri/0/summary</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>主要查看<code>Connector</code>是不是<code>HDMI-A</code>，以及<code>Display mode</code>:</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644788466119-b7e85d12c1120867bdbb4c9877224ca049ee785b65de7a97b8f5cd61bd30bba7.png" alt="picture 56" class="img_vXGZ"></p><p>每个图层的大小变化(<code>src</code>(source) --&gt; <code>dst</code>(destination))也是很重要的信息：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644788502156-951c67303be8ae6c04062b187385c28a903365d2b727afc9099529370d5f4efe.png" alt="picture 57" class="img_vXGZ"></p><h3 class="anchor anchorWithStickyNavbar_rB0w" id="-主副屏">✨✨ 主副屏<a class="hash-link" href="#-主副屏" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_rB0w" id="启用-hdmi-为副屏">启用 HDMI 为副屏<a class="hash-link" href="#启用-hdmi-为副屏" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># device/rockchip/rk3368/rk3368_mid/system.prop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sys.hwc.device.extend=HDMI-A</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644787563143-77fd26d8d6af22ae3851bcd8f1c9e7d5a2f854107b754174f81a41a8f4e983c1.png" alt="picture 51" class="img_vXGZ"></p><h4 class="anchor anchorWithStickyNavbar_rB0w" id="查看主副屏输出接口">查看主副屏输出接口<a class="hash-link" href="#查看主副屏输出接口" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">sys.hwc.device.main # 主显输出接口</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sys.hwc.device.aux  # 副显输出接口</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/rockchip4-vr-manual-1644787683624-44c6d3d1db10e0ceac3059d96db4b4cbf30af518670379a33d4ae58619a17e11.png" alt="picture 52" class="img_vXGZ"></p><h3 class="anchor anchorWithStickyNavbar_rB0w" id="hdmi-引脚">HDMI 引脚<a class="hash-link" href="#hdmi-引脚" title="标题的直接链接">​</a></h3><ul><li><a href="https://www.cnblogs.com/TaigaCon/p/3840653.html" target="_blank" rel="noopener noreferrer">HDMI 介绍与流程 - TaigaComplex - 博客园</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="显示桥接芯片">显示桥接芯片<a class="hash-link" href="#显示桥接芯片" title="标题的直接链接">​</a></h3><p>看不懂……所以瑞芯微文档里各种组合是啥意思：</p><p>2.4.1 EDP(vopb) + HDMI(vopl) 2.4.2 LVDS(vopl) + HDMI(vopb) 2.4.3 MIPI(vopb) + HDMI(vopl) 2.4.4 HDMI(vopb) + DP(vopl)</p><ul><li><a href="https://zhuanlan.zhihu.com/p/398362901" target="_blank" rel="noopener noreferrer">如何选择显示桥接芯片（MIPI、LVDS、HDMI、eDP、RGB 转换） - 知乎</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/markshawn2020/docusaurus/edit/master/my-documents/docs/coding/hardware/rockchip/rockchip4-vr-manual.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_IMw_" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_DtqZ"><span class="theme-last-updated">最后<!-- -->于 <b><time datetime="2024-09-17T09:17:49.000Z">2024年9月17日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/coding/hardware/rockchip/rockchip4-howto"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">rockchip howto</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/coding/init-server"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">init-server</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_RLlU thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#test-diy-and-compile-surfaceflinger" class="table-of-contents__link toc-highlight">test diy and compile surfaceflinger</a><ul><li><a href="#1--虚拟机找不到-adb-设备" class="table-of-contents__link toc-highlight">1. ✅ 虚拟机找不到 adb 设备</a></li><li><a href="#2--启用投屏" class="table-of-contents__link toc-highlight">2. ✅ 启用投屏</a></li><li><a href="#3--修改源码尝试在surfaceflinger部分加入几句-log" class="table-of-contents__link toc-highlight">3. ✅ 修改源码，尝试在<code>surfaceflinger</code>部分加入几句 log</a></li><li><a href="#4--推入系统" class="table-of-contents__link toc-highlight">4. ✅ 推入系统</a></li><li><a href="#5--测试是否编译通过成功" class="table-of-contents__link toc-highlight">5. ✅ 测试是否编译通过成功</a></li></ul></li><li><a href="#compile-and-run-the-first-vr-mode" class="table-of-contents__link toc-highlight">compile and run the first vr mode</a><ul><li><a href="#error-of-null-pointer" class="table-of-contents__link toc-highlight">error of null pointer</a></li></ul></li><li><a href="#output-4k" class="table-of-contents__link toc-highlight">output 4k</a><ul><li><a href="#分辨率输出逻辑" class="table-of-contents__link toc-highlight">分辨率输出逻辑</a></li><li><a href="#todo-check-supported-resolutions" class="table-of-contents__link toc-highlight">TODO: check supported resolutions</a></li><li><a href="#todo-自定义分辨率输出参数" class="table-of-contents__link toc-highlight">TODO: 自定义分辨率输出参数</a></li><li><a href="#change-hdmi-output-resolution" class="table-of-contents__link toc-highlight">change hdmi output resolution</a></li><li><a href="#主板支持-4k60hz-输出修改" class="table-of-contents__link toc-highlight">主板支持 4k60hz 输出修改</a></li><li><a href="#测试-edid-修改结果" class="table-of-contents__link toc-highlight">测试 edid 修改结果</a></li></ul></li><li><a href="#hdmi-相关介绍" class="table-of-contents__link toc-highlight">HDMI 相关介绍</a><ul><li><a href="#edid" class="table-of-contents__link toc-highlight">EDID</a></li><li><a href="#hdmi-比例" class="table-of-contents__link toc-highlight">HDMI 比例</a></li><li><a href="#-vopvopb--vopl" class="table-of-contents__link toc-highlight">✨✨ VOP(<code>vopb</code> | <code>vopl</code>)</a></li><li><a href="#-主副屏" class="table-of-contents__link toc-highlight">✨✨ 主副屏</a></li><li><a href="#hdmi-引脚" class="table-of-contents__link toc-highlight">HDMI 引脚</a></li><li><a href="#显示桥接芯片" class="table-of-contents__link toc-highlight">显示桥接芯片</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Core</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/archive">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Docusaurus</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docusaurus.io/docs/category/guides" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://joshcena.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Case: Joshua Chen<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Tools</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://vercel.com/markshawn2020/docusaurus/deployments" target="_blank" rel="noopener noreferrer" class="footer__link-item">Vercel Deploy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://analytics.google.com/analytics/web/#/p324822374/reports/reportinghub?params=_u.dateOption%3DthisWeekSatToToday" target="_blank" rel="noopener noreferrer" class="footer__link-item">Google Analytics<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ap-east-1.console.aws.amazon.com/ec2/home?region=ap-east-1#InstanceDetails:instanceId=i-02fffe2800e2025e1" target="_blank" rel="noopener noreferrer" class="footer__link-item">AWS EC2 Monitor (VPN)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.aacdcb6f.js"></script>
<script src="/assets/js/main.c22735e8.js"></script>
</body>
</html>