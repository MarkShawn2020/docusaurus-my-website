<!doctype html>
<html lang="zh-Hans" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0-alpha.0">
<title data-rh="true">编程 | Linux 笔记 | 南川笔记</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://markshawn2020.github.io/blog/2022/02/02/dev-linux"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="编程 | Linux 笔记 | 南川笔记"><meta data-rh="true" name="description" content="很久以前，自打我刚开始学计算机，就有一个认知：精通 linux 的人都是大神。"><meta data-rh="true" property="og:description" content="很久以前，自打我刚开始学计算机，就有一个认知：精通 linux 的人都是大神。"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-02-02T00:00:00.000Z"><meta data-rh="true" property="article:tag" content="开发笔记,Linux"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://markshawn2020.github.io/blog/2022/02/02/dev-linux"><link data-rh="true" rel="alternate" href="https://markshawn2020.github.io/blog/2022/02/02/dev-linux" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://markshawn2020.github.io/blog/2022/02/02/dev-linux" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="南川笔记 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="南川笔记 Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QFQ00XLDNZ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-QFQ00XLDNZ",{anonymize_ip:!0})</script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.b123addb.css">
<link rel="preload" href="/assets/js/runtime~main.aacdcb6f.js" as="script">
<link rel="preload" href="/assets/js/main.c22735e8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a href="#" class="skipToContent_UHvc">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_qLAv themedImage--light_kaXc"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_qLAv themedImage--dark_ONYO"></div><b class="navbar__title text--truncate">南川笔记</b></a><a class="navbar__item navbar__link" href="/blog/archive">My Blog</a><a class="navbar__item navbar__link" href="/docs/">My Notes</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/markshawn2020/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Source of Framework<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/markshawn2020/docusaurus-my-website" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Source of Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/markshawn2020/my-documents" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Source of Documents<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_bT41 colorModeToggle_UolE"><button class="clean-btn toggleButton_x9TT toggleButtonDisabled_Dj8q" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_dnYY"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_OBbf"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_CTO4"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_PEsc"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_P3nc thin-scrollbar" aria-label="最近博文导航"><div class="sidebarItemTitle_VrjY margin-bottom--md">All Posts</div><ul class="sidebarItemList_OSkG clean-list"><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2024/2422-INFP与ENTJ的日日夜夜">2024/2422-INFP与ENTJ的日日夜夜</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2024/2422-从FP走向TJ">2024/2422-从FP走向TJ</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2024/06/21/Rabbit-R1分享会">Rabbit-R1分享会</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2024/05/01/2419-信仰一跃">2419-信仰一跃</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2024/04/30/飞脑">飞脑</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/discarded/微信聊天记录备份指南">微信聊天记录备份指南</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2024/01/14/觉醒的硅基">觉醒的硅基</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2023/12/31/index">[03-27-digital-travel] 南川数字游民之旅01：</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2023/12/27/南川骑行川藏线（下）">南川骑行川藏线（下）</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2023/12/19/十年 —— 一位自学者、技术工作者、理想主义者的独白">十年 —— 一位自学者、技术工作者、理想主义者的独白</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2023/12/18/南川骑行川藏线（中）">南川骑行川藏线（中）</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2023/09/25/当我想做一款吹羽毛小游戏……">当我想做一款吹羽毛小游戏……</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2023/08/31/Poketto.AI 每一个人的哆啦A梦">Poketto.AI: 每一个人的哆啦A梦</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/12/31/this-year">this-year</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/08/29/coding-cries">代码有所能，有所不能</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/08/03/taiwan-data-research">关于台湾进出口临时政策与历史数据的研究</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/08/01/wechat-hack">微信数据库破解</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/07/11/prose-I-am-me">札记 | 我与我周旋久，我亦是我</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/07/02/dev-gaokao">编程 | 使用 pandas 研究高考志愿填报</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/06/16/dev-gopro-2">编程 | GoPro 02: 玩转 OpenLab</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/06/11/dev-gopro-1">编程 | GoPro 01: 全天候自动 4K 延时摄影</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/06/06/dev-ios-automation">编程 | iOS 自动化实现王者荣耀一键换装</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/05/23/dev-mp3-meta">编程 | 逼哥的音乐元数据修复</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/05/22/evaluation-breo-dream6">评测 | Breo Dream6 按摩仪</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/05/15/prose-is-not-easy">札记 | 须知，活好是很不容易的</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/05/14/dev-voice2srt">编程 | 视频剪辑自动转写字幕</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/04/22/research-mbti/mark_mbti">研究 | 基于 MBTI 的人生复盘与计划（上）</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/03/27/prose-321-air-crash">札记 | 愿逝者安息生者坚强，你我迎风奔跑向阳而生</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/03/09/dev-douban-renting">编程 | 北京租房系统设计、研究与经验 0.1.0</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/02/21/ad-beike-hiring">推广 | 贝壳新业务 VR 全职开发招募</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/02/12/coding-design-shortcuts/02-12-coding-design-shortcuts">编程设计艺术思考（持续更新）</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/02/03/prose-living">札记 | 2022，活着</a></li><li class="sidebarItem_WJ0y"><a aria-current="page" class="sidebarItemLink_Qrfg sidebarItemLinkActive_nUeK" href="/blog/2022/02/02/dev-linux">编程 | Linux 笔记</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/02/01/prose-2022-begining">札记 | 关于近几年的一些感悟</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/01/23/prose-engineer-cultivation">札记 | 一位工程师的自我修养（序）</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/01/20/prose-first-job">札记 | 是的，我入职了</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2022/01/01/prose-my-2021">札记 | 我的 2021：混沌与洞见</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2021/12/24/dev-webpack">编程 | 记与 Webpack 十二小时的奋战</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2021/12/04/一道“全军覆灭”的数学题">一道“全军覆灭”的数学题</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2021/12/04/考研数学试题编辑">考研数学试题编辑</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2021/11/28/今天南川学习十小时了吗？是的。">关于正态分布表的一个有趣发现</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2021/11/09/浅谈我自学编程的经历与经验">浅谈我自学编程的经历与经验</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2021/10/28/关于有人想仲裁我">关于有人想仲裁我</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2021/10/27/十月：无题">十月：无题</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2021/10/18/王者荣耀打野上分经验总结（全干货）">王者荣耀打野上分经验总结</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2021/06/27/毕业一年：我的得与失">南川二一零六：毕业一年，我的失与得</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2021/05/12/记逆向攻破拼多多加密系统">南川逆向笔记 | 攻破 PDD 风控系统（一）</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2021/04/14/从0到1搭建一个Electron应用">Electron 开发笔记 - 从 0 到 1 搭建一个 Electron 应用</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2021/03/12/shamghai-rent-lesson">记与上海无良房东斡旋经验与教训</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2021/01/09/评测-南川Effie使用初体验">南川 Effie 使用初体验</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2020/11/20/拜登获胜演讲稿">拜登获胜演讲稿</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2020/10/28/人生 | 五台山论道（节选自《遥远的救世主》）">五台山论道（节选自《遥远的救世主》）</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2020/10/16/大学沉思录：一路失败，我到底学到了什么">大学沉思录：一路失败，我到底学到了什么</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2020/10/16/大学沉思录：意向调查">大学沉思录：意向调查</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2020/09/22/JS、ES、TS、node、Vue、React修炼">JS、ES、TS、node、Vue、React 修炼</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2020/09/15/投资：凯利公式">“中一千万”与“挣一千万”到底哪个更容易</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/bug_fix">BUG FIX</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/home">南川笔记中文首页</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/todo-old">待办事项</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/release-notes">更新日志</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/guestbook">留言墙</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2020/09/12/经验与发现">经验与发现</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2020/09/10/JS、ES、TS、node、Vue、React修炼">JS、ES、TS、node、Vue、React 修炼</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/文集/开发常用命令行">开发常用命令行</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/my_university">谨以此文，纪念我在大学的这四年</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/VuePress-Journal">VuePress你好，VuePres再见</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/文集/vue开发笔记">vue开发笔记</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2020/08/29/博客开发之导航设计方案">博客开发之导航设计方案</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2020/08/29/如何向ElementUI一样封装Message全局组件">如何向ElementUI一样封装Message全局组件</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/文集/如何给右键添加任何启动程序">如何给右键添加任何启动程序</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2020/08/29/我谈《三十而已》">我谈《三十而已》</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/文集/极客运营手册/">极客运营手册</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2020/09/13/ssg-ssr">When to Use Static Generation v.s. Server-side Rendering</a></li><li class="sidebarItem_WJ0y"><a class="sidebarItemLink_Qrfg" href="/blog/2020/09/13/pre-rendering">Two Forms of Pre-rendering</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_UBNu" itemprop="headline">编程 | Linux 笔记</h1><div class="container_x5Un margin-vert--md"><time datetime="2022-02-02T00:00:00.000Z" itemprop="datePublished">2022/02/02</time> · <!-- -->阅读需 59 分钟</div></header><div id="post-content" class="markdown" itemprop="articleBody"><blockquote><p>很久以前，自打我刚开始学计算机，就有一个认知：精通 linux 的人都是大神。</p><p>但，我是不需要学的。</p><p>很长一段时间，我都是这么认为的。</p><p>直到这两年，我选择了 Mac 作为自己的主力开发工具，两年的摸爬滚打，尤其是始于对<code>iTerm + zsh + oh-my-zsh</code>颜值的惊艳，到现在能够在 mac、ubuntu、centos、windows 等各大操作系统之间自如切换，并逐渐意识到命令行系统对于现代操作系统的重要性，命令行熟练度对于提升工作效率的重要性，我知道，我已经走向了一条与计算机越来越近的不归路。</p><p>而这一切中间的桥梁，正是 linux，于我而言，不认识不掌握 linux，不可谓入了程序的真正世界。</p><p>因此，本系列第一篇，献给 linux，一方面是致敬我心中曾经那触不可及的信仰，另一方面也是为了能重新认识它，对它说一句它可能真正想听的：&quot;hello linux, I&#x27;m mark&quot;。</p><p>因为每一个 linux 的学习者最后都会发现，linux 并不神秘，而 linux 真正启迪人的，是它的设计哲学，与对你工作流的重塑。</p><p>在此，我斗胆把 python 之禅搬于此，因为在我心中，它于 linux，是心有灵犀，同样适用：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/mark_core-notes-of-linux-1643723806431-00b5b858aa9372ebc4b9dfc37178554d0d0d4eb62c854edb6cd2385e15333e07.png" alt="picture 16" class="img_vXGZ"></p></blockquote><h2 class="anchor anchorWithStickyNavbar_rB0w" id="首先linux-是什么">首先，linux 是什么<a class="hash-link" href="#首先linux-是什么" title="标题的直接链接">​</a></h2><p>作为南川的核心开发笔记（从实际工作经验中提炼出来的笔记），我无意过多展开一些基本的背景介绍，因此也不会花时间去讲述 linux 和 unix 和 mac 之间的关系，这些读者们都可以很方便地在互联网找到答案。</p><p>我只简单地如下描述，目前用于个人使用的电脑系统，主要分为 windows 和 mac。</p><p>windows 的最大优点，是价格相对平民，生态丰富，交互习惯最符合人类直觉。</p><p>mac 的最大优点，是审美一流，做工一流，触控板和屏幕天花板的存在，然后于我而言最大的优点，是其 unix 系统，可以允许我像 linux 一样方便地使用命令行。</p><p>所以，我在使用了五年的 windows 后，毅然投入了 mac 的怀抱，而其中的目的之一，就是为了更好地掌握 linux。</p><p>（当然，纯粹使用 linux 我是不会接受的，我还是觉得追求审美也是生活中很重要的一部分，于是乎，<del>我现在已经极其极其不想看到任何 windows 的界面</del>）</p><p>说了这么多，还是没说 linux 是什么。</p><p>没错，就应该这样，这篇是核心开发笔记，非核心的，可以出门右转某乎，比如：</p><ul><li><a href="https://www.zhihu.com/question/434914458/answer/1664277013" target="_blank" rel="noopener noreferrer">(19 封私信 / 67 条消息) 作为开发者，你更喜欢用 macOS、Linux 还是 Windows 操作系统？为什么？ - 知乎</a></li><li><a href="https://www.zhihu.com/question/24261540/answer/80418621" target="_blank" rel="noopener noreferrer">(19 封私信 / 67 条消息) Linux 各大发行版有什么特色？ - 知乎</a></li></ul><p>PS: 以上链接，我都没有看过，只是随手一搜。😄</p><h2 class="anchor anchorWithStickyNavbar_rB0w" id="其次如何拥有一台-linux">其次，如何拥有一台 linux<a class="hash-link" href="#其次如何拥有一台-linux" title="标题的直接链接">​</a></h2><p>有很多种方法。</p><p>如果你是 windows 10+用户，最方便的方法，是基于内置的<code>wsl</code>系统，不知道是什么？出门右转。</p><p>至于内置的<code>wsl</code>会不会有什么限制和性能损耗？这个我也不知道，我不用，如果你知道，欢迎留言，我还挺想知道的，只要你愿意留我就愿意听，并且可能会影响我接下来的认知。</p><p>但我不会因为这个出门右转，我已经为了给大家示范如何出门右转，已经出门一次了，寒冬腊月，怪冷的。</p><p>这是其一。</p><p>其二，装一个双系统。</p><p>我一直想装个双系统，并且尝试到了最后一步，因为工作需要。当时我给我的 mac 装 ubuntu 的双系统，结果到了安装界面，鼠标和键盘没有响应，查了查好像我的版本 mac 2020 pro 的鼠标和键盘不走 usb，而是总线？</p><p>不清楚，后续我可能会继续尝试装个双系统，目前我用的是虚拟机。</p><p>PS：友情提示，小白不要轻易尝试双系统，容易留下不学无术后悔的泪。</p><p>其三，装一个虚拟机，比如<code>vmware</code>或者<code>virtual box</code>。两个都尝试下来，个人比较喜欢<code>vmware</code>。</p><p>至于怎么装，怎么配置，出门右转，或者等我后续系列，会有虚拟机/双系统专刊的，应该（如果不懒的话）。</p><p>我目前的虚拟机（内部运行的 ubuntu，可以同时运行多个操作系统）界面如下：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/mark_core-notes-of-linux-1643725375163-c76c9d50a6632d532665d3bbbffb45379f7a72060170528ffbba377ad4a0d461.png" alt="picture 17" class="img_vXGZ"></p><p>其四，阿里云/腾讯云/华为云/亚马逊云……租一个 linux 服务器或者操作系统等。这是业界搭建后端必备。我之前一直用的阿里云/腾讯云，因为以前做全栈多一些。</p><p>目前市面上，服务端应该用 centos 比较多，客户端应该用 ubuntu 比较多，主要原因可能是 centos 默认没有界面，程序较为稳定；ubuntu 的界面很好看，比较适合个人鼓捣。</p><p>我目前使用的 ubuntu 界面如下：</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/mark_core-notes-of-linux-1643725414611-b8cc4126f345748e9f692843738ed6d80aa61c82103b1321308468c70443c356.png" alt="picture 18" class="img_vXGZ"></p><p>这里值得注意的是，有一些企业可能购置了类似于 windows server 之类的服务端，这种本质上还是 windows 系统，不是 linux 系统，只不过一直跑在公司网络上。</p><p>所以当我们谈到服务器的时候，可能并不一定是 linux 系统，这是值得注意的。</p><p>我为啥知道这玩意呢，因为之前碰到一个项目是这样的，我本来写好的 linux 的后端，想着直接移到目标公司网上，结果一看，windows server，把我给整不会了。</p><h2 class="anchor anchorWithStickyNavbar_rB0w" id="接着如何登录-linux">接着，如何登录 linux<a class="hash-link" href="#接着如何登录-linux" title="标题的直接链接">​</a></h2><p>理论上，登录这个动作，不应该是个问题，但那仅限于是登录自己的本地的每天都用的电脑。</p><p>linux 一般都是在服务端的，一般涉及到远程访问，所以通用做法是用<code>ssh</code>。</p><p>基本的 ssh 用法出门右转即可，本文只记录如何免密登录 ssh。</p><p>因为 ssh 默认每次都会输入密码，很不畅快。更严重的是，如果涉及到写批运行脚本，则密码输入会成为脚本杀手，至少会让脚本更难理解，出错概率更高。</p><p>很简单，第一步，先<code>ssh USERNAME@SERVER</code>，其中<code>USERNAME</code>和<code>SERVER</code>是目标服务器的用户名和 IP 地址（或者域名，如果有的话）。</p><p>一般，默认的<code>USERNAME</code>是<code>root</code>，密码也是<code>root</code>，虽然这很不推荐，不安全，但对于新手却是很友好。</p><p>尽管我的密码更简单，简单到你会拍案惊奇。</p><p>当你第一次<code>ssh</code>之后，会在本机的当前用户文件夹下（mac 和 linux 都是<code>~</code>文件夹，windows 是<code>C:\\Users\\XXX</code>）生成一个<code>.ssh/id_rsa.pub</code>，这是公钥。</p><p>这个文件的内容，涉及到了 rsa 算法等密码学相关内容，不展开。而你要做的，就是把里面的文本复制，粘贴到目标服务器的<code>~/.ssh/authorization_keys</code>文件内（如果文件不存在，则新建；如果文件已有内容，则另起一行，补在后面即可）。</p><p>以下给出一键脚本：</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">USERNAME=&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SERVER=&quot;xxxxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">file=&quot;id_rsa.pub&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scp ~/.ssh/$file $USERNAME@$SERVER:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh $USERNAME@$SERVER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat $file &gt;&gt; .ssh/authorized_keys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm $file</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个脚本里的<code>scp</code>是在本地与服务器之间交换文件的意思，最后一个冒号表示当前文件夹，而<code>$USERNAME@SERVER</code>即目标服务器的用户文件夹，这就对上了。</p><p><code>cat</code>是读取所有文本内容到输出流，<code>&gt;&gt;</code>是把输出流内容添加到目标文件的末尾。</p><p><code>rm</code>是删除，这里代表传送的<code>file</code>是一个中转文件的意思，为啥要中转，你猜。</p><p>最后，为了防止<code>ssh</code>超时断开，可以在本地（客户端）的<code>ssh</code>配置文件中补一下以下配置，这样每分钟发送一次消息给服务端，服务端就不会主动清理客户端了。相信我，如果不解决这个问题，后续你会很头疼的。</p><div class="language-yaml codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-yaml codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># /etc/ssh/ssh_config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">HOST</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ServerAliveInterval 60</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_rB0w" id="最后如何掌控-linux以下给出一部分经验笔记">最后，如何掌控 Linux，以下给出一部分经验笔记<a class="hash-link" href="#最后如何掌控-linux以下给出一部分经验笔记" title="标题的直接链接">​</a></h2><h2 class="anchor anchorWithStickyNavbar_rB0w" id="-------------------------------------">-------------------------------------<a class="hash-link" href="#-------------------------------------" title="标题的直接链接">​</a></h2><h2 class="anchor anchorWithStickyNavbar_rB0w" id="best-practice-ubuntu-initialization">BEST-PRACTICE: ubuntu initialization<a class="hash-link" href="#best-practice-ubuntu-initialization" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_rB0w" id="step-0-install">step 0. install<a class="hash-link" href="#step-0-install" title="标题的直接链接">​</a></h3><ul><li><a href="https://releases.ubuntu.com/18.04/" target="_blank" rel="noopener noreferrer">Ubuntu 18.04.6 LTS (Bionic Beaver)</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="step-1-config-apt-source">step 1. config apt source<a class="hash-link" href="#step-1-config-apt-source" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_rB0w" id="1-change-apt-source">1. change apt source<a class="hash-link" href="#1-change-apt-source" title="标题的直接链接">​</a></h4><p>ref:</p><ul><li><a href="https://zhuanlan.zhihu.com/p/61228593" target="_blank" rel="noopener noreferrer">【Ubuntu】Ubuntu 18.04 LTS 更换国内源——解决终端下载速度慢的问题 - 知乎</a></li></ul><h5 class="anchor anchorWithStickyNavbar_rB0w" id="fastestscript-way-直接修改etcaptsourceslist">fastest/script way: 直接修改<code>/etc/apt/sources.list</code><a class="hash-link" href="#fastestscript-way-直接修改etcaptsourceslist" title="标题的直接链接">​</a></h5><p><del>其中，第一种方案虽然可行，但是有两个缺点，一个是侵入性高，所以一般都会先备份一下原文件，然后使用替换命令。</del></p><p>Update 2022-01-24：实际上所有方式底层都是通过修改 apt sources.list 文件配置的，所以没有什么侵入性一说，都会先做备份。</p><p>GUI 版（也就是<code>softwares &amp; update</code> app 里会提供测试，自动修改，改完之后触发更新操作，而这些其实可以自己用脚本完成，响应也更快！</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># backup source file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">APT_SOURCES_LIST_FILE=/etc/apt/sources.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp $APT_SOURCES_LIST_FILE $APT_SOURCES_LIST_FILE.bak</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># change source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">APT_SOURCE=&quot;http://mirrors.yun-idc.com/ubuntu/&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo sed -i  &quot;s|deb \S+|deb $APT_SOURCE|g&quot; $APT_SOURCES_LIST_FILE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># update source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt update</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>另一个就是，只能填入自己想填的源，但很可能不是最好的源。比如我一直以为阿里云的源很好，结果这次发现，极其地慢，我确认在<code>update</code>时走的是<code>cn.xxx</code>，但依旧只有十几 k。</p><h5 class="anchor anchorWithStickyNavbar_rB0w" id="robustestrecommend-for-newbie-way-在softwares--update里修改-server">robustest/recommend-for-newbie way: 在<code>softwares &amp; update</code>里修改 server<a class="hash-link" href="#robustestrecommend-for-newbie-way-在softwares--update里修改-server" title="标题的直接链接">​</a></h5><p>第二种办法就是在<code>softwares &amp; update</code>里自动测试最好的服务器，然后选择它。我测出来是<code>yun-idc</code>最好，但是因为我没用过，所以当时没考虑它，后来被阿里云折磨的不行了，就试了它，结果飞快，十兆每秒！</p><h5 class="anchor anchorWithStickyNavbar_rB0w" id="use-others-way-使用别人写好的-git-仓库进行配置">use others way: 使用别人写好的 git 仓库进行配置<a class="hash-link" href="#use-others-way-使用别人写好的-git-仓库进行配置" title="标题的直接链接">​</a></h5><p>第三种办法，由于我还没配好源，所以也没 git，而此时下载 git 又会极其地慢，所以也不考虑。</p><h4 class="anchor anchorWithStickyNavbar_rB0w" id="2-update-apt">2. update apt<a class="hash-link" href="#2-update-apt" title="标题的直接链接">​</a></h4><p>!!!tip If the following commands warn that files are locked, then wait for some minutes, or use <code>lsof FILE</code> to have a check, more refer to: - <a href="https://zhuanlan.zhihu.com/p/126538251" target="_blank" rel="noopener noreferrer">解决 apt-get /var/lib/dpkg/lock-frontend 问题 - 知乎</a></p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt get update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt get upgrade</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_rB0w" id="step-2-config-git">step 2. config git<a class="hash-link" href="#step-2-config-git" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt get git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git config --global user.name YOUR_NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git config --global user.email YOUR_EMAIL</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_rB0w" id="step-3-config-terminal">step 3. config terminal<a class="hash-link" href="#step-3-config-terminal" title="标题的直接链接">​</a></h3><h3 class="anchor anchorWithStickyNavbar_rB0w" id="step-4-config-language">step 4. config language<a class="hash-link" href="#step-4-config-language" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-1-config-chinese-input-source-via-ibus">resolution 1: config chinese input source via ibus<a class="hash-link" href="#resolution-1-config-chinese-input-source-via-ibus" title="标题的直接链接">​</a></h4><p>ibus 输入方式和搜狗输入法之间不是很兼容，如果出现两者都无法输入中文的情况，建议根据<a href="https://www.jianshu.com/p/c04a4b03d30f" target="_blank" rel="noopener noreferrer">Ubuntu 18.04LTS 安装中文输入法以及快捷键设置 - 简书</a>先卸载搜狗输入法，确认 ibus 是可以用的，具体就是：<code>sudo apt-get remove fcitx*</code></p><p>确认以下配置：</p><ol><li>设置 - 地区与语言 - 输入法，中要添加包含智能拼音：</li></ol><img loading="lazy" alt="picture 5" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/notes-1642268594063-def6bf87b276425161475a3ce55fbb05d8bb305b913ae5b39cc6e9708a6e32ae.png" class="img_vXGZ"><ol start="2"><li><p>语言支持中，要启用 ibus 方案</p><img loading="lazy" alt="picture 7" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/notes-1642268691854-043dc8408c8326d13213bc92302c26f2d85b2be6a2892dbc58cf3d3349c9c8bc.png" class="img_vXGZ"><p>注销账号重新登录即可。</p></li><li><p>如果注销账号还不行， 就要尝试<code>sudo reboot</code>一下。</p></li></ol><h4 class="anchor anchorWithStickyNavbar_rB0w" id="fixme-resolution-2-config-chinese-input-source-via-sougou">FIXME: resolution 2: config chinese input source via sougou<a class="hash-link" href="#fixme-resolution-2-config-chinese-input-source-via-sougou" title="标题的直接链接">​</a></h4><p>虽然按照官网走了好几遍，但始终还是没有配成这套方案，我也不知道什么原因。</p><p>而且 ibus 方案也必须在 fcitx 卸载之后才能正常使用。</p><p>参考官网：</p><ul><li><a href="https://pinyin.sogou.com/linux/" target="_blank" rel="noopener noreferrer">搜狗输入法 for linux</a></li></ul><p>更新：确保：</p><ol><li>输入源中只有一个英文（不要有 ibus 的中文，否则会干扰）</li></ol><img loading="lazy" alt="picture 8" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/notes-1642273187873-a0b1b31105b8e9fdea3ea0c576bc3e81e15cd6dec9c1dfb55a43d3a64ece559d.png" class="img_vXGZ"><ol start="2"><li>输入系统用<code>fcitx</code></li></ol><img loading="lazy" alt="picture 9" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/notes-1642273215269-68b870e74dbe7fecdac78268144d73dc987602eddc24098c4e10763b540eb6bb.png" class="img_vXGZ"><p>再更新：算了吧，我个人觉得搜过 ubuntu 的 bug 是真地多，一会能用一会不能用，尤其是我在调成中文版能用后又调成英文版，然后用不了了，接着再怎么调中文版都用不了了，非常蛋疼。</p><h4 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-switch-language-input-source">how to switch language input source<a class="hash-link" href="#how-to-switch-language-input-source" title="标题的直接链接">​</a></h4><p>The best way is to directly install the Chinese version of ubuntu, since the Chinese feature is built-in.</p><p>However, what we download directly from the official ubuntu website, may not support chinese choice natively. So it highly depends on what distribution version of ubuntu we download.</p><p>ref:</p><ul><li><a href="https://blog.csdn.net/qq_31290747/article/details/94555163" target="_blank" rel="noopener noreferrer">(20 条消息) ubuntu 切换中文输入法<!-- -->_<em>g_y</em>的博客-CSDN 博客<!-- -->_<!-- -->ubuntu 切换中文输入法</a></li></ul><h4 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-change-language-to-english">how to change language to english<a class="hash-link" href="#how-to-change-language-to-english" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">echo export LANGUAGE=en_US.UTF-8 |  sudo tee -a ~/.bashrc</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://askubuntu.com/questions/133318/how-do-i-change-the-language-via-a-terminal" target="_blank" rel="noopener noreferrer">command line - How do I change the language via a terminal? - Ask Ubuntu</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="improve-a-script-to-init-ubuntu-may-not-work">IMPROVE: a script to init ubuntu (may not work)<a class="hash-link" href="#improve-a-script-to-init-ubuntu-may-not-work" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">version: 0.0.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">features:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1. disable sudo password so running commands faster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2. disable apt password so installing packages faster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    3. enable arrow up/down to backward/forward search prefix command</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    4. auto change deb(apt) source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    5. auto install zsh, config oh-my-zsh, set as the default shell, you may need to switch to bash when build android in case of errors, it&#x27;s easy just to input `bash` in terminal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    6. re-login to make these changes work</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># !IMPORTANT: config global variables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PASSWORD=&quot; &quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># --- step 1 ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># write password variable into bash_profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;export PASSWORD=$PASSWORD&quot; &gt;&gt; ~/.bash_profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source ~/.bash_profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># disable sudo password, ref: https://askubuntu.com/a/878705</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;$USER ALL=(ALL:ALL) NOPASSWD: ALL&quot; | sudo tee -a /etc/sudoers.d/$USER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># --- step 1.5 ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># enable backward/forward prefix commands search</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &#x27;&quot;\e[A&quot;: history-search-backward</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;\e[B&quot;: history-search-forward&#x27; &gt;&gt; ~/.inputrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bind -f ~/.inputrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># --- step 1.7 ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># change timezone, so that time display ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;export TZ=&#x27;Asia/Shanghai&#x27;&quot; &gt;&gt; ~/.profile # need relogin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># --- step 2 ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># update apt and install packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># change apt source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">APT_SOURCE=&quot;http://mirrors.yun-idc.com/ubuntu/&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">APT_SOURCES_LIST_FILE=/etc/apt/sources.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo sed -i.bak -r  &quot;s|deb \S+|deb $APT_SOURCE|g&quot; $APT_SOURCES_LIST_FILE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Y&quot; | sudo apt update # need confirm but skipped since configured</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Y&quot; | sudo apt upgrade</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSTALLED_PACKAGES=&quot;vim git htop zsh terminator&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $INSTALLED_PACKAGES | xargs sudo apt install -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># --- step 3 ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># modify timezone (need relogin)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export &quot;TZ=Asia/Shanghai&#x27;\n&quot; &gt;&gt; ~/.profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># --- step 4 ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># configure zsh (installed in \$INSTALLED_PACKAGES) / oh-my-zsh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># install oh-my-zsh (built-in backward search)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ref: https://ohmyz.sh/#install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sh -c &quot;$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># --- step 5 ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># diy zsh based on &#x27;oh-my-zsh&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># add dynamical time display</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &#x27;PROMPT=&quot;%{$fg[yellow]%}%D{%Y/%m/%d} %D{%H:%M:%S} %{$fg[default]%}&quot;$PROMPT&#x27; &gt;&gt; ~/.zshrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># set zsh as the default terminal (need relogin!)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chsh -s $(which zsh) # after configed sudo, no need to input password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># enable zsh changes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exec zsh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># --- step 6 ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># re-login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo pkill -u $USER</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_rB0w" id="best-practice-linux-connection-ssh">BEST-PRACTICE: linux connection (<code>ssh</code>)<a class="hash-link" href="#best-practice-linux-connection-ssh" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_rB0w" id="ssh-generate-public-keys">ssh generate public keys<a class="hash-link" href="#ssh-generate-public-keys" title="标题的直接链接">​</a></h3><p>ref: <a href="https://git-scm.com/book/en/v2/Git-on-the-Server-Generating-Your-SSH-Public-Key" target="_blank" rel="noopener noreferrer">https://git-scm.com/book/en/v2/Git-on-the-Server-Generating-Your-SSH-Public-Key</a></p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p ~/.ssh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/.ssh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh-keygen -o</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_rB0w" id="ssh-no-secretpassword">ssh no secret/password<a class="hash-link" href="#ssh-no-secretpassword" title="标题的直接链接">​</a></h3><div class="theme-admonition theme-admonition-tip alert alert--success admonition_O4V7"><div class="admonitionHeading_mM4K"><span class="admonitionIcon_Wsqb"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_wp6k"><p>最近遇到了发现即使加了 authorization_keys 还是不行，搜了很多帖子，大致理出了解决办法</p><p>首先可以在服务器上使用 <code>/usr/sbin/sshd -d -p 2222</code> 开启sshd调试，然后在client上使用 <code>ssh -vv xxx@xxx</code> 进行调试，主要看服务端报什么错，例如：<code>esca</code>算法不支持啥的，然后就意识到了是 ssh 版本太低，要升级。</p><p>不过由于 ssh-client 依赖于 ssh-server，所以也可能还比较难升，具体的办法可以用：</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt purge openssh-server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get install openssh-client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get install openssh-server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl restart sshd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl restart ssh</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><p>It&#x27;s easy that if only you generate a <code>id_rsa.pub</code> and <code>scp</code> to your <code>~/.ssh/authorization_keys</code> then things all done.</p><h4 class="anchor anchorWithStickyNavbar_rB0w" id="solution-1">Solution 1<a class="hash-link" href="#solution-1" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">username=&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server=&quot;xxxxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">file=&quot;~/.ssh/id_rsa.pub&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat $file | ssh $username@$server &quot;cat - &gt;&gt; ~/.ssh/authorized_keys&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># sample</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat $file | ssh aosp@192.168.1.242 &quot;cat - &gt;&gt; ~/.ssh/authorized_keys&quot;</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_rB0w" id="solution-2">Solution 2<a class="hash-link" href="#solution-2" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">username=&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server=&quot;xxxxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">file=&quot;~/.ssh/id_rsa.pub&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scp $file $username@$server:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh $username@$server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat $file &gt;&gt; .ssh/authorized_keys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm $file</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://alvinalexander.com/linux-unix/how-use-scp-without-password-backups-copy/" target="_blank" rel="noopener noreferrer">How to use the Linux ‘scp’ command without a password to make remote backups | alvinalexander.com</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="ssh-keep-connection-alive">ssh keep connection alive<a class="hash-link" href="#ssh-keep-connection-alive" title="标题的直接链接">​</a></h3><p>the simplest way is to force the client to keep sending <!-- -->[a null]<!-- --> message(packet) to the server, in case that the server closed the connection beyond the time limitation, and what you need to do is just to modify 2 lines in your <code>/etc/ssh/ssh_config</code> file.</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">sudo vim /etc/ssh/ssh_config</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>change into these:</p><div class="language-yaml codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-yaml codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">HOST</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ServerAliveInterval 60</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>finally, maybe you should restart your client. If you use the mac, you can:</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># restart-ssh, reference: https://gist.github.com/influx6/46c39709a67f09908cc7542ca444fca2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo launchctl stop com.openssh.sshd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo launchctl start com.openssh.sshd</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_rB0w" id="best-practice-linux-env-management">BEST-PRACTICE: linux env management<a class="hash-link" href="#best-practice-linux-env-management" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-change-apt-source">how to change apt source<a class="hash-link" href="#how-to-change-apt-source" title="标题的直接链接">​</a></h3><p>ref:</p><ul><li><a href="https://askubuntu.com/questions/104695/how-do-i-change-mirrors-in-ubuntu-server-from-regional-to-main" target="_blank" rel="noopener noreferrer">command line - How do I change mirrors in Ubuntu Server from regional to main? - Ask Ubuntu</a></li></ul><h4 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-1-manual-change-from-the-app-of-softwares--updates">resolution 1: manual change from the App of <code>Softwares &amp; Updates</code><a class="hash-link" href="#resolution-1-manual-change-from-the-app-of-softwares--updates" title="标题的直接链接">​</a></h4><h4 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-2-modify-the-configuration-manually-from-the-terminal">resolution 2: modify the configuration manually from the terminal<a class="hash-link" href="#resolution-2-modify-the-configuration-manually-from-the-terminal" title="标题的直接链接">​</a></h4><blockquote><p>CONCLUSION</p></blockquote><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">MIRROR_FROM=&quot;us.archive.ubuntu.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MIRROR_TO=&quot;mirrors.tuna.tsinghua.edu.cn&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">APT_FILE=&quot;/etc/apt/sources.list&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo sed -i &quot;s|${MIRROR_FROM}|${MIRROR_TO}|g&quot; ${APT_FILE}</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>DETAIL</p></blockquote><p>There are a few mirror servers can be used in China:</p><ul><li>mirrors.tuna.tsinghua.edu.cn</li><li>ftp.sjtu.edu.cn</li><li>mirrors.aliyun.com</li><li>mirrors.huaweicloud.com</li><li>mirrors.yun-idc.com</li><li>...</li></ul><p>The format of these mirrors may be as <code>http://${MIRROR_URL}/ubuntu/</code></p><p>And the default configuration of ubuntu servers are at <code>/etc/apt/sources.list</code>, with a copy of backup at <code>/etc/apt/sources.list.save</code>.</p><p>Here is what the <code>save</code> contents are:</p><div class="language-yaml codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-yaml codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">// /etc/apt/sources.list.save</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#deb cdrom:[Ubuntu 18.04.6 LTS _Bionic Beaver_ - Release amd64 (20210915)]/ bionic main restricted</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># See http://help.ubuntu.com/community/UpgradeNotes for how to upgrade to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># newer versions of the distribution.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deb http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//us.archive.ubuntu.com/ubuntu/ bionic main restricted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># deb-src http://us.archive.ubuntu.com/ubuntu/ bionic main restricted</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## Major bug fix updates produced after the final release of the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## distribution.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deb http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//us.archive.ubuntu.com/ubuntu/ bionic</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">updates main restricted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># deb-src http://us.archive.ubuntu.com/ubuntu/ bionic-updates main restricted</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## team. Also, please note that software in universe WILL NOT receive any</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## review or updates from the Ubuntu security team.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deb http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//us.archive.ubuntu.com/ubuntu/ bionic universe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># deb-src http://us.archive.ubuntu.com/ubuntu/ bionic universe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deb http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//us.archive.ubuntu.com/ubuntu/ bionic</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">updates universe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># deb-src http://us.archive.ubuntu.com/ubuntu/ bionic-updates universe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## team, and may not be under a free licence. Please satisfy yourself as to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## your rights to use the software. Also, please note that software in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## multiverse WILL NOT receive any review or updates from the Ubuntu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## security team.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deb http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//us.archive.ubuntu.com/ubuntu/ bionic multiverse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># deb-src http://us.archive.ubuntu.com/ubuntu/ bionic multiverse</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deb http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//us.archive.ubuntu.com/ubuntu/ bionic</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">updates multiverse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># deb-src http://us.archive.ubuntu.com/ubuntu/ bionic-updates multiverse</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## N.B. software from this repository may not have been tested as</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## extensively as that contained in the main release, although it includes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## newer versions of some series which may provide useful features.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## Also, please note that software in backports WILL NOT receive any review</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## or updates from the Ubuntu security team.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deb http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//us.archive.ubuntu.com/ubuntu/ bionic</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">backports main restricted universe multiverse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># deb-src http://us.archive.ubuntu.com/ubuntu/ bionic-backports main restricted universe multiverse</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## Uncomment the following two lines to add software from Canonical&#x27;s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## &#x27;partner&#x27; repository.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## This software is not part of Ubuntu, but is offered by Canonical and the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## respective vendors as a service to Ubuntu users.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># deb http://archive.canonical.com/ubuntu bionic partner</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># deb-src http://archive.canonical.com/ubuntu bionic partner</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deb http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//security.ubuntu.com/ubuntu bionic</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">security main restricted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># deb-src http://security.ubuntu.com/ubuntu bionic-security main restricted</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deb http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//security.ubuntu.com/ubuntu bionic</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">security universe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># deb-src http://security.ubuntu.com/ubuntu bionic-security universe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deb http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//security.ubuntu.com/ubuntu bionic</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">security multiverse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># deb-src http://security.ubuntu.com/ubuntu bionic-security multiverse</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-know-whats-the-os-platform">how to know what&#x27;s the os platform<a class="hash-link" href="#how-to-know-whats-the-os-platform" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># mac: Darwin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># if platform is mac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [[ $(uname) == Darwin ]];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">then XXX;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else YYY;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi;</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://stackoverflow.com/questions/3466166/how-to-check-if-running-in-cygwin-mac-or-linux" target="_blank" rel="noopener noreferrer">bash - How to check if running in Cygwin, Mac or Linux? - Stack Overflow</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-configure-python-environment">how to configure python environment<a class="hash-link" href="#how-to-configure-python-environment" title="标题的直接链接">​</a></h3><ol><li>install the python on the server, the version of which would better correspond with the one of the local in case of unexpected error caused by version difference</li><li>use <code>virtualenv</code> to create an env based on this python version named <code>venv_py</code> under this working directory</li><li>activate this env</li><li>use <code>pip</code> to install the <code>requirements.txt</code></li><li>run!</li></ol><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">PY_VERSION=python3.9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># install the target python version based on its version number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># if you don&#x27;t use these two lines, then you would suffer from `wget blablabla...` when you checked what the hell the python repo url is</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install software-properties-common -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo add-apt-repository ppa:deadsnakes/ppa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install ${PY_VERSION}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># use `virtualenv` to create and activate a new python env fast~</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install virtualenv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">virtualenv -p ${PY_VERSION} venv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source venv_py/bin/activate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># install all the requirements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># if you need to dump all the requirements of a python project used, you can use `pip freeze &gt; requirements.txt` so that a file named of `requirements.txt` would be generated under the current directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pip install -r requirements.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># run our backend of `fastapi`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python main.py</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_rB0w" id="-cannot-use-sudo-apt-get-install-xxx-to-install-packages">✅ cannot use <code>sudo apt-get install xxx</code> to install packages<a class="hash-link" href="#-cannot-use-sudo-apt-get-install-xxx-to-install-packages" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">cd /var/lib/dpkg/updates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm -rf ./*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get disk-upgrade # it may cost a little of time</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><p>I changed the suggestion in this article from <code>rm -r</code> to <code>rm -rf</code>, otherwise not successful.</p><ul><li><a href="https://www.codeprj.com/blog/a352621.html" target="_blank" rel="noopener noreferrer">E:dpkg was interrupted, you must manually run&#x27;dpkg 配置&#x27;to correct the problem. - 码上快乐</a></li></ul><p>This discussion seems wonderful but didn&#x27;t get my problem solved.</p><ul><li><a href="https://askubuntu.com/questions/410045/the-package-lists-or-status-file-could-not-be-parsed-or-opened" target="_blank" rel="noopener noreferrer">apt - &quot;The package lists or status file could not be parsed or opened&quot; - Ask Ubuntu</a></li></ul><h2 class="anchor anchorWithStickyNavbar_rB0w" id="best-practice-linux-file-system-management">BEST-PRACTICE: linux file system management<a class="hash-link" href="#best-practice-linux-file-system-management" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_rB0w" id="mkdir-if-not-exist">mkdir if not exist<a class="hash-link" href="#mkdir-if-not-exist" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p DIR</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://pubs.opengroup.org/onlinepubs/009695399/utilities/mkdir.html" target="_blank" rel="noopener noreferrer">mkdir</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="ls-and-delete-files">ls and delete files<a class="hash-link" href="#ls-and-delete-files" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">ls | grep STR | xargs rm -f</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>WARNING! Since the operation pipeline is silent, <a href="https://stackoverflow.com/questions/20858524/delete-a-list-of-files-with-find-and-grep#:~:text=you%20are%20likely%20to%20remove%20files%20that%20you%20did%20not%20intend%20to%20remove" target="_blank" rel="noopener noreferrer">you are likely to remove files that you did not intend to remove</a>.</p><p>Hence, you&#x27;d better use <code>ls | grep STR</code> first to check whether all the files to remove meet your expectation.</p><h3 class="anchor anchorWithStickyNavbar_rB0w" id="fastest-delete-file">fastest delete file<a class="hash-link" href="#fastest-delete-file" title="标题的直接链接">​</a></h3><p>Don&#x27;t bother checking if the file exists, just try to remove it.</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">rm -f PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew install dialog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm PATH 2&gt; /dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">find . -name &#x27;test&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ &quot;$BLEG&quot; != xxx ]; then command; fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-py codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-py codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hello&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-ts codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-ts codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">Test</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://stackoverflow.com/questions/31318068/shell-script-to-remove-a-file-if-it-already-exist/31318262" target="_blank" rel="noopener noreferrer">shell script to remove a file if it already exist - Stack Overflow</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-show-absolute-path-of-file-from-relative">how to show absolute path of file from relative<a class="hash-link" href="#how-to-show-absolute-path-of-file-from-relative" title="标题的直接链接">​</a></h3><p>I cannot use <code>brew install realpath</code> like their <code>apt install realpath</code>, but I can use <code>realpath</code>, which may be pre-built-in.</p><p>Plus, later I saw that maybe realpath is a submodule of mac package, which is named as <code>findutils</code>.</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">realpath FILE</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://stackoverflow.com/questions/4175264/how-to-retrieve-absolute-path-given-relative" target="_blank" rel="noopener noreferrer">bash - How to retrieve absolute path given relative - Stack Overflow</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-copy-file-into-clipboard">how to copy file into clipboard<a class="hash-link" href="#how-to-copy-file-into-clipboard" title="标题的直接链接">​</a></h3><p>core ref: <a href="https://apple.stackexchange.com/a/15327" target="_blank" rel="noopener noreferrer">https://apple.stackexchange.com/a/15327</a></p><h4 class="anchor anchorWithStickyNavbar_rB0w" id="its-easy-to-copy-a-text-file">it&#x27;s easy to copy a text file<a class="hash-link" href="#its-easy-to-copy-a-text-file" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># copy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pbcopy &lt; FILE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># paste to command line</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pbpaste</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># paste to a new file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pbpaste &gt; FILE2</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>But attention, the <code>pbpaste</code> would cause corruption when deals with binary file.</p><h4 class="anchor anchorWithStickyNavbar_rB0w" id="but-it-cannot-be-done-for-a-binary-file">but it cannot be done for a binary file<a class="hash-link" href="#but-it-cannot-be-done-for-a-binary-file" title="标题的直接链接">​</a></h4><p>Since the traditional <code>command + c | command + v</code> is just copy the reference of file into clipboard, instead of the content itself, we had no way to use <code>pbcopy</code> to copy a file, and then use <code>command + v</code> to paste at another place.</p><p>A solution is to use osascript.</p><div class="language-osascript codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-osascript codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">#!/usr/bin/osascript</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">on run args</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  set abs_path to do shell script &quot;/usr/local/bin/greadlink -f -- &quot; &amp; (first item of args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  set the clipboard to POSIX file abs_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://apple.stackexchange.com/questions/15318/how-to-use-terminal-to-copy-a-file-to-the-clipboard" target="_blank" rel="noopener noreferrer">mac - How to use terminal to copy a file to the clipboard? - Ask Different</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-show-file-size">how to show file size<a class="hash-link" href="#how-to-show-file-size" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># -l show detail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># -h show &#x27;human readable size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ls -lh FILE/DIR</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://www.tutorialrepublic.com/faq/how-to-make-ls-command-to-show-file-sizes-in-megabytes-in-ubuntu.php" target="_blank" rel="noopener noreferrer">How to Make ls Command to Show File Sizes in Megabytes in Ubuntu</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-compare-between-files-diff--vimdiff">how to compare between files (<code>diff</code> &amp; <code>vimdiff</code>)<a class="hash-link" href="#how-to-compare-between-files-diff--vimdiff" title="标题的直接链接">​</a></h3><ul><li>see: <a href="https://stackoverflow.com/questions/17195308/unix-diff-side-to-side-results" target="_blank" rel="noopener noreferrer">bash - unix diff side-to-side results? - Stack Overflow</a></li></ul><p>There is a few of <code>diff</code> commands for us to choose.</p><h4 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-1-diff-f1-f2">resolution 1: <code>diff F1 F2</code><a class="hash-link" href="#resolution-1-diff-f1-f2" title="标题的直接链接">​</a></h4><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-hwoto-1642517649112-cb2bf00d7a0d7d954fdc039c3862869a96a67c75fc4190101616cd5b3ad0495a.png" alt="picture 9" class="img_vXGZ"></p><h4 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-2-diff--y-f1-f2-or-sdiff-f1-f2">resolution 2: <code>diff -y F1 F2</code> or <code>sdiff F1 F2</code><a class="hash-link" href="#resolution-2-diff--y-f1-f2-or-sdiff-f1-f2" title="标题的直接链接">​</a></h4><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-hwoto-1642517708938-fd8d1056dcc311fca0ff60316445a2fea77f670b4d7353cea9d6034775beb75a.png" alt="picture 10" class="img_vXGZ"></p><h4 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-3-vimdiff-f1-f2">resolution 3: <code>vimdiff F1 F2</code><a class="hash-link" href="#resolution-3-vimdiff-f1-f2" title="标题的直接链接">​</a></h4><p>It&#x27;s awesome! Isn&#x27;t it?</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-hwoto-1642517738027-4beec462aa9bda3ff2127c563de64a20d8703edc7774603372fce03807992a96.png" alt="picture 12" class="img_vXGZ"></p><h4 class="anchor anchorWithStickyNavbar_rB0w" id="todo-resolution-4-git-diff">TODO: resolution 4: git diff<a class="hash-link" href="#todo-resolution-4-git-diff" title="标题的直接链接">​</a></h4><h3 class="anchor anchorWithStickyNavbar_rB0w" id="fixme-how-to-copymove-directory-files-correctly-to-soft-links-under-target-directory-without-affecting-git">FIXME: how to copy/move directory files correctly to soft links under target directory without affecting git?<a class="hash-link" href="#fixme-how-to-copymove-directory-files-correctly-to-soft-links-under-target-directory-without-affecting-git" title="标题的直接链接">​</a></h3><p>example:</p><p>When I zipped one modified <code>frameworks/native</code> directory to be e.g. <code>RAW</code>, and then reset the <code>frameworks/native</code> to be the init.</p><p>Then I move all the files under <code>RAW</code> to <code>frameworks/native</code> with the command:</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">cp -r RAW/* TARGET/frameworks/native/</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The error arose up since there are soft links under <code>frameworks/native</code>, such as <code>libs/ui</code> which is indeed <code>libs/ui -&gt; XXX/ui</code>.</p><p>However, in my zipped file of <code>RAW</code>, the links seemingly have turned to be the real files/dirs, which introduced the problem <code>directory --&gt; non-directory</code>.</p><p>The wanted effect is copying/moving all the files under conflicted directory to where they should be.</p><p>However, the git marked those files as <code>TypeChange</code>...</p><p>ref:</p><ul><li><p><a href="https://superuser.com/questions/1395407/cp-cannot-overwrite-directory-with-non-directory/1395410" target="_blank" rel="noopener noreferrer">linux - cp: cannot overwrite directory with non-directory - Super User</a></p></li><li><p><a href="https://unix.stackexchange.com/questions/555985/cp-recursively-into-a-directory-that-symlinks-to-dirs-of-same-name-as-in-source" target="_blank" rel="noopener noreferrer">cp recursively into a directory that symlinks to dirs of same name as in source - Unix &amp; Linux Stack Exchange</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_rB0w" id="best-practice-linux-disk-management">BEST-PRACTICE: linux disk management<a class="hash-link" href="#best-practice-linux-disk-management" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_rB0w" id="ncdu-disk-space-tui"><code>ncdu</code>, disk space tui<a class="hash-link" href="#ncdu-disk-space-tui" title="标题的直接链接">​</a></h3><h3 class="anchor anchorWithStickyNavbar_rB0w" id="baobab-disk-space-gui"><code>baobab</code>, disk space gui<a class="hash-link" href="#baobab-disk-space-gui" title="标题的直接链接">​</a></h3><p>ref:</p><ul><li><p><a href="https://askubuntu.com/questions/73160/how-do-i-find-the-amount-of-free-space-on-my-hard-drive" target="_blank" rel="noopener noreferrer">disk usage - How do I find the amount of free space on my hard drive? - Ask Ubuntu</a></p></li><li><p><a href="https://formulae.brew.sh/formula/baobab" target="_blank" rel="noopener noreferrer">baobab — Homebrew Formulae</a></p></li></ul><h4 class="anchor anchorWithStickyNavbar_rB0w" id="install-problem">install problem<a class="hash-link" href="#install-problem" title="标题的直接链接">​</a></h4><p>When installing <code>ncdu</code>, error ocurred: <a href="https://stackoverflow.com/questions/44678437/no-such-file-or-directory-rb-sysopen-ruby" target="_blank" rel="noopener noreferrer">No such file or directory @ rb_sysopen ruby - Stack Overflow</a></p><p>The reason is that some dependency is missing, we can first install it and then install the target.</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">brew install librsvg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew install baobab</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_rB0w" id="effects">effects<a class="hash-link" href="#effects" title="标题的直接链接">​</a></h4><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-hwoto-1642600987157-8df330aac5a1fedd7d6c5f6d46f98256fedfcfa18b3f4f3ba05914fc06e19ac4.png" alt="picture 7" class="img_vXGZ"></p><h2 class="anchor anchorWithStickyNavbar_rB0w" id="best-practice-linux-shells-management">BEST-PRACTICE: linux shells management<a class="hash-link" href="#best-practice-linux-shells-management" title="标题的直接链接">​</a></h2><p>ref:</p><p>this article is enough and recommended:</p><ul><li><p><a href="https://www.cyberciti.biz/faq/how-to-change-shell-to-bash/" target="_blank" rel="noopener noreferrer">How To Change Shell To Bash in Linux / Unix - nixCraft</a></p></li><li><p><a href="https://unix.stackexchange.com/questions/140286/how-to-find-list-of-available-shells-by-command-line" target="_blank" rel="noopener noreferrer">How to find list of available shells by command-line? - Unix &amp; Linux Stack Exchange</a></p></li><li><p><a href="https://www.cyberciti.biz/tips/how-do-i-find-out-what-shell-im-using.html" target="_blank" rel="noopener noreferrer">How do I find out what shell I am using on Linux/Unix? - nixCraft</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="list-all-the-shells">list all the shells<a class="hash-link" href="#list-all-the-shells" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">$ cat /etc/shells # list valid login shells</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/bin/rbash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/bin/dash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/bin/zsh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/zsh</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_rB0w" id="background-sh-is-different-with-bash">background: <code>sh</code> is different with <code>bash</code><a class="hash-link" href="#background-sh-is-different-with-bash" title="标题的直接链接">​</a></h3><p>When I write <code>source</code> in shell script, and run by <code>sh xx.sh</code>, then it failed with <code>no permission</code>.</p><p>However, when I use <code>bash xx.sh</code>, then everything runs well.</p><p>Thus, the <code>sh</code> definitely doesn&#x27;t equal as <code>bash</code>, and it seems that function of <code>sh</code> is the subset of <code>bash</code>.</p><p>If so, why I still need to use <code>sh</code>? Just for short?</p><img loading="lazy" alt="picture 8" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/1640152196813-linux-howto-84174e9e7dbb6fcc489b015f68e1c88b23fc19874bfcba40c3171f17cc8051a1.png" width="480" class="img_vXGZ"><p>ref: <a href="https://stackoverflow.com/a/48785960/9422455" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/a/48785960/9422455</a></p><h3 class="anchor anchorWithStickyNavbar_rB0w" id="see-whats-the-current-shell">see what&#x27;s the current Shell<a class="hash-link" href="#see-whats-the-current-shell" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">[1:42:41]:~$ echo $SHELL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/zsh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[1:43:25]:~$ echo $0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/zsh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[1:43:29]:~$ ps -p $$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   PID TTY          TIME CMD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 29657 pts/2    00:00:00 zsh</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_rB0w" id="switch-shell">switch shell<a class="hash-link" href="#switch-shell" title="标题的直接链接">​</a></h3><p>You can change your default shell using the chsh (“change shell” ) command as follows.</p><p>The syntax is:</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chsh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chsh -s {shell-name-here}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chsh -s {shell-name-here} {user-name-here}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># samples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chsh -s /bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chsh -s /bin/bash $USER</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_rB0w" id="set-zsh-as-the-default-terminal-need-re-login">set zsh as the default terminal (need re-login)<a class="hash-link" href="#set-zsh-as-the-default-terminal-need-re-login" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">chsh -s $(which zsh)</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://askubuntu.com/questions/131823/how-to-make-zsh-the-default-shell" target="_blank" rel="noopener noreferrer">https://askubuntu.com/questions/131823/how-to-make-zsh-the-default-shell</a></p><h2 class="anchor anchorWithStickyNavbar_rB0w" id="best-practice-linux-terminal-management">BEST-PRACTICE: linux terminal management<a class="hash-link" href="#best-practice-linux-terminal-management" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_rB0w" id="-the-terminal-cannot-up-down-after-editing">✅ the terminal cannot up down after editing<a class="hash-link" href="#-the-terminal-cannot-up-down-after-editing" title="标题的直接链接">​</a></h3><p>This is a problem confused me for a long time.</p><p>Today, I finally knows what&#x27;s the hell at: <a href="https://stackoverflow.com/questions/18489216/how-to-scroll-up-and-down-in-sliced-screen-terminal" target="_blank" rel="noopener noreferrer">linux - How to scroll up and down in sliced &quot;screen&quot; terminal - Stack Overflow</a></p><p>Anyway, terminal is hard to learn, I just know <code>control + a</code> can help me exit the so-called copy mode.</p><h3 class="anchor anchorWithStickyNavbar_rB0w" id="todo-bind-option--arrow-to-jump-word-in-zsh-on-ubuntu-vmware-on-macos">TODO: bind <code>option + arrow</code> to jump word in zsh on ubuntu vmware on MacOS<a class="hash-link" href="#todo-bind-option--arrow-to-jump-word-in-zsh-on-ubuntu-vmware-on-macos" title="标题的直接链接">​</a></h3><blockquote><p>ref</p></blockquote><ul><li>✨ <a href="https://help.ubuntu.com/stable/ubuntu-help/shell-keyboard-shortcuts.html.en" target="_blank" rel="noopener noreferrer">Useful keyboard shortcuts</a></li><li><a href="https://www.google.com/search?newwindow=1&amp;sxsrf=AOaemvJocqqP64PM0tOaO5QuVGhGgwR1kw%3A1643272448532&amp;lei=AFnyYY_8H8G4mAWLj7C4Cg&amp;q=zsh%20jump%20word&amp;ved=2ahUKEwiP_MD0wtH1AhVBHKYKHYsHDKcQsKwBKAN6BAg-EAQ&amp;biw=1629&amp;bih=945&amp;dpr=2.2" target="_blank" rel="noopener noreferrer">zsh jump word - Google Search</a></li><li><a href="https://superuser.com/questions/427163/altarrow-moving-between-words-in-zsh-and-iterm2" target="_blank" rel="noopener noreferrer">keyboard shortcuts - ALT+arrow moving between words in zsh and iTerm2 - Super User</a></li><li><a href="https://support.apple.com/en-hk/guide/terminal/trmlshtcts/mac" target="_blank" rel="noopener noreferrer">Keyboard shortcuts in Terminal on Mac - Apple Support (HK)</a></li><li><a href="https://superuser.com/questions/349439/how-to-bind-command-key-in-zsh" target="_blank" rel="noopener noreferrer">key binding - How to bind command key in zsh? - Super User</a></li><li><a href="https://gist.github.com/YumaInaura/27bb1f79881a63bed2fb9635cbaed73b" target="_blank" rel="noopener noreferrer">Zsh — Mac OS option key for bindkey</a></li><li><a href="https://www.google.com/search?q=what+key+i%27m+pressing&amp;oq=what+key+i+am&amp;aqs=chrome.1.69i57j0i10j0i22i30l8.6503j0j4&amp;sourceid=chrome&amp;ie=UTF-8" target="_blank" rel="noopener noreferrer">what key i&#x27;m pressing - Google Search</a></li><li><a href="https://en.key-test.ru/" target="_blank" rel="noopener noreferrer">&quot;Key-Test&quot; - keyboard test online</a></li><li><a href="https://unix.stackexchange.com/questions/58870/ctrl-left-right-arrow-keys-issue" target="_blank" rel="noopener noreferrer">zsh - Ctrl + left/right arrow keys issue - Unix &amp; Linux Stack Exchange</a></li><li><a href="https://stackoverflow.com/questions/12382499/looking-for-altleftarrowkey-solution-in-zsh" target="_blank" rel="noopener noreferrer">shell - Looking for ALT+LeftArrowKey solution in zsh - Stack Overflow</a></li><li><a href="https://unix.stackexchange.com/questions/94331/how-can-i-delete-a-word-backward-at-the-command-line-bash-and-zsh" target="_blank" rel="noopener noreferrer">keyboard shortcuts - How can I delete a word backward at the command line (bash and zsh)? - Unix &amp; Linux Stack Exchange</a></li><li><a href="https://askubuntu.com/questions/1017287/how-to-delete-words-in-the-terminal-with-ctrl-backspace-like-in-the-rest-of-ubun" target="_blank" rel="noopener noreferrer">command line - How to delete words in the terminal with Ctrl-Backspace like in the rest of Ubuntu? - Ask Ubuntu</a></li><li><a href="https://askubuntu.com/questions/162247/why-does-ctrl-left-arrow-not-skip-words" target="_blank" rel="noopener noreferrer">12.04 - Why does ctrl + left arrow not skip words? - Ask Ubuntu</a></li></ul><h2 class="anchor anchorWithStickyNavbar_rB0w" id="best-practice-linux-commands-management">BEST-PRACTICE: linux commands management<a class="hash-link" href="#best-practice-linux-commands-management" title="标题的直接链接">​</a></h2><blockquote><p>⚠️</p><ol><li>be careful to use `<!-- -->`<!-- -->` in terminal / shell since it&#x27;s would be treated as executable commands: <img loading="lazy" alt="picture 9" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-hwoto-1641501462043-6790c46051fa5db1246b560e795c5b1737d5e508faf7a9247b1c52e1ce4abdbc.png" class="img_vXGZ"><br>see: <a href="https://blog.csdn.net/Luckiers/article/details/103501168" target="_blank" rel="noopener noreferrer">(20 条消息) shell 基础知识-echo 及单引号、反引号和双引号详解<!-- -->_<!-- -->Luckiers 的博客-CSDN 博客<!-- -->_<!-- -->echo 单引号和双引号</a></li></ol></blockquote><h3 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-auto-input-in-command">how to auto input in command<a class="hash-link" href="#how-to-auto-input-in-command" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_rB0w" id="auto-input-password-for-sudo-commands">auto input password for sudo commands<a class="hash-link" href="#auto-input-password-for-sudo-commands" title="标题的直接链接">​</a></h4><blockquote><p>sparkles: Use <code>sudo -S</code> to read input from stdin.</p></blockquote><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># sample</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;$USER ALL=(ALL:ALL) NOPASSWD: ALL&quot; | sudo tee -a /etc/sudoers.d/$USER</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://superuser.com/questions/67765/sudo-with-password-in-one-command-line" target="_blank" rel="noopener noreferrer">shell - sudo with password in one command line? - Super User</a></li></ul><h4 class="anchor anchorWithStickyNavbar_rB0w" id="auto-yes-for-some-command-yes--">auto yes for some command (<code>yes | </code>)<a class="hash-link" href="#auto-yes-for-some-command-yes--" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yes | COMMAND</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yes | sh ./install.sh # install oh-my-zsh</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://stackoverflow.com/questions/7642674/how-do-i-script-a-yes-response-for-installing-programs/34176780" target="_blank" rel="noopener noreferrer">linux - How do I script a &quot;yes&quot; response for installing programs? - Stack Overflow</a></li></ul><h4 class="anchor anchorWithStickyNavbar_rB0w" id="auto-yes-for-apt-installing-packages--y">auto yes for <code>apt</code> installing packages (<code>-y</code>)<a class="hash-link" href="#auto-yes-for-apt-installing-packages--y" title="标题的直接链接">​</a></h4><p>Just add a <code>-y</code> in the command.</p><p>Example:</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install -y htop</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://askubuntu.com/questions/448358/apt-get-install-with-assume-yes-is-still-prompting-me-to-install-dependencies" target="_blank" rel="noopener noreferrer">apt-get install with --assume-yes is still prompting me to install dependencies - Ask Ubuntu</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-search-commands-by-prefix-history-search-backwardforward">how to search commands by prefix (<code>history-search-backward/forward</code>)<a class="hash-link" href="#how-to-search-commands-by-prefix-history-search-backwardforward" title="标题的直接链接">​</a></h3><div class="language-yaml codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-yaml codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># ~/.inputrc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Respect default shortcuts.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$include /etc/inputrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># choice 1: recommended</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">&quot;\e[A&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> history</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">search</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">backward     </span><span class="token comment" style="color:#999988;font-style:italic"># arrow up      --&gt; backward</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">&quot;\e[B&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> history</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">search</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">forward      </span><span class="token comment" style="color:#999988;font-style:italic"># arrow down    --&gt; forward</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># choice 2: if prefer to the page up/down</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">&quot;\e[5~&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> history</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">search</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">backward    </span><span class="token comment" style="color:#999988;font-style:italic"># page up       --&gt; backward</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">&quot;\e[6~&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> history</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">search</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">forward     </span><span class="token comment" style="color:#999988;font-style:italic"># page down     --&gt; forward</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>;warning: you should <strong>Close and re-open all terminals for the new behavior to become effective.</strong></p></blockquote><p>ref:</p><ul><li><p><a href="https://askubuntu.com/a/59855" target="_blank" rel="noopener noreferrer">https://askubuntu.com/a/59855</a></p></li><li><p><a href="https://unix.stackexchange.com/questions/231605/search-for-a-previous-command-with-the-prefix-i-just-typed" target="_blank" rel="noopener noreferrer">bash - Search for a previous command with the prefix I just typed - Unix &amp; Linux Stack Exchange</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-repeat-command">how to repeat command<a class="hash-link" href="#how-to-repeat-command" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">#  only show the last result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">watch -n X command # X: X seconds; command may need quotes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># show all the result history</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while true; do command; sleep X; done; # command may need quotes</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://askubuntu.com/questions/430382/repeat-a-command-every-x-interval-of-time-in-terminal" target="_blank" rel="noopener noreferrer">bash - Repeat a command every x interval of time in terminal? - Ask Ubuntu</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-use-variable-as-multi-args">how to use variable as multi args<a class="hash-link" href="#how-to-use-variable-as-multi-args" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># when there&#x27;s only one arg as a variable, it&#x27;s ok to directly use it, and the following two methods are equal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PACKAGE_TO_INSTALL=&quot;vim&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PACKAGE_TO_INSTALL=vim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install -y $PACKAGE_TO_INSTALL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># However, if there are multi args as a variable, we need to use [`echo`](https://stackoverflow.com/a/30061925/9422455) to escape the &#x27;hidden quotes&#x27; if I didn&#x27;t understand wrongly. And also, the quotes can&#x27;t be omitted, or use slashes.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PACKAGES_TO_INSTALL=&quot;vim git htop zsh terminator&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PACKAGES_TO_INSTALL=vim\ git\ htop\ zsh\ terminator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install -y $(echo $INSTALLED_PACKAGES)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Since the `echo` is not safe, another way is to use [`xargs`](https://stackoverflow.com/a/51242645/9422455), which seems more professional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PACKAGES_TO_INSTALL=&quot;vim git htop zsh terminator&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $PACKAGE_TO_INSTALL | xargs sudo apt install -y</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><p><a href="https://stackoverflow.com/questions/9733338/shell-script-remove-first-and-last-quote-from-a-variable" target="_blank" rel="noopener noreferrer">string - Shell script - remove first and last quote (&quot;) from a variable - Stack Overflow</a></p></li><li><p><a href="https://stackoverflow.com/questions/30061682/bash-send-string-argument-as-multiple-arguments" target="_blank" rel="noopener noreferrer">bash send string argument as multiple arguments - Stack Overflow</a></p></li><li><p><a href="https://unix.stackexchange.com/questions/637496/escaping-quotes-inside-a-quoted-string" target="_blank" rel="noopener noreferrer">shell - Escaping quotes inside a quoted string - Unix &amp; Linux Stack Exchange</a></p></li><li><p><a href="http://mywiki.wooledge.org/BashFAQ/050" target="_blank" rel="noopener noreferrer">BashFAQ/050 - Greg&#x27;s Wiki</a></p></li><li><p><a href="https://stackoverflow.com/questions/5819423/bash-variables-with-spaces" target="_blank" rel="noopener noreferrer">Bash variables with spaces - Stack Overflow</a></p></li><li><p><a href="https://unix.stackexchange.com/questions/327784/how-to-assign-a-string-with-multiple-spaces-to-a-variable-in-bash" target="_blank" rel="noopener noreferrer">shell script - How to assign a string with multiple spaces to a variable in bash? - Unix &amp; Linux Stack Exchange</a></p></li><li><p><a href="https://stackoverflow.com/questions/7454526/variable-containing-multiple-args-with-quotes-in-bash" target="_blank" rel="noopener noreferrer">Variable containing multiple args with quotes in Bash - Stack Overflow</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-set-an-alias">how to set an alias<a class="hash-link" href="#how-to-set-an-alias" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-1-in-terminal">resolution 1: in terminal<a class="hash-link" href="#resolution-1-in-terminal" title="标题的直接链接">​</a></h4><blockquote><p>⚠️ this solution only works upon the next command, which can work immediately when executed in shell script file</p></blockquote><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># don&#x27;t add any other characters after alias in order to catch bug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alias sed=gsed</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-2-write-into-bash_aliases">resolution 2: write into <code>~/.bash_aliases</code><a class="hash-link" href="#resolution-2-write-into-bash_aliases" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># ~/.bash_aliases</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alias update=&#x27;sudo yum update&#x27;</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>⚠️ this solution needs to ensure the <code>.bash_aliases</code> enabled in <code>.bashrc</code></p></blockquote><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-howto-1643117544205-afe713493b26becfe498fda953bdc5c1d098accaf07b4e4b6b5e117b4d3671a1.png" alt="picture 47" class="img_vXGZ"></p><h4 class="anchor anchorWithStickyNavbar_rB0w" id="-resolution-3-use-bash_aliases-with-zsh">✨ resolution 3: use <code>.bash_aliases</code> with <code>zsh</code><a class="hash-link" href="#-resolution-3-use-bash_aliases-with-zsh" title="标题的直接链接">​</a></h4><p>Just add one line in <code>~/.zshrc</code>:</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># ~/.zshrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source ~/.bash_aliases</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://www.cyberciti.biz/faq/create-permanent-bash-alias-linux-unix/" target="_blank" rel="noopener noreferrer">How to create a permanent Bash alias on Linux/Unix - nixCraft</a></li></ul><h4 class="anchor anchorWithStickyNavbar_rB0w" id="unalias">unalias<a class="hash-link" href="#unalias" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># sample</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unalias logout</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://www.tecmint.com/create-alias-in-linux/" target="_blank" rel="noopener noreferrer">How to Create and Use Alias Command in Linux</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-compare-between-outputs-from-two-commands">how to compare between outputs from two commands<a class="hash-link" href="#how-to-compare-between-outputs-from-two-commands" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">diff &lt;(ls old) &lt;(ls new)</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://askubuntu.com/questions/229447/how-do-i-diff-the-output-of-two-commands" target="_blank" rel="noopener noreferrer">How do I diff the output of two commands? - Ask Ubuntu</a></li></ul><h2 class="anchor anchorWithStickyNavbar_rB0w" id="best-practice-linux-accounts-management">BEST-PRACTICE: linux accounts management<a class="hash-link" href="#best-practice-linux-accounts-management" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_rB0w" id="init-user-with-root-config">init user with root config<a class="hash-link" href="#init-user-with-root-config" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">脚本：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">USER_=chuanmx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HOME_=/home/$USER_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># add user with password and home directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo useradd -m $USER_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;$USER_\n$USER_&quot; | sudo -S -k passwd $USER_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo usermod -a -G dev $USER_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># enable ssh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo mkdir $HOME_/.ssh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># enable zsh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp -rf ~/.oh-my-zsh $HOME_/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp  ~/.zshrc $HOME_/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chsh --shell /bin/zsh $USER_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># enable user grant</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown -R $USER_:$USER_ $HOME_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># avoid typing password when using sudo command</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;$USER_  ALL=(ALL) NOPASSWD:ALL&quot; | sudo tee /etc/sudoers.d/$USER_</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-create-user">how to create user<a class="hash-link" href="#how-to-create-user" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># create user with a home directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo useradd -m $USER_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ls -la /home/$USER_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># create user [under root]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo useradd $USER_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># create passwd [under root]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo passwd $USER_</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-log-out">how to log out<a class="hash-link" href="#how-to-log-out" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-1-1110-and-above">resolution 1 (11.10 and above)<a class="hash-link" href="#resolution-1-1110-and-above" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">gnome-session-quit</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-2">resolution 2<a class="hash-link" href="#resolution-2" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">sudo pkill -u $USER</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://askubuntu.com/questions/15795/how-can-you-log-out-via-the-terminal" target="_blank" rel="noopener noreferrer">command line - How can you log out via the terminal? - Ask Ubuntu</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="set-a-shorter-password-for-ubuntu">set a shorter password for ubuntu<a class="hash-link" href="#set-a-shorter-password-for-ubuntu" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">sudo passwd &lt;USER&gt;</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-hwoto-1642479990429-35424184b62d147dc0744f2bcb9bca97f27b9efc9df47373a458c76442b30003.png" alt="picture 7" class="img_vXGZ"></p><ul><li><p>ref:</p><ul><li><a href="https://askubuntu.com/questions/180402/how-to-set-a-short-password-on-ubuntu" target="_blank" rel="noopener noreferrer">https://askubuntu.com/questions/180402/how-to-set-a-short-password-on-ubuntu</a></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_rB0w" id="best-practice-linux-net-management">BEST-PRACTICE: linux net management<a class="hash-link" href="#best-practice-linux-net-management" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-know-my-public-ip-address">how to know my public ip address<a class="hash-link" href="#how-to-know-my-public-ip-address" title="标题的直接链接">​</a></h3><ul><li>resolution 1:</li></ul><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># https://apple.stackexchange.com/questions/20547/how-do-i-find-my-ip-address-from-the-command-line</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl ifconfig.me</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>resolution 2:</li></ul><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># https://www.digitalocean.com/community/tutorials/how-to-configure-remote-access-for-mongodb-on-ubuntu-20-04#:~:text=curl%20%2D4%20icanhazip.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -4 icanhazip.com</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-monitor-network-traffic">how to monitor network traffic<a class="hash-link" href="#how-to-monitor-network-traffic" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install nethogs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo nethogs</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://stackoverflow.com/questions/368002/network-usage-top-htop-on-linux" target="_blank" rel="noopener noreferrer">networking - Network usage top/htop on Linux - Stack Overflow</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="fixme-check-proxy">FIXME: check proxy<a class="hash-link" href="#fixme-check-proxy" title="标题的直接链接">​</a></h3><p>In <a href="https://releases.ubuntu.com/18.04/" target="_blank" rel="noopener noreferrer">Ubuntu 18.04.6 LTS (Bionic Beaver)</a>, it introduced two methods to see what/which proxies are we using:</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">## approach 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $http_proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## approach 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">env | grep -i proxy</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>However, when I configured the proxies in <code>Manual Proxy</code>, I am surprised to find nothing using either commands in the above, while the ping to <code>google.com</code> does work so that I use it as the measure then.</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">ping google.com</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And another wield thing is before the system was restarted, the <code>env | grep -i proxy</code> even shows duplicated results and the change in <code>Manual Proxy</code> doesn&#x27;t work, which is quite confusing.</p><p>Maybe we can do more tests later.</p><h2 class="anchor anchorWithStickyNavbar_rB0w" id="best-practice-linux-datetime-management">BEST-PRACTICE: linux date/time management<a class="hash-link" href="#best-practice-linux-datetime-management" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-format-date-in-terminal">how to format date in terminal<a class="hash-link" href="#how-to-format-date-in-terminal" title="标题的直接链接">​</a></h3><blockquote><p>⚠️</p><ol><li>the space in formatter should be using <code>\ </code> or anything other ways</li><li><code>date</code>是一个函数，不是变量，变量采用<code>$XX</code>或者<code>${XX}</code>的形式，但是函数要用<code>$(XX)</code>，并且不能在字符串中</li></ol></blockquote><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># directly output date</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">date +%Y-%m-%d\ %H:%M:%S</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># output date into variable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">T=&#x27;the date is &#x27;$(date +%Y-%m-%d\ %H:%M:%S)</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://unix.stackexchange.com/questions/549415/how-to-concatenate-a-date-variable-and-string-variable-in-unix" target="_blank" rel="noopener noreferrer">shell script - How to concatenate a date variable and string variable in unix? - Unix &amp; Linux Stack Exchange</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-change-timezone-and-time">how to change timezone (and time)<a class="hash-link" href="#how-to-change-timezone-and-time" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-1-conclusion-directly-export">resolution 1 (conclusion): directly export<a class="hash-link" href="#resolution-1-conclusion-directly-export" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;export TZ=&#x27;Asia/Shanghai&#x27;\n&quot; &gt;&gt; ~/.profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo pkill -u $USER --force</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-2-detail-choose-following-directions">resolution 2 (detail): choose following directions<a class="hash-link" href="#resolution-2-detail-choose-following-directions" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># check current time, as well as timezone</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">date -R</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># if the ending is `+0800`, then it&#x27;s ok, otherwise you need to change (e.g. `-0800`)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># change timezone (just choose as directed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tzselect</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And finally you will get a command suggestion to write into profile file, that is <a href="#solution-1-directly-export">#solution-1-directly-export</a></p><h2 class="anchor anchorWithStickyNavbar_rB0w" id="best-practice-linux-system-management">BEST-PRACTICE: linux system management<a class="hash-link" href="#best-practice-linux-system-management" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_rB0w" id="-a-stop-job-is-running-for-session-c2-of-user--1min-30s">✅ <code>A stop job is running for Session c2 of user ... (1min 30s)</code><a class="hash-link" href="#-a-stop-job-is-running-for-session-c2-of-user--1min-30s" title="标题的直接链接">​</a></h3><blockquote><p>resolution</p></blockquote><ol><li>restart system</li><li><code>journalctl -p5</code></li><li>search <code>timed out. Killing</code></li><li>analyze the target process of <code>Killing process 1234 (jack_thru) with signal SIGKILL.</code></li></ol><blockquote><p>⚠️ 注意，也有其他几种解决方案，比如装<code>watchdog</code>和缩短<code>timeout</code>时间的，这些都侵入性太高了，并且不是治本之策，所以还是得从 log 来分析原因找对应政策。尤其是装<code>watchdog</code>的方案，我简单看了一下，大致是每分钟检查一下系统的情况，但问题是，为什么很久以前系统就没有这种问题呢？那个时候也没装 <code>watchdog</code> 啊，所以对于这个问题，我们不能偷懒!</p></blockquote><p>.</p><blockquote><p>result</p></blockquote><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-bugfix-1643550947015-7ed703f287400ec8593914f35740044149d43c47e7b97df89135a6ffff3681a5.png" alt="picture 9" class="img_vXGZ"></p><p>It tells me the last one is because of <code>adb</code>, since I do open the <code>adb</code> and not responding then.</p><p>And I also checked the last few times when <code>timed out</code>, but to find they are different.</p><p>So I confirmed the timeout error is temporary, since now I am not going to run any <code>adb</code>.</p><p>I tried to restart again, and the system does well which identified what I think.</p><blockquote><p>ref</p></blockquote><ul><li><p><a href="https://unix.stackexchange.com/questions/273876/a-stop-job-is-running-for-session-c2-of-user/297318" target="_blank" rel="noopener noreferrer">systemd - A stop job is running for Session c2 of user - Unix &amp; Linux Stack Exchange</a></p></li><li><p><a href="https://qastack.cn/unix/273876/a-stop-job-is-running-for-session-c2-of-user" target="_blank" rel="noopener noreferrer">用户的会话 c2 正在运行停止作业</a></p></li><li><p><a href="https://bbs.archlinux.org/viewtopic.php?id=264233" target="_blank" rel="noopener noreferrer">systemd stop job for Session 2 on shutdown / Newbie Corner / Arch Linux Forums</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_rB0w" id="-----------------------------------">-----------------------------------<a class="hash-link" href="#-----------------------------------" title="标题的直接链接">​</a></h2><h2 class="anchor anchorWithStickyNavbar_rB0w" id="best-practice-linux-common-commands">BEST-PRACTICE: linux common commands<a class="hash-link" href="#best-practice-linux-common-commands" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_rB0w" id="commandtar">command:tar<a class="hash-link" href="#commandtar" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># x: extract, f: file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar -xf FILE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># v: verbose, logging output, careful when extracting big files, e.g. AOSP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar -vxf FILE</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://linuxize.com/post/how-to-extract-unzip-tar-gz-file/" target="_blank" rel="noopener noreferrer">How to Extract (Unzip) Tar Gz File | Linuxize</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="commandperl">command:perl<a class="hash-link" href="#commandperl" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-use-perl-to-replace-multi-lines">how to use perl to replace multi-lines<a class="hash-link" href="#how-to-use-perl-to-replace-multi-lines" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">perl -0pe &#x27;s/search/replace/gms&#x27; file</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li><code>-0</code>: without the <code>-0</code> argument, Perl processes data line-by-line, which causes multiline searches to fail.</li><li><code>-p</code>: loop over all the lines of a file</li><li><code>-e</code>: execute the following arg as a perl script</li><li><code>/s</code>: changes the behavior of the dot metacharacter <code>.</code> so that it matches any character at all. Normally it matches anything except a newline &quot;\n&quot;, and so treats the string as a single line even if it contains newlines.</li><li><code>/m</code>: modifies the caret <code>^</code> and dollar <code>$</code> metacharacters so that they match at newlines within the string, treating it as a multi-line string. Normally they will match only at the beginning and end of the string.</li><li><code>/g</code>: global replace(not sure)</li></ol><p>ref:</p><ul><li><p>explaining <code>-0</code>: <a href="https://stackoverflow.com/questions/1030787/multiline-search-replace-with-perl" target="_blank" rel="noopener noreferrer">Multiline search replace with Perl - Stack Overflow</a></p></li><li><p>explaining <code>/m | /s</code>: <a href="https://stackoverflow.com/questions/22962588/understanding-perl-regular-expression-modifers-m-and-s" target="_blank" rel="noopener noreferrer">regex - Understanding Perl regular expression modifers /m and /s - Stack Overflow</a></p></li></ul><p>special thanks to: <a href="https://unix.stackexchange.com/a/378991" target="_blank" rel="noopener noreferrer">Not sure if you know, but sed has a great feature where you do not need to use a / as the separator.</a></p><ul><li><p><a href="https://www.mankier.com/1/perl#Description" target="_blank" rel="noopener noreferrer">perl man page - perl-interpreter - General Commands</a></p></li><li><p><a href="https://unix.stackexchange.com/questions/555948/replace-multi-line-string-with-multi-line-string-without-escaping-by-hand" target="_blank" rel="noopener noreferrer">perl - Replace multi line string with multi line string without escaping by hand - Unix &amp; Linux Stack Exchange</a></p></li><li><p><a href="https://www.runoob.com/perl/perl-regular-expressions.html" target="_blank" rel="noopener noreferrer">Perl 正则表达式 | 菜鸟教程</a></p></li><li><p><a href="https://unix.stackexchange.com/questions/378990/find-and-replace-with-sed-with-slash-in-find-and-replace-string" target="_blank" rel="noopener noreferrer">quoting - find and replace with sed with slash in find and replace string - Unix &amp; Linux Stack Exchange</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="commandfind">command:find<a class="hash-link" href="#commandfind" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-ignore-case">how to ignore case<a class="hash-link" href="#how-to-ignore-case" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">find -iname</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://unix.stackexchange.com/questions/32155/find-command-how-to-ignore-case" target="_blank" rel="noopener noreferrer">Find command: how to ignore case? - Unix &amp; Linux Stack Exchange</a></li></ul><h4 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-specify-search-type">how to specify search type<a class="hash-link" href="#how-to-specify-search-type" title="标题的直接链接">​</a></h4><p>Use <code>-type</code> to specify the search type (default is <code>c</code> for <code>file</code>), here I used <code>d</code> for <code>directory</code>, ref: <a href="https://man7.org/linux/man-pages/man1/find.1.html#:~:text=true%20%20Always%20true.-,%2Dtype%20c,-File%20is%20of" target="_blank" rel="noopener noreferrer">find type</a></p><p>And then, when I search directory, it would search all the sub-folders with &#x27;/&#x27; concatenated, so I need to specify <code>-d 1</code> in order to only search the top current directory.</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">➜  Application Support find . -name &#x27;*electron*&#x27; -type d -d 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./electron-react-boilerplate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./electron-react-typescript</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">➜  Application Support rm -rf electron-react-boilerplate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">➜  Application Support rm -rf electron-react-typescript</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-exclude-dir">how to exclude dir<a class="hash-link" href="#how-to-exclude-dir" title="标题的直接链接">​</a></h4><p>TODO: in fact, I really can&#x27;t catch why <code>-prune</code> is combined with <code>-o</code> (or)</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># 1. use `-not -path`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">find -name &quot;*.js` -not -path &quot;./directory/*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2. use `-path xx -prune`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">find . -path ./misc -prune -o -name &#x27;*.txt&#x27; -print</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 3. use multiple prune (need to add escaped bracket)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">find . -type d \( -path ./dir1 -o -path ./dir2 -o -path ./dir3 \) -prune -o -name &#x27;*.txt&#x27; -print</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 4. use regex prune (-name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">find . -type d -name node_modules -prune -o -name &#x27;*.json&#x27; -print</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://stackoverflow.com/questions/4210042/how-to-exclude-a-directory-in-find-command" target="_blank" rel="noopener noreferrer">linux - How to exclude a directory in find . command - Stack Overflow</a></li></ul><h4 class="anchor anchorWithStickyNavbar_rB0w" id="todo-how-to-find-file-with-time-used">TODO: how to find file with time used<a class="hash-link" href="#todo-how-to-find-file-with-time-used" title="标题的直接链接">​</a></h4><h4 class="anchor anchorWithStickyNavbar_rB0w" id="tip-find-efficiency-comparison">tip: find efficiency comparison<a class="hash-link" href="#tip-find-efficiency-comparison" title="标题的直接链接">​</a></h4><p>Use a specified directory is the best and fastest;</p><p>If not, limit the <code>maxdepth</code> to a number small enough is also ok;</p><p>And then consider the directory prune.</p><p>Finally bared run is the worst.</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">➜  hjxh_express_match git:(main) time find .imgs  -name readme-1641287704584-613d44afa250b17be45e5b366487d1dbd42939da44543700b5e7fbd7f6a8ca9e.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.imgs/readme-1641287704584-613d44afa250b17be45e5b366487d1dbd42939da44543700b5e7fbd7f6a8ca9e.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">find .imgs -name   0.00s user 0.00s system 52% cpu 0.005 total</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">➜  hjxh_express_match git:(main) time find . -maxdepth 3  -name readme-1641287704584-613d44afa250b17be45e5b366487d1dbd42939da44543700b5e7fbd7f6a8ca9e.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./.imgs/readme-1641287704584-613d44afa250b17be45e5b366487d1dbd42939da44543700b5e7fbd7f6a8ca9e.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">find . -maxdepth 3 -name   0.01s user 0.05s system 70% cpu 0.079 total</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">➜  hjxh_express_match git:(main) time find . -maxdepth 4  -name readme-1641287704584-613d44afa250b17be45e5b366487d1dbd42939da44543700b5e7fbd7f6a8ca9e.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./.imgs/readme-1641287704584-613d44afa250b17be45e5b366487d1dbd42939da44543700b5e7fbd7f6a8ca9e.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">find . -maxdepth 4 -name   0.06s user 0.69s system 87% cpu 0.854 total</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">➜  hjxh_express_match git:(main) time find . -maxdepth 5  -name readme-1641287704584-613d44afa250b17be45e5b366487d1dbd42939da44543700b5e7fbd7f6a8ca9e.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./.imgs/readme-1641287704584-613d44afa250b17be45e5b366487d1dbd42939da44543700b5e7fbd7f6a8ca9e.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">find . -maxdepth 5 -name   0.14s user 1.86s system 93% cpu 2.137 total</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">➜  hjxh_express_match git:(main) time find . -maxdepth 6  -name readme-1641287704584-613d44afa250b17be45e5b366487d1dbd42939da44543700b5e7fbd7f6a8ca9e.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./.imgs/readme-1641287704584-613d44afa250b17be45e5b366487d1dbd42939da44543700b5e7fbd7f6a8ca9e.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">find . -maxdepth 6 -name   0.26s user 3.21s system 94% cpu 3.683 total</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">➜  hjxh_express_match git:(main) time find .  -name readme-1641287704584-613d44afa250b17be45e5b366487d1dbd42939da44543700b5e7fbd7f6a8ca9e.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./.imgs/readme-1641287704584-613d44afa250b17be45e5b366487d1dbd42939da44543700b5e7fbd7f6a8ca9e.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">find . -name   0.44s user 5.85s system 51% cpu 12.172 total</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">➜  hjxh_express_match git:(main) time find . -path &#x27;./.imgs/*&#x27;  -name readme-1641287704584-613d44afa250b17be45e5b366487d1dbd42939da44543700b5e7fbd7f6a8ca9e.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./.imgs/readme-1641287704584-613d44afa250b17be45e5b366487d1dbd42939da44543700b5e7fbd7f6a8ca9e.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">find . -path &#x27;./.imgs/*&#x27; -name   0.46s user 5.93s system 51% cpu 12.299 total</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">➜  hjxh_express_match git:(main) time find . -path &#x27;./.imgs/*&#x27;  ! -path &quot;**/node_modules/*&quot;  -name readme-1641287704584-613d44afa250b17be45e5b366487d1dbd42939da44543700b5e7fbd7f6a8ca9e.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./.imgs/readme-1641287704584-613d44afa250b17be45e5b366487d1dbd42939da44543700b5e7fbd7f6a8ca9e.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">find . -path &#x27;./.imgs/*&#x27; ! -path &quot;**/node_modules/*&quot; -name   0.46s user 5.91s system 51% cpu 12.268 total</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_rB0w" id="commandgrep">command:grep<a class="hash-link" href="#commandgrep" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-exclude-dir---exclude-dirdir">how to exclude dir (<code>--exclude-dir=dir</code>)<a class="hash-link" href="#how-to-exclude-dir---exclude-dirdir" title="标题的直接链接">​</a></h4><p>Recent versions of GNU Grep (&gt;= 2.5.2) provide:</p><p><code>--exclude-dir=dir</code></p><p>which excludes directories matching the pattern dir from recursive directory searches.</p><p>So you can do:</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">grep -R --exclude-dir=node_modules &#x27;some pattern&#x27; /path/to/search</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://stackoverflow.com/questions/6565471/how-can-i-exclude-directories-from-grep-r" target="_blank" rel="noopener noreferrer">linux - How can I exclude directories from grep -R? - Stack Overflow</a></li></ul><h4 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-limit-depth--maxdepth">how to limit depth (<code>-maxdepth</code>)<a class="hash-link" href="#how-to-limit-depth--maxdepth" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"> find . -maxdepth 4 -type f -exec grep &quot;11.0.0_r1&quot; {}  \;</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://unix.stackexchange.com/questions/111722/how-to-do-max-depth-search-in-ack-and-grep" target="_blank" rel="noopener noreferrer">How to do max-depth search in ack and grep? - Unix &amp; Linux Stack Exchange</a></li></ul><h4 class="anchor anchorWithStickyNavbar_rB0w" id="tip-grep-by-lines-context-is-much-faster-than-grep-by-words-context-and-even-better-for-output">tip: grep by lines context is MUCH FASTER than grep by words context, and even better for output<a class="hash-link" href="#tip-grep-by-lines-context-is-much-faster-than-grep-by-words-context-and-even-better-for-output" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">➜  erb git:(main) ✗ time (cat release/build/mac/皇家小虎快递分析系统.app/Contents/Resources/app/dist/main/main.js | tr &quot;;&quot; &quot;\n&quot; | grep --context=3 &#x27;fake-database&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># var n=this&amp;&amp;this.__importDefault||function(e){return e&amp;&amp;e.__esModule?e:{default:e}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),t.isDbFinished=t.initDbUpdateResult=t.initDbInsertResult=t.DB_UPDATE_DECLINED=t.DB_UPDATED=t.DB_INSERT_DUPLICATED=t.DB_INSERT_SUCCESS=t.DB_UNKNOWN=t.DB_TIMEOUT=t.DB_TABLE_NOT_EXISTED=t.prisma=void 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># const i=r(72298),a=`file:${n(r(71017)).default.join(i.app.getPath(&quot;userData&quot;),&quot;express_match.sqlite.db&quot;)}?connection_limit=1`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># process.env.DATABASE_URL=a,console.log({__dirname,rawDBPath:&quot;file:dev.db?connection_limit=1&quot;,newDBPath:a}),t.prisma={erp:{create:()=&gt;{console.log(&quot;fake-database: creating one&quot;)},findMany:()=&gt;{console.log(&quot;fake-database: finding many&quot;)},upsert:()=&gt;{console.log(&quot;fake-database: upserting one&quot;)}}},t.DB_TABLE_NOT_EXISTED=&quot;DB_TABLE_NOT_EXISTED&quot;,t.DB_TIMEOUT=&quot;DB_TIMEOUT&quot;,t.DB_UNKNOWN=&quot;DB_UNKNOWN&quot;,t.DB_INSERT_SUCCESS=&quot;DB_INSERT_SUCCESS&quot;,t.DB_INSERT_DUPLICATED=&quot;DB_INSERT_DUPLICATED&quot;,t.DB_UPDATED=&quot;DB_UPDATED&quot;,t.DB_UPDATE_DECLINED=&quot;DB_UPDATE_DECLINED&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># t.initDbInsertResult=()=&gt;({nTotal:0,nInserted:0,nDuplicated:0,nTimeout:0,nUnknown:0,nTableNotExist:0})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># t.initDbUpdateResult=()=&gt;({nTotal:0,nUpdated:0,nDropped:0,nTimeout:0,nUnknown:0,nTableNotExist:0})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># t.isDbFinished=e=&gt;{let t=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">( cat  | tr &quot;;&quot; &quot;\n&quot; | grep --color=auto  --context=3 &#x27;fake-database&#x27;; )  0.20s user 0.01s system 121% cpu 0.169 total</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">➜  erb git:(main) ✗ time ( grep -iEo &#x27;.{255}fake-database.{255}&#x27; release/build/mac/皇家小虎快递分析系统.app/Contents/Resources/app/dist/main/main.js | tr &#x27;;&#x27; &#x27;\n&#x27; )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># =`file:${n(r(71017)).default.join(i.app.getPath(&quot;userData&quot;),&quot;express_match.sqlite.db&quot;)}?connection_limit=1`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># process.env.DATABASE_URL=a,console.log({__dirname,rawDBPath:&quot;file:dev.db?connection_limit=1&quot;,newDBPath:a}),t.prisma={erp:{create:()=&gt;{console.log(&quot;fake-database: creating one&quot;)},findMany:()=&gt;{console.log(&quot;fake-database: finding many&quot;)},upsert:()=&gt;{console.log(&quot;fake-database: upserting one&quot;)}}},t.DB_TABLE_NOT_EXISTED=&quot;DB_TABLE_NOT_EXISTED&quot;,t.DB_TIMEOUT=&quot;DB_TIMEOUT&quot;,t.DB_UNKNOWN=&quot;DB_UNKNOWN&quot;,t.DB_INSERT_SUCCESS=&quot;D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">( grep --color=auto --exclude-dir={.bzr,CVS,.git,.hg,.svn,.idea,.tox} -iEo  t)  3.27s user 0.01s system 99% cpu 3.279 total</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_rB0w" id="tip-grep-by-negative-captured-group-needs-to-use-ggrep">tip: grep by negative captured group needs to use <code>ggrep</code><a class="hash-link" href="#tip-grep-by-negative-captured-group-needs-to-use-ggrep" title="标题的直接链接">​</a></h4><p>Examples Given the string foobarbarfoo:</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">bar(?=bar)     # finds the 1st bar (&quot;bar&quot; which has &quot;bar&quot; after it)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bar(?!bar)     # finds the 2nd bar (&quot;bar&quot; which does not have &quot;bar&quot; after it)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(?&lt;=foo)bar    # finds the 1st bar (&quot;bar&quot; which has &quot;foo&quot; before it)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(?&lt;!foo)bar    # finds the 2nd bar (&quot;bar&quot; which does not have &quot;foo&quot; before it)</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can also combine them:</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># finds the 1st bar (&quot;bar&quot; with &quot;foo&quot; before it and &quot;bar&quot; after it)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(?&lt;=foo)bar(?=bar)</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://stackoverflow.com/questions/2973436/regex-lookahead-lookbehind-and-atomic-groups" target="_blank" rel="noopener noreferrer">lookaround - Regex lookahead, lookbehind and atomic groups - Stack Overflow</a></li></ul><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">grep -Pio &#x27;(?&lt;=heads\/)(.*?)(?=\n)&#x27; text.txt # P option instead of E</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref: <a href="https://stackoverflow.com/a/45534127/9422455" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/a/45534127/9422455</a></p><h3 class="anchor anchorWithStickyNavbar_rB0w" id="commandtree">command:tree<a class="hash-link" href="#commandtree" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-display-chinese--n">how to display chinese (<code>-N</code>)<a class="hash-link" href="#how-to-display-chinese--n" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">tree -N</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://blog.csdn.net/cxrsdn/article/details/100006348" target="_blank" rel="noopener noreferrer">(23 条消息) linux 下 tree 命令中文字符乱码解决方案<!-- -->_<!-- -->cxrsdn 的博客-CSDN 博客<!-- -->_<!-- -->linux tree 中文</a></li></ul><h4 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-exclude-dir-i">how to exclude dir(<code>-I</code>)<a class="hash-link" href="#how-to-exclude-dir-i" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># use `|` to split choices</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># exclude</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tree -I &quot;XXX|YYY&quot;   # maybe it means &#x27;ignore&#x27;</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://unix.stackexchange.com/questions/61074/tree-command-for-multiple-includes-and-excludes" target="_blank" rel="noopener noreferrer">tree command for multiple includes and excludes - Unix &amp; Linux Stack Exchange</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="commandhead">command:head<a class="hash-link" href="#commandhead" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_rB0w" id="head-basic-usage">head basic usage<a class="hash-link" href="#head-basic-usage" title="标题的直接链接">​</a></h4><p>head 这个命令行其实没有什么要讲的，用法非常简单。</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># output the first 5 lines (default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">head FILE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># output the first N lines (replace &quot;N&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">head -n &quot;N&quot; FILES</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-exclude-the-last-k-rows">how to exclude the last k rows<a class="hash-link" href="#how-to-exclude-the-last-k-rows" title="标题的直接链接">​</a></h4><p>但是今天 2022-01-26 碰到了一个问题，就是要获取前 n-1 行，然后试了 stackoverflow 上的方案好像都不对。</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">head -n -1 FILE</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>后来才知道，是因为 mac 的原因，要用<code>ghead</code>才行……</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">brew install coreutils</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghead -n -4 main.m</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>而 <code>ghead</code> 是在 <code>coreutils</code> 里面，这个名字一看我就有，所以也不用装了。</p><p>ref:</p><ul><li><a href="https://stackoverflow.com/questions/16206507/head-command-to-skip-last-few-lines-of-file-on-mac-osx" target="_blank" rel="noopener noreferrer">shell - head command to skip last few lines of file on MAC OSX - Stack Overflow</a></li></ul><h4 class="anchor anchorWithStickyNavbar_rB0w" id="discuss-use-head-or-sed">discuss: use <code>head</code> or <code>sed</code><a class="hash-link" href="#discuss-use-head-or-sed" title="标题的直接链接">​</a></h4><p>今天之所以用到 head 其实是因为我想对一个流做 sed 处理，但略去最后一行。</p><p>我一开始想用 sed 里的范围标识（地址），但一直没试出来。</p><p>后来我把地址标识换成最简单的<code>1,4s/find/replace/</code>之后才意识到，我的思路是不对的。</p><p><code>1,4</code>是一个确实被处理的范围选择，但结果就是，N 行中，前四行都被 sed 替换了，但是后面的行尽管没替换依旧会打印出来，而这正是 sed 的默认行为，它是一个流转换器。</p><p>那如果纯粹基于 sed，进行转换，并且去掉最后一行，就要用到<code>-o</code>结合好像是<code>/p</code>的 identifier，具体我也记不大清了。意思就是输出所有被匹配的行，但如果这样的话被匹配的行就会输出两遍了（两遍不必相同（NOT-SURE），一个是转换前，一个是转换后），所以另一个标识符就是阻止原内容的输出，这样就只输出匹配的行的处理结果。</p><p>所以，这个思路其实有问题，它可以对，也可以不对，它如果保证匹配 n-1 行，则对；否则就不满足需求了，我们的需求是处理前 n-1 行，并且不管匹配不匹配，都要输出，尽管实际上是都匹配的。</p><p>总之，理解到这层后，既可以用纯 sed 的方案，也可以用 head+sed 的方案，一个负责改，一个负责删即可，至于先后，结果都一样，也许 head 在前效率会更高一些。</p><p>所以，还是挺有意思的，这个。</p><h3 class="anchor anchorWithStickyNavbar_rB0w" id="commandtop">command:top<a class="hash-link" href="#commandtop" title="标题的直接链接">​</a></h3><p>Today(2022-01-27) I finally understood how to use the command of <code>top</code> (though <code>htop</code> is better for display but possibly more costly).</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-commands-1643248016619-b1ac7d3bcd2a9eb546a53a0e5da199d11d573f85a61a9317d679d002d98012fa.png" alt="picture 88" class="img_vXGZ"></p><p>I can switch the display format of memory usage when <code>top</code> has gone to the interactive interface.</p><p>The first option I can use is <code>E</code>, which allows to switch memory unit between <code>KiB | MiB | GiB | TiB</code>.</p><p>And the second option I can use is <code>m</code>, which switches the memory display type between pure text, columns graph and block graph.</p><blockquote><p>⚠️</p><ol><li>不可以在命令行中直接用 <code>top -M</code> （显示以<code>MB</code>为单位的内存使用量），因为<code>top -h</code>的帮助中写的很清楚，只支持部分选项。在 stackoverflow 上有 <code>top -M</code> 的建议(see: <a href="https://unix.stackexchange.com/questions/105908/how-to-display-meminfo-in-megabytes-in-top" target="_blank" rel="noopener noreferrer">linux - How to display meminfo in megabytes in top? - Unix &amp; Linux Stack Exchange</a>)，但可能我的版本（Ubuntu 18）不支持。正确的做法，是先进入<code>top</code>交互界面，然后按<code>E</code>，这样就会切换单位，比如按两次切换到<code>GB</code>单位。另外，独立的，还可以按<code>m</code>去切换内存的显示样式，比如像<code>htop</code>那种竖条状！</li><li>以上只在 ubuntu 上测试通过，在 mac 上我刚试了，不行！所以到底怎么用命令，还得根据平台自身！</li><li>具体的，可以通过 <code>COMMAND -h</code>去看简洁版的帮助页面，或者<code>man COMMAND</code> (e.g. <a href="https://manpages.ubuntu.com/manpages/bionic/en/man1/top.1.html" target="_blank" rel="noopener noreferrer">Ubuntu Manpage: top - display Linux processes</a>) 去看完整版的帮助页面！</li></ol></blockquote><h3 class="anchor anchorWithStickyNavbar_rB0w" id="commandcat">command:cat<a class="hash-link" href="#commandcat" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-write-raw-string-into-file-using-cat">how to write raw string into file using <code>cat</code><a class="hash-link" href="#how-to-write-raw-string-into-file-using-cat" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GOPATH=$HOME/my-go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat &lt;&lt;EOF &gt;&gt; ~/.profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export GOPATH=$GOPATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$PATH:/usr/local/go/bin:$GOPATH/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://stackoverflow.com/questions/2500436/how-does-cat-eof-work-in-bash" target="_blank" rel="noopener noreferrer">linux - How does &quot;cat \&lt;\&lt; EOF&quot; work in bash? - Stack Overflow</a></li></ul><h4 class="anchor anchorWithStickyNavbar_rB0w" id="usage-how-to-know-whats-the-bash-string">usage: how to know what&#x27;s the bash string<a class="hash-link" href="#usage-how-to-know-whats-the-bash-string" title="标题的直接链接">​</a></h4><p>When using <code>bash</code> or <code>zsh</code>, we are supposed to use the function of <code>bindKey</code>.</p><p>However, the key we typed are always hard to remember, e.g. what&#x27;s the <code>ctrl</code> key?</p><p>Luckily, there&#x27;s a super easy (and also interactive) way for us to know it via <code>cat</code>, just to type <code>cat</code> followed by <code>enter</code> in terminal, and then the terminal would display what the character would be when we typing them.</p><p>E.g. here is what&#x27;s the result when we combine <code>control | option | command</code> with arrow left and arrow right would be:</p><p><img loading="lazy" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-commands-1643287045491-0d652ec4cf50fd00bdfe265d1bcbc4df4482ffc562e30624d26218fd2d841adf.png" alt="picture 114" class="img_vXGZ"></p><h3 class="anchor anchorWithStickyNavbar_rB0w" id="commandunzip">command:Unzip<a class="hash-link" href="#commandunzip" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-unzip-to-specific-directory">how to unzip to specific directory<a class="hash-link" href="#how-to-unzip-to-specific-directory" title="标题的直接链接">​</a></h4><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">unzip file.zip -d TARGET_DIR</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://askubuntu.com/questions/994611/how-to-unzip-into-a-given-directory" target="_blank" rel="noopener noreferrer">bash - How to unzip into a given directory - Ask Ubuntu</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="commandkill">command:kill<a class="hash-link" href="#commandkill" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"> ps aux  |  grep -i  electron |  awk &#x27;{print $2}&#x27;  |  xargs sudo kill -9</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><p><a href="https://stackoverflow.com/a/30486159/9422455" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/a/30486159/9422455</a></p><h3 class="anchor anchorWithStickyNavbar_rB0w" id="commandscp">command:scp<a class="hash-link" href="#commandscp" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown -R USER_NAME REMOTE_FOLDER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chmod 777 REMOTE_FOLDER</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>the <code>-R</code> means &quot;recursively&quot; since there may be file deeply in the target folder that won&#x27;t allow you to write.</p><p>Hence, you can know, you can specifically claim your authority on the file or directory, since it would not automatically transfer.</p><p>Thus, a flexible approach is that just add a <code>-R</code> flag.</p><p>reference: <a href="https://unix.stackexchange.com/a/347412" target="_blank" rel="noopener noreferrer">https://unix.stackexchange.com/a/347412</a></p><h3 class="anchor anchorWithStickyNavbar_rB0w" id="commandlsof">command:lsof<a class="hash-link" href="#commandlsof" title="标题的直接链接">​</a></h3><p>check status of port occupation</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">lsof -i:8888</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_rB0w" id="commandufw">command:ufw<a class="hash-link" href="#commandufw" title="标题的直接链接">​</a></h3><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># check status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># enable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw enable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># white list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw allow 9000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># reload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw reload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://blog.csdn.net/jiaochiwuzui/article/details/80907521" target="_blank" rel="noopener noreferrer">(20 条消息) Ubuntu 防火墙的开启，关闭，端口的打开，查看<!-- -->_<!-- -->jiaochiwuzui 的博客-CSDN 博客<!-- -->_<!-- -->ubuntu 查看防火墙开启的端口</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="commandtime">command:time<a class="hash-link" href="#commandtime" title="标题的直接链接">​</a></h3><p>I can directly using <code>time ( COMMAND_1 | COMMAND_2 )</code>, so that it can calculate the final time of this pipe.</p><p>However, time calculation is a little more sophisticated than what would I have thought, refer more to: <a href="https://unix.stackexchange.com/questions/364156/how-can-i-time-a-pipe/364157" target="_blank" rel="noopener noreferrer">bash - How can I time a pipe? - Unix &amp; Linux Stack Exchange</a></p><h3 class="anchor anchorWithStickyNavbar_rB0w" id="commandtr">command:tr<a class="hash-link" href="#commandtr" title="标题的直接链接">​</a></h3><p>It&#x27;s useful to split line to lines.</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &quot;111;222;333&quot; | tr &#x27;;&#x27; &#x27;\n&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">111</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">222</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">333</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># use `nl` to add the line number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat main.js | tr &#x27;;&#x27; &#x27;\n&#x27; | nl -ba | head -6</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_rB0w" id="commandcd">command:cd<a class="hash-link" href="#commandcd" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_rB0w" id="usage-a-superb-scene-using-cd-">usage: a superb scene using <code>cd .</code><a class="hash-link" href="#usage-a-superb-scene-using-cd-" title="标题的直接链接">​</a></h4><img loading="lazy" alt="picture 10" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-howto-1641284537356-d66d64fc07918dc1e98e62dd2dd70454a9ff16b2b2cc6da39fe18cbc6a5b07a1.png" width="480" class="img_vXGZ"><p>ref:</p><ul><li><a href="https://superuser.com/questions/702402/how-do-i-refresh-directory-in-bash" target="_blank" rel="noopener noreferrer">linux - How do I refresh directory in BASH? - Super User</a></li></ul><h3 class="anchor anchorWithStickyNavbar_rB0w" id="commandsed">command:sed<a class="hash-link" href="#commandsed" title="标题的直接链接">​</a></h3><blockquote><p>ref</p></blockquote><ul><li><p><a href="https://www.gnu.org/software/sed/manual/sed.html" target="_blank" rel="noopener noreferrer">✨✨✨ sed, a stream editor✨✨✨</a></p></li><li><p><a href="https://www.grymoire.com/Unix/Sed.html" target="_blank" rel="noopener noreferrer">Sed - An Introduction and Tutorial</a></p></li><li><p><a href="https://www.mankier.com/1/sed" target="_blank" rel="noopener noreferrer">sed man page - General Commands | ManKier</a></p></li></ul><p>a good start:</p><ul><li><a href="https://www.geeksforgeeks.org/sed-command-in-linux-unix-with-examples/" target="_blank" rel="noopener noreferrer">Sed Command in Linux/Unix with examples - GeeksforGeeks</a></li></ul><h4 class="anchor anchorWithStickyNavbar_rB0w" id="how-to-print-only-matched-lines">how to print only matched lines<a class="hash-link" href="#how-to-print-only-matched-lines" title="标题的直接链接">​</a></h4><ol><li><code>-n</code> means &quot;No automatically print the each line&quot;</li><li><code>/p</code> means &quot;Print the processed line&quot;</li></ol><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># print only the matched lines</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sed -n &quot;s|find|replace|p&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># don&#x27;t print any line (so useless)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sed -n &quot;s|find|replace|&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># print all the line each, with matched line again(twice, and it&#x27;s the same)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sed &quot;s|find|replace|p&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># TODO: print the processed, and apply function on it.</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ref:</p><ul><li><a href="https://stackoverflow.com/questions/17511639/sed-print-only-matching-group" target="_blank" rel="noopener noreferrer">regex - sed: print only matching group - Stack Overflow</a></li></ul><h4 class="anchor anchorWithStickyNavbar_rB0w" id="-how-to-increment-version-number">✨ how to increment version number<a class="hash-link" href="#-how-to-increment-version-number" title="标题的直接链接">​</a></h4><h5 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-1-use-echo-based-on-e">resolution 1: use <code>echo</code> based on <code>//e</code><a class="hash-link" href="#resolution-1-use-echo-based-on-e" title="标题的直接链接">​</a></h5><p>special thanks to: <a href="https://stackoverflow.com/a/14348899/9422455" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/a/14348899/9422455</a></p><h5 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-2-answer">resolution 2: answer<a class="hash-link" href="#resolution-2-answer" title="标题的直接链接">​</a></h5><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">gsed -i -E &#x27;s|(.*)&quot;version&quot;: &quot;([0-9]+)\.([0-9]+)\.([0-9]+)&quot;|echo &quot;\1\\&quot;version\\&quot;: \\&quot;\2.\3.$((\4+1))\\&quot;&quot;|e&#x27; package.json</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>test what happened using <code>//pe</code></p></blockquote><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">➜  erb_sqlite git:(main) head -3 release/app/package.json                                                                                                                                           [7-01-22 | 4:18:17]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;name&quot;: &quot;mark.hjxh.express_match&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;version&quot;: &quot;0.2.2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">➜  erb_sqlite git:(main) gsed -E &#x27;s|(.*)&quot;version&quot;: &quot;([0-9]+)\.([0-9]+)\.([0-9]+)&quot;|echo &quot;\1\\&quot;version\\&quot;: \\&quot;\2.\3.$((\4+1))\\&quot;&quot;|pe&#x27; release/app/package.json                                        [7-01-22 | 4:08:57]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;name&quot;: &quot;mark.hjxh.express_match&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;  \&quot;version\&quot;: \&quot;0.2.$((2+1))\&quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;version&quot;: &quot;0.2.3&quot;,</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>explanation</p></blockquote><p>In fact, the <code> &quot;version&quot;: &quot;0.2.2&quot;,</code> is changed into <code>echo &quot; \&quot;version\&quot;: \&quot;0.2.$((2+1))\&quot;&quot;,</code>.</p><p>And then the <code>e</code> syntax indicates run this sequency string as a command, so that it finally turns into <code> &quot;version&quot;: &quot;0.2.3&quot;,</code></p><blockquote><p>attention</p></blockquote><ol><li>the <code>&quot;</code> needs to be escaped, and to escape <code>&quot;</code>, we need to use a <code>\</code>, and to let the <code>\</code> work in the <code>echo</code> function, we need to escape it again, that is to be <code>\\&quot;</code></li><li><code>sed</code> will match all line (including the leading space), and the <code>e</code> would execute all line. So if I just replace the version number part into <code>echo &quot;\\&quot;0.2.3\\&quot;&quot;</code>, then all the line would turns into <code> &quot;version&quot;: echo &quot;\\&quot;0.2.3\\&quot;&quot;</code>, which is certainly unwanted and deserves reflection.</li></ol><blockquote><p>core ref</p></blockquote><p><a href="https://stackoverflow.com/questions/14348432/how-to-find-replace-and-increment-a-matched-number-with-sed-awk" target="_blank" rel="noopener noreferrer">bash - How to find/replace and increment a matched number with sed/awk? - Stack Overflow</a></p><p><code>perl | awk</code> alternative</p><ul><li><a href="https://stackoverflow.com/questions/8653126/how-to-increment-version-number-in-a-shell-script" target="_blank" rel="noopener noreferrer">bash - How to increment version number in a shell script? - Stack Overflow</a></li></ul><blockquote><p>official hack way (but I failed)</p></blockquote><p>sh #!/usr/bin/sed -f</p><p>/<sup id="fnref-0-9-ccff32"><a href="#fn-0-9-ccff32" class="footnote-ref">0-9</a></sup>/ d</p><h1>replace all trailing 9s by <!-- -->_<!-- --> (any other character except digits, could</h1><h1>be used)</h1><p>:d s/9<!-- -->(<em>*<!-- -->)<!-- -->$/</em>\1/ td</p><h1>incr last digit only. The first line adds a most-significant</h1><h1>digit of 1 if we have to add a digit.</h1><p>s/^<!-- -->(<!-- -->_<!-- -->*<!-- -->)<!-- -->$/1\1/; tn s/8<!-- -->(<strong>)<!-- -->$/9\1/; tn s/7<!-- -->(<!-- -->_<!-- -->_<!-- -->)<!-- -->$/8\1/; tn s/6<!-- -->(</strong>)<!-- -->$/7\1/; tn s/5<!-- -->(<!-- -->_<!-- -->*<!-- -->)<!-- -->$/6\1/; tn s/4<!-- -->(<!-- -->_<!-- -->_<!-- -->)<!-- -->$/5\1/; tn s/3<!-- -->(<!-- -->_<!-- -->_<!-- -->)<!-- -->$/4\1/; tn s/2<!-- -->(<!-- -->_<!-- -->_<!-- -->)<!-- -->$/3\1/; tn s/1<!-- -->(<!-- -->_<!-- -->*<!-- -->)<!-- -->$/2\1/; tn s/0<!-- -->(<!-- -->_<!-- -->*<!-- -->)<!-- -->$/1\1/; tn</p><p>:n y/<!-- -->_<!-- -->/0/</p><div class="codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-text codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- [sed, a stream editor](https://www.gnu.org/software/sed/manual/sed.html#Increment-a-number)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#### how to match digits (`[0-9]` or `:digit:`)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; ref:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">thanks for the direction to sed official documentation in this post.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- [regex - Why doesn&#x27;t `\d` work in regular expressions in sed? - Stack Overflow](https://stackoverflow.com/questions/14671293/why-doesnt-d-work-in-regular-expressions-in-sed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#### how to insert text before first line of file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">suppose the text is:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@tailwind base;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@tailwind components;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@tailwind utilities;</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>and the file is <code>public/style.css</code></p><p>first, export this variable for better understanding of commands:</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">T=&#x27;@tailwind base;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@tailwind components;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@tailwind utilities;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">F=&#x27;public/style.css&#x27;</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>and copy file as a backup:</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">cp $F ${F}_</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>then the reset command is:</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">cp ${F}_ $F</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-1-use-cat-and-">resolution 1: use <code>cat</code> and <code>;</code><a class="hash-link" href="#resolution-1-use-cat-and-" title="标题的直接链接">​</a></h5><p>The <code>cat</code> approach meets our intuition, but needs a temp file.</p><p>First, we dump the <code>T</code> into <code>temp</code> file, then append <code>F</code> into temp, finally replace <code>F</code> with temp, that is:</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">echo $T &gt; temp; cat $F &gt;&gt; temp; mv temp $F</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Be careful about the second operator of <code>&gt;&gt;</code> since it means <code>append</code> otherwise the <code>$T</code> would be flushed, then <code>$F</code> keeps unchanged.</p><p>refer:</p><ul><li><a href="https://unix.stackexchange.com/questions/159513/what-are-the-shells-control-and-redirection-operators" target="_blank" rel="noopener noreferrer">What are the shell&#x27;s control and redirection operators? - Unix &amp; Linux Stack Exchange</a></li></ul><h5 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-2-use-cat-and-">resolution 2: use <code>cat</code> and <code>|</code><a class="hash-link" href="#resolution-2-use-cat-and-" title="标题的直接链接">​</a></h5><p>In last solution, we used 2 &#x27;;&#x27;, and there is an easy way to change it to just 1 &#x27;;&#x27;.</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">echo $T | cat - $F &gt; temp; mv temp $F</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this solution, the <code>$T</code> echoed into second pipe, and <code>cat</code> used <code>-</code> to capture it then joined with <code>$F</code> and dumped into temp, which surely is faster.</p><p>refer:</p><ul><li><p><a href="https://superuser.com/questions/1388584/what-does-the-last-hyphen-mean-in-options-of-bash" target="_blank" rel="noopener noreferrer">linux - What does the last &quot;-&quot; (hyphen) mean in options of <code>bash</code>? - Super User</a></p></li><li><p><a href="https://unix.stackexchange.com/questions/16357/usage-of-dash-in-place-of-a-filename" target="_blank" rel="noopener noreferrer">shell - Usage of dash (-) in place of a filename - Unix &amp; Linux Stack Exchange</a></p></li></ul><h5 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-3-use-sed-s-command">resolution 3: use sed s-command<a class="hash-link" href="#resolution-3-use-sed-s-command" title="标题的直接链接">​</a></h5><p>In the above 2 solutions, we both need an IO, i.e. first saving into a &#x27;temp&#x27; file and move to override the raw file, which could be low-efficiently and not elegant.</p><p>There&#x27;s a way allowing us to finish the &#x27;join&#x27; action just in the pipe and finally leads to inplace-modify target file. That is &quot;sed&#x27;s s-command&quot;.</p><img loading="lazy" alt="picture 24" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/1640379168300-linux-howto-90b435ef191284a35f21cb8cac698769b8548bfe2b3f90db2be5ea988a56c636.png" width="480" class="img_vXGZ"><img loading="lazy" alt="picture 25" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/1640379622241-linux-howto-e51b228ec26d453924d9731bc86f94185eccbc8ea4d43954698c4217845ca262.png" width="480" class="img_vXGZ"><p>When using <code>s-command</code>, we can easily apply regex grammar to achieve what we want.</p><img loading="lazy" alt="picture 26" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/1640379819166-linux-howto-c717ac5a605fb416fa2f472e202a74949ed8b34c3556d06ca6b70c8202d70901.png" width="480" class="img_vXGZ"><p>Like this, we can easily insert text in front of a sequency of text based on regex of &#x27;^&#x27;, which means the beginning of text.</p><p>And then, since the basic grammar of how to insert text before specific line of an input file in <code>sed</code> is <code>sed -i &#x27;Ni TEXT&#x27; $F</code> , the problem then converts to how to join &#x27;1i&#x27; with $T. That is what we just learned can be put into practice:</p><img loading="lazy" alt="picture 27" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/1640380337394-linux-howto-d8bfb544ab1b2db098a1fd9138401997b9b11814af6cbf639243453526a91c02.png" width="480" class="img_vXGZ"><p>You see, now all the commands have nothing to do with the io, and the principle behind this command chain is straightforward: join into <code>1i $T</code> then use it as <code>sed -i</code>’s parameter (via <code>-f-</code> which is the former pipe).</p><h5 class="anchor anchorWithStickyNavbar_rB0w" id="resolution-4-use-sed-e-command">resolution 4: use sed e-command<a class="hash-link" href="#resolution-4-use-sed-e-command" title="标题的直接链接">​</a></h5><img loading="lazy" alt="picture 16" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/1640375147417-linux-howto-e0475887ff34e4a4a0be217c3596e054d2bdfa01f28f360f2459123e0b2175f7.png" width="480" class="img_vXGZ"><img loading="lazy" alt="picture 17" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/1640375169955-linux-howto-57609e425971259dd89c05c571047e701cb2c44dcc4deac43b0724a7295d8f44.png" width="480" class="img_vXGZ"><p>I&#x27;d think the e-command is quite confusing, but does good job.</p><p>I made some tests on the e-command to help myself understand.</p><p>In the above introduction, it indicates that if &#x27;without parameters, the e command executes the command that is found in space and replace the pattern space with the output&#x27;.</p><p>suppose we have <code>a=&#x27;aaa\necho &quot;bbb&quot; \nccc&#x27;</code>, then if we runs <code>echo $a | gsed &#x27;2e&#x27;</code>, that&#x27;s to say run the second line as a command and let others stay as what they are: <img loading="lazy" alt="picture 18" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/1640375663511-linux-howto-18fd2906bf27a739476740fbe2c713a3c42b40de5865cebd14c08e696ed0b39a.png" width="480" class="img_vXGZ"></p><p>However, &#x27;if a parameter is specified, instead, the e command interprets it as a command and sends its output to the output stream.&#x27;</p><p>I made an example which may help us to understand what&#x27;s the mechanism of <code>gsed &#x27;ne xxx</code>, in which <code>xxx</code> is the so-called &#x27;parameter&#x27;.</p><img loading="lazy" alt="picture 19" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/1640376208972-linux-howto-5309698b6833082cf93b3b0f69cda3616678ad00d3e5141895bcec14b8684f57.png" width="480" class="img_vXGZ"><p>You can see, as the following shows, since a is a three-line text and sent into the pipe as stream, so first line shows &#x27;aaa&#x27;, and second line shows &#x27;echo &quot;bbb&quot;&#x27;, as what we preset.</p><p>The most notable point is that since <code>gsed</code> sets a <code>3e</code> command which means &#x27;it will execute following commands at 3rd row of stream&#x27;. Thus, the following commands <code>xxx\n echo &quot;yyy&quot;...</code> are executed as separate commands split by lines.</p><p>Obviously, neither <code>xxx</code> nor <code>zzz</code> is a valid command and turned into an error. Plus, since the level of error usually is a bit higher than normal output, the error of <code>zzz</code> came before <code>yyy</code> and then is <code>AAA</code>.</p><p>Finally, when all the commands were executed, the next stream in pipe came, i.e. <code>ccc</code>, and all the sequences came into end.</p><p>ref:</p><p><a href="https://www.gnu.org/software/sed/manual/sed.html#:~:text=by%20standard%20seds.-,e%20%5Bcommand%5D,-This%20command%20allows" target="_blank" rel="noopener noreferrer">sed e-command</a></p><p>Still, we had other topics to talk about.</p><img loading="lazy" alt="picture 20" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/1640377292421-linux-howto-27ab701a1d1cca335a1476e71b742a60b9f6817b5d08521c70c766bfae21290d.png" width="480" class="img_vXGZ"><img loading="lazy" alt="picture 22" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/1640377315692-linux-howto-ea510349e79dd47d4ca01d17200defcf7e8b8b8ebda0b0785c1833ba932c625d.png" width="480" class="img_vXGZ"><p>We can know the classic usage of <code>sed</code> is <code>sed SCRIPT INPUTFILE</code>, and if <code>-e</code> option is used to specify a script, with all non-option parameters taken as input files.</p><p>So what would happen when we combine the <code>-e</code> and an input file.</p><p>Back to what we covered the above, we can move a step further now.</p><img loading="lazy" alt="picture 23" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/1640377647537-linux-howto-8099c8c4212b90dd4f7fa22449dc22ef8135c485c97674a561b87769121c750b.png" width="480" class="img_vXGZ"><p>In this example, we can see that <code>gsed</code> first read one line from <code>../temp</code> file which is <code>AAA</code>, and then paused since the <code>2e</code> flag to execute <code>cat -</code> command which shows all the input stream from <code>echo $a</code>, and finally continued to read the remaining rows of <code>BBB</code> and <code>CCC</code>.</p><p>So what about if we specify a <code>-i</code> option, which means <code>change in position</code>?</p><p>It&#x27;s easy to understand, that is all the output would be sent into <code>../temp</code>, so that <code>../temp</code> changes to the output just like the result in this example shows.</p><p>Hence, we can derive from our conclusion: if we use the following command:</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain">echo $T | gsed -i &#x27;1e cat -&#x27;  $F</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>then the goal of inserting text before first line can be achieved just on the fly~</p><p>How amazing and beautiful it is!</p><p>ref:</p><ul><li><a href="https://www.gnu.org/software/sed/manual/sed.html#:~:text=sed%20%C2%A0%20%5BContents%5D%5BIndex%5D-,2.1%20overview,-Normally%20sed%20is" target="_blank" rel="noopener noreferrer">gsed overview</a></li></ul><blockquote><p>conclusion</p></blockquote><p>G1. To insert lines at the beginning of one file:</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># 1. dump, dump, and move</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $T &gt; temp; cat $F &gt;&gt; temp; mv temp $F;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2. join, dump, and move</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $T | cat - $F &gt; temp; mv temp $F;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 3. [sed s-command] concat-string, inplace-insert</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $T | gsed &#x27;1s/^/1i /&#x27; | gsed -i -f- $F</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 4. [sed e-command] ... hard to conclude</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $T | gsed -i &#x27;1e cat -&#x27; $F</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>G2. To insert lines at specific line:</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># 1. if text is single line, refer: https://stackoverflow.com/a/6537587/9422455</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gsed -i &#x27;Ni $T&#x27; $F</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2. if text is multi lines, refer:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $T | gsed -i &#x27;Ne cat -&#x27; $F</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>FIXME: (failed) G3. To insert content after matched position:</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># 1. [sed r-command]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $T | gsed -i &#x27;$P/r -&#x27; $F #  the &#x27;-&#x27; is same for &#x27;/dev/stdin&#x27;</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>G4. To insert multi lines manually:</p><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># 1, when lines are already multiplied, just add `\` after each line, refer: https://askubuntu.com/a/702693</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2, when lines are in one, using `\n`, refer: https://askubuntu.com/a/702690</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>G5. To insert lines after matched line with the same leading space format:</p><blockquote><p>⚠️ 嵌套 sed 正则注意事项</p><ol><li>输入的文本不能与分隔符相同，否则需要转义。比如本次为了在代码中加入注释<code>//</code>，就不方便用<code>/</code>当分隔符</li><li>嵌套正则的时候，为了能分清一级与二级，可以应用不同的分隔符，比如本次更新用了<code>|</code>作为一级，<code>_</code>作为二级</li></ol></blockquote><div class="language-sh codeBlockContainer_jDV4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vx7S"><pre tabindex="0" class="prism-code language-sh codeBlock_Gebt thin-scrollbar"><code class="codeBlockLines_FJaf"><span class="token-line" style="color:#393A34"><span class="token plain"># 1. [sed s-command] leading space align with $P</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># failed at 2022-01-25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># echo $T | gsed &#x27;s/^.*$/s\/(^.*?)($P.*$)\/\\1\\2\\n\0\//&#x27; | gsed -E -f- $F</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># updated at 2022-01-25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $T | gsed &#x27;s|^.*$|s_^(.*?)(&#x27;$P&#x27;.*)$_\\1\\2\\n\\1\0_|&#x27; | gsed -E -f- $F | grep --context=3 $T</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># FIXME: (failed) 2. [sed s-command with named-pipe] [more straightforward]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat &lt;(echo -n &quot;s/(^.*?)($P.*?$)/\1\2\\\\n\1&quot; &amp; echo -n $T &amp; echo -n &quot;/&quot;) | gsed -E -f- $F</span><br></span></code></pre><div class="buttonGroup_cUGO"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_OqsO" aria-hidden="true"><svg class="copyButtonIcon_PgCn" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_bsQG" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><img loading="lazy" alt="picture 29" src="https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/1640385997938-linux-howto-41e634caf1122f991d08d485202adfb56ab71cdfdb7d5ad76ad4f57ca751cbaa.png" width="480" class="img_vXGZ"><p>ref:</p><ul><li><a href="https://serverfault.com/questions/171095/how-do-i-join-two-named-pipes-into-single-input-stream-in-linux" target="_blank" rel="noopener noreferrer">shell - How do I join two named pipes into single input stream in linux - Server Fault</a></li></ul></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_WmAe"><div class="col"><b>标签：</b><ul class="tags_rTaS padding--none margin-left--sm"><li class="tag_l5va"><a class="tag_Nd8t tagRegular_TiLs" href="/blog/tags/开发笔记">开发笔记</a></li><li class="tag_l5va"><a class="tag_Nd8t tagRegular_TiLs" href="/blog/tags/linux">Linux</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/markshawn2020/docusaurus/edit/master/my-documents/blog/2022/02-02-dev-linux.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_IMw_" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="博文分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/2022/02/03/prose-living"><div class="pagination-nav__sublabel">较新一篇</div><div class="pagination-nav__label">札记 | 2022，活着</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/2022/02/01/prose-2022-begining"><div class="pagination-nav__sublabel">较旧一篇</div><div class="pagination-nav__label">札记 | 关于近几年的一些感悟</div></a></nav></main><div class="col col--2"><div class="tableOfContents_RLlU thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#首先linux-是什么" class="table-of-contents__link toc-highlight">首先，linux 是什么</a></li><li><a href="#其次如何拥有一台-linux" class="table-of-contents__link toc-highlight">其次，如何拥有一台 linux</a></li><li><a href="#接着如何登录-linux" class="table-of-contents__link toc-highlight">接着，如何登录 linux</a></li><li><a href="#最后如何掌控-linux以下给出一部分经验笔记" class="table-of-contents__link toc-highlight">最后，如何掌控 Linux，以下给出一部分经验笔记</a></li><li><a href="#-------------------------------------" class="table-of-contents__link toc-highlight">-------------------------------------</a></li><li><a href="#best-practice-ubuntu-initialization" class="table-of-contents__link toc-highlight">BEST-PRACTICE: ubuntu initialization</a><ul><li><a href="#step-0-install" class="table-of-contents__link toc-highlight">step 0. install</a></li><li><a href="#step-1-config-apt-source" class="table-of-contents__link toc-highlight">step 1. config apt source</a></li><li><a href="#step-2-config-git" class="table-of-contents__link toc-highlight">step 2. config git</a></li><li><a href="#step-3-config-terminal" class="table-of-contents__link toc-highlight">step 3. config terminal</a></li><li><a href="#step-4-config-language" class="table-of-contents__link toc-highlight">step 4. config language</a></li><li><a href="#improve-a-script-to-init-ubuntu-may-not-work" class="table-of-contents__link toc-highlight">IMPROVE: a script to init ubuntu (may not work)</a></li></ul></li><li><a href="#best-practice-linux-connection-ssh" class="table-of-contents__link toc-highlight">BEST-PRACTICE: linux connection (<code>ssh</code>)</a><ul><li><a href="#ssh-generate-public-keys" class="table-of-contents__link toc-highlight">ssh generate public keys</a></li><li><a href="#ssh-no-secretpassword" class="table-of-contents__link toc-highlight">ssh no secret/password</a></li><li><a href="#ssh-keep-connection-alive" class="table-of-contents__link toc-highlight">ssh keep connection alive</a></li></ul></li><li><a href="#best-practice-linux-env-management" class="table-of-contents__link toc-highlight">BEST-PRACTICE: linux env management</a><ul><li><a href="#how-to-change-apt-source" class="table-of-contents__link toc-highlight">how to change apt source</a></li><li><a href="#how-to-know-whats-the-os-platform" class="table-of-contents__link toc-highlight">how to know what&#39;s the os platform</a></li><li><a href="#how-to-configure-python-environment" class="table-of-contents__link toc-highlight">how to configure python environment</a></li><li><a href="#-cannot-use-sudo-apt-get-install-xxx-to-install-packages" class="table-of-contents__link toc-highlight">✅ cannot use <code>sudo apt-get install xxx</code> to install packages</a></li></ul></li><li><a href="#best-practice-linux-file-system-management" class="table-of-contents__link toc-highlight">BEST-PRACTICE: linux file system management</a><ul><li><a href="#mkdir-if-not-exist" class="table-of-contents__link toc-highlight">mkdir if not exist</a></li><li><a href="#ls-and-delete-files" class="table-of-contents__link toc-highlight">ls and delete files</a></li><li><a href="#fastest-delete-file" class="table-of-contents__link toc-highlight">fastest delete file</a></li><li><a href="#how-to-show-absolute-path-of-file-from-relative" class="table-of-contents__link toc-highlight">how to show absolute path of file from relative</a></li><li><a href="#how-to-copy-file-into-clipboard" class="table-of-contents__link toc-highlight">how to copy file into clipboard</a></li><li><a href="#how-to-show-file-size" class="table-of-contents__link toc-highlight">how to show file size</a></li><li><a href="#how-to-compare-between-files-diff--vimdiff" class="table-of-contents__link toc-highlight">how to compare between files (<code>diff</code> &amp; <code>vimdiff</code>)</a></li><li><a href="#fixme-how-to-copymove-directory-files-correctly-to-soft-links-under-target-directory-without-affecting-git" class="table-of-contents__link toc-highlight">FIXME: how to copy/move directory files correctly to soft links under target directory without affecting git?</a></li></ul></li><li><a href="#best-practice-linux-disk-management" class="table-of-contents__link toc-highlight">BEST-PRACTICE: linux disk management</a><ul><li><a href="#ncdu-disk-space-tui" class="table-of-contents__link toc-highlight"><code>ncdu</code>, disk space tui</a></li><li><a href="#baobab-disk-space-gui" class="table-of-contents__link toc-highlight"><code>baobab</code>, disk space gui</a></li></ul></li><li><a href="#best-practice-linux-shells-management" class="table-of-contents__link toc-highlight">BEST-PRACTICE: linux shells management</a><ul><li><a href="#list-all-the-shells" class="table-of-contents__link toc-highlight">list all the shells</a></li><li><a href="#background-sh-is-different-with-bash" class="table-of-contents__link toc-highlight">background: <code>sh</code> is different with <code>bash</code></a></li><li><a href="#see-whats-the-current-shell" class="table-of-contents__link toc-highlight">see what&#39;s the current Shell</a></li><li><a href="#switch-shell" class="table-of-contents__link toc-highlight">switch shell</a></li><li><a href="#set-zsh-as-the-default-terminal-need-re-login" class="table-of-contents__link toc-highlight">set zsh as the default terminal (need re-login)</a></li></ul></li><li><a href="#best-practice-linux-terminal-management" class="table-of-contents__link toc-highlight">BEST-PRACTICE: linux terminal management</a><ul><li><a href="#-the-terminal-cannot-up-down-after-editing" class="table-of-contents__link toc-highlight">✅ the terminal cannot up down after editing</a></li><li><a href="#todo-bind-option--arrow-to-jump-word-in-zsh-on-ubuntu-vmware-on-macos" class="table-of-contents__link toc-highlight">TODO: bind <code>option + arrow</code> to jump word in zsh on ubuntu vmware on MacOS</a></li></ul></li><li><a href="#best-practice-linux-commands-management" class="table-of-contents__link toc-highlight">BEST-PRACTICE: linux commands management</a><ul><li><a href="#how-to-auto-input-in-command" class="table-of-contents__link toc-highlight">how to auto input in command</a></li><li><a href="#how-to-search-commands-by-prefix-history-search-backwardforward" class="table-of-contents__link toc-highlight">how to search commands by prefix (<code>history-search-backward/forward</code>)</a></li><li><a href="#how-to-repeat-command" class="table-of-contents__link toc-highlight">how to repeat command</a></li><li><a href="#how-to-use-variable-as-multi-args" class="table-of-contents__link toc-highlight">how to use variable as multi args</a></li><li><a href="#how-to-set-an-alias" class="table-of-contents__link toc-highlight">how to set an alias</a></li><li><a href="#how-to-compare-between-outputs-from-two-commands" class="table-of-contents__link toc-highlight">how to compare between outputs from two commands</a></li></ul></li><li><a href="#best-practice-linux-accounts-management" class="table-of-contents__link toc-highlight">BEST-PRACTICE: linux accounts management</a><ul><li><a href="#init-user-with-root-config" class="table-of-contents__link toc-highlight">init user with root config</a></li><li><a href="#how-to-create-user" class="table-of-contents__link toc-highlight">how to create user</a></li><li><a href="#how-to-log-out" class="table-of-contents__link toc-highlight">how to log out</a></li><li><a href="#set-a-shorter-password-for-ubuntu" class="table-of-contents__link toc-highlight">set a shorter password for ubuntu</a></li></ul></li><li><a href="#best-practice-linux-net-management" class="table-of-contents__link toc-highlight">BEST-PRACTICE: linux net management</a><ul><li><a href="#how-to-know-my-public-ip-address" class="table-of-contents__link toc-highlight">how to know my public ip address</a></li><li><a href="#how-to-monitor-network-traffic" class="table-of-contents__link toc-highlight">how to monitor network traffic</a></li><li><a href="#fixme-check-proxy" class="table-of-contents__link toc-highlight">FIXME: check proxy</a></li></ul></li><li><a href="#best-practice-linux-datetime-management" class="table-of-contents__link toc-highlight">BEST-PRACTICE: linux date/time management</a><ul><li><a href="#how-to-format-date-in-terminal" class="table-of-contents__link toc-highlight">how to format date in terminal</a></li><li><a href="#how-to-change-timezone-and-time" class="table-of-contents__link toc-highlight">how to change timezone (and time)</a></li></ul></li><li><a href="#best-practice-linux-system-management" class="table-of-contents__link toc-highlight">BEST-PRACTICE: linux system management</a><ul><li><a href="#-a-stop-job-is-running-for-session-c2-of-user--1min-30s" class="table-of-contents__link toc-highlight">✅ <code>A stop job is running for Session c2 of user ... (1min 30s)</code></a></li></ul></li><li><a href="#-----------------------------------" class="table-of-contents__link toc-highlight">-----------------------------------</a></li><li><a href="#best-practice-linux-common-commands" class="table-of-contents__link toc-highlight">BEST-PRACTICE: linux common commands</a><ul><li><a href="#commandtar" class="table-of-contents__link toc-highlight">command:tar</a></li><li><a href="#commandperl" class="table-of-contents__link toc-highlight">command:perl</a></li><li><a href="#commandfind" class="table-of-contents__link toc-highlight">command:find</a></li><li><a href="#commandgrep" class="table-of-contents__link toc-highlight">command:grep</a></li><li><a href="#commandtree" class="table-of-contents__link toc-highlight">command:tree</a></li><li><a href="#commandhead" class="table-of-contents__link toc-highlight">command:head</a></li><li><a href="#commandtop" class="table-of-contents__link toc-highlight">command:top</a></li><li><a href="#commandcat" class="table-of-contents__link toc-highlight">command:cat</a></li><li><a href="#commandunzip" class="table-of-contents__link toc-highlight">command:Unzip</a></li><li><a href="#commandkill" class="table-of-contents__link toc-highlight">command:kill</a></li><li><a href="#commandscp" class="table-of-contents__link toc-highlight">command:scp</a></li><li><a href="#commandlsof" class="table-of-contents__link toc-highlight">command:lsof</a></li><li><a href="#commandufw" class="table-of-contents__link toc-highlight">command:ufw</a></li><li><a href="#commandtime" class="table-of-contents__link toc-highlight">command:time</a></li><li><a href="#commandtr" class="table-of-contents__link toc-highlight">command:tr</a></li><li><a href="#commandcd" class="table-of-contents__link toc-highlight">command:cd</a></li><li><a href="#commandsed" class="table-of-contents__link toc-highlight">command:sed</a></li></ul></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Core</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/archive">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Docusaurus</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docusaurus.io/docs/category/guides" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://joshcena.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Case: Joshua Chen<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Tools</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://vercel.com/markshawn2020/docusaurus/deployments" target="_blank" rel="noopener noreferrer" class="footer__link-item">Vercel Deploy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://analytics.google.com/analytics/web/#/p324822374/reports/reportinghub?params=_u.dateOption%3DthisWeekSatToToday" target="_blank" rel="noopener noreferrer" class="footer__link-item">Google Analytics<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ap-east-1.console.aws.amazon.com/ec2/home?region=ap-east-1#InstanceDetails:instanceId=i-02fffe2800e2025e1" target="_blank" rel="noopener noreferrer" class="footer__link-item">AWS EC2 Monitor (VPN)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Rdzz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.aacdcb6f.js"></script>
<script src="/assets/js/main.c22735e8.js"></script>
</body>
</html>