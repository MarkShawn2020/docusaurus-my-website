"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[66130],{35318:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var a=n(27378);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var r=a.createContext({}),u=function(e){var t=a.useContext(r),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(r.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,r=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),h=u(n),d=o,m=h["".concat(r,".").concat(d)]||h[d]||c[d]||i;return n?a.createElement(m,l(l({ref:t},p),{},{components:n})):a.createElement(m,l({ref:t},p))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,l=new Array(i);l[0]=h;var s={};for(var r in t)hasOwnProperty.call(t,r)&&(s[r]=t[r]);s.originalType=e,s.mdxType="string"==typeof e?e:o,l[1]=s;for(var u=2;u<i;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},53031:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>k,contentTitle:()=>d,default:()=>b,frontMatter:()=>h,metadata:()=>m,toc:()=>f});var a=n(35318),o=Object.defineProperty,i=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c=(e,t)=>{for(var n in t||(t={}))r.call(t,n)&&p(e,n,t[n]);if(s)for(var n of s(t))u.call(t,n)&&p(e,n,t[n]);return e};const h={},d=void 0,m={unversionedId:"coding/OS/Linux/linux-howto",id:"coding/OS/Linux/linux-howto",title:"linux-howto",description:"linux init manual",source:"@site/my-documents/docs/coding/OS/Linux/linux-howto.md",sourceDirName:"coding/OS/Linux",slug:"/coding/OS/Linux/linux-howto",permalink:"/docs/coding/OS/Linux/linux-howto",draft:!1,editUrl:"https://github.com/markshawn2020/docusaurus/edit/master/my-documents/docs/coding/OS/Linux/linux-howto.md",tags:[],version:"current",lastUpdatedAt:1726564669,formattedLastUpdatedAt:"2024\u5e749\u670817\u65e5",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"linux debug",permalink:"/docs/coding/OS/Linux/linux-debug"},next:{title:"linux-monitor",permalink:"/docs/coding/OS/Linux/linux-monitor"}},k={},f=[{value:"linux init manual",id:"linux-init-manual",level:2},{value:"linux connection (<code>ssh</code>)",id:"linux-connection-ssh",level:2},{value:"ssh without password",id:"ssh-without-password",level:3},{value:"ssh keep connection alive",id:"ssh-keep-connection-alive",level:3},{value:"DEPRECIATED: scp no secret/password",id:"depreciated-scp-no-secretpassword",level:3},{value:"linux env management",id:"linux-env-management",level:2},{value:"how to change apt source",id:"how-to-change-apt-source",level:3},{value:"resolution 1: manual change from the App of <code>Softwares &amp; Updates</code>",id:"resolution-1-manual-change-from-the-app-of-softwares--updates",level:4},{value:"resolution 2: modify the configuration manually from the terminal",id:"resolution-2-modify-the-configuration-manually-from-the-terminal",level:4},{value:"how to know what&#39;s the os platform",id:"how-to-know-whats-the-os-platform",level:3},{value:"how to configure python environment",id:"how-to-configure-python-environment",level:3},{value:"\u2705 cannot use <code>sudo apt-get install xxx</code> to install packages",id:"-cannot-use-sudo-apt-get-install-xxx-to-install-packages",level:3},{value:"linux file system management",id:"linux-file-system-management",level:2},{value:"mkdir if not exist",id:"mkdir-if-not-exist",level:3},{value:"ls and delete files",id:"ls-and-delete-files",level:3},{value:"fastest delete file",id:"fastest-delete-file",level:3},{value:"DEPRECIATED: how to show absolute path of file from relative",id:"depreciated-how-to-show-absolute-path-of-file-from-relative",level:3},{value:"UPDATE-2022-02-05: how to show absolute path of file from relative",id:"update-2022-02-05-how-to-show-absolute-path-of-file-from-relative",level:3},{value:"how to copy file into clipboard",id:"how-to-copy-file-into-clipboard",level:3},{value:"it&#39;s easy to copy a text file",id:"its-easy-to-copy-a-text-file",level:4},{value:"but it cannot be done for a binary file",id:"but-it-cannot-be-done-for-a-binary-file",level:4},{value:"how to show file size",id:"how-to-show-file-size",level:3},{value:"how to compare between files (<code>diff</code> &amp; <code>vimdiff</code>)",id:"how-to-compare-between-files-diff--vimdiff",level:3},{value:"resolution 1: <code>diff F1 F2</code>",id:"resolution-1-diff-f1-f2",level:4},{value:"resolution 2: <code>diff -y F1 F2</code> or <code>sdiff F1 F2</code>",id:"resolution-2-diff--y-f1-f2-or-sdiff-f1-f2",level:4},{value:"resolution 3: <code>vimdiff F1 F2</code>",id:"resolution-3-vimdiff-f1-f2",level:4},{value:"TODO: resolution 4: git diff",id:"todo-resolution-4-git-diff",level:4},{value:"FIXME: how to copy/move directory files correctly to soft links under target directory without affecting git?",id:"fixme-how-to-copymove-directory-files-correctly-to-soft-links-under-target-directory-without-affecting-git",level:3},{value:"linux disk management",id:"linux-disk-management",level:2},{value:"<code>ncdu</code>, disk space tui",id:"ncdu-disk-space-tui",level:3},{value:"<code>baobab</code>, disk space gui",id:"baobab-disk-space-gui",level:3},{value:"install problem",id:"install-problem",level:4},{value:"effects",id:"effects",level:4},{value:"linux shells management",id:"linux-shells-management",level:2},{value:"redirect stdin/stderr",id:"redirect-stdinstderr",level:3},{value:"FIXED: <code>bash navigate to directory without cd</code>",id:"fixed-bash-navigate-to-directory-without-cd",level:3},{value:"shell common aliases",id:"shell-common-aliases",level:3},{value:"list all the shells",id:"list-all-the-shells",level:3},{value:"background: <code>sh</code> is different with <code>bash</code>",id:"background-sh-is-different-with-bash",level:3},{value:"see what&#39;s the current Shell",id:"see-whats-the-current-shell",level:3},{value:"switch shell",id:"switch-shell",level:3},{value:"set zsh as default shell",id:"set-zsh-as-default-shell",level:3},{value:"how to prefix any output in a bash script?",id:"how-to-prefix-any-output-in-a-bash-script",level:3},{value:"resolution 1. use function: easiest but side effect",id:"resolution-1-use-function-easiest-but-side-effect",level:4},{value:"RECOMMENDED: resolution 2. redirect stdin/err",id:"recommended-resolution-2-redirect-stdinerr",level:4},{value:"\u2705 the terminal cannot up down after editing",id:"-the-terminal-cannot-up-down-after-editing",level:3},{value:"TODO: bind <code>option + arrow</code> to jump word in zsh on ubuntu vmware on MacOS",id:"todo-bind-option--arrow-to-jump-word-in-zsh-on-ubuntu-vmware-on-macos",level:3},{value:"how to clear broken soft links",id:"how-to-clear-broken-soft-links",level:3},{value:"linux commands management",id:"linux-commands-management",level:2},{value:"how to check file/project size",id:"how-to-check-fileproject-size",level:3},{value:"linux quotes",id:"linux-quotes",level:3},{value:"pip uninstall multi packages",id:"pip-uninstall-multi-packages",level:3},{value:"Ternary operator (\u4e09\u5143\u8fd0\u7b97\u7b26)\u3001\u77ed\u8def\u8fd0\u7b97\u7b26\uff08<code>a=${VAR:-DEFAULT}</code>\uff09",id:"ternary-operator-\u4e09\u5143\u8fd0\u7b97\u7b26\u77ed\u8def\u8fd0\u7b97\u7b26avar-default",level:3},{value:"<code>|</code> , <code>||</code>, <code>&amp;</code>, <code>&amp;&amp;</code>, <code>;</code>",id:"-----",level:3},{value:"<code>&amp;&amp;</code> and <code>;</code>",id:"-and-",level:3},{value:"<code>alias</code> vs <code>variable</code>",id:"alias-vs-variable",level:3},{value:"auto-translate",id:"auto-translate",level:4},{value:"bugfix: alias in script file can&#39;t use in the outer shell",id:"bugfix-alias-in-script-file-cant-use-in-the-outer-shell",level:4},{value:"incremental variable",id:"incremental-variable",level:3},{value:"conditions",id:"conditions",level:3},{value:"sample of testing file readable and read",id:"sample-of-testing-file-readable-and-read",level:4},{value:"\u5728\u6761\u4ef6\u4e2d\u6267\u884c\u67d0\u4e9b\u8bed\u53e5\u8981\u7528 <code>(( CONDITION ))</code>",id:"\u5728\u6761\u4ef6\u4e2d\u6267\u884c\u67d0\u4e9b\u8bed\u53e5\u8981\u7528--condition-",level:4},{value:"how to auto input in command",id:"how-to-auto-input-in-command",level:3},{value:"auto input password for sudo commands",id:"auto-input-password-for-sudo-commands",level:4},{value:"auto yes for some command (<code>yes | </code>)",id:"auto-yes-for-some-command-yes--",level:4},{value:"auto yes for <code>apt</code> installing packages (<code>-y</code>)",id:"auto-yes-for-apt-installing-packages--y",level:4},{value:"how to search commands by prefix (<code>history-search-backward/forward</code>)",id:"how-to-search-commands-by-prefix-history-search-backwardforward",level:3},{value:"how to repeat command",id:"how-to-repeat-command",level:3},{value:"how to use variable as multi args",id:"how-to-use-variable-as-multi-args",level:3},{value:"how to set an alias",id:"how-to-set-an-alias",level:3},{value:"resolution 1: in terminal",id:"resolution-1-in-terminal",level:4},{value:"resolution 2: write into <code>~/.bash_aliases</code>",id:"resolution-2-write-into-bash_aliases",level:4},{value:"\u2728 resolution 3: use <code>.bash_aliases</code> with <code>zsh</code>",id:"-resolution-3-use-bash_aliases-with-zsh",level:4},{value:"unalias",id:"unalias",level:4},{value:"how to compare between outputs from two commands",id:"how-to-compare-between-outputs-from-two-commands",level:3},{value:"how to check if a string contains another string",id:"how-to-check-if-a-string-contains-another-string",level:3},{value:"using <code>==</code>",id:"using-",level:4},{value:"\u2728 using <code>grep</code>",id:"-using-grep",level:4},{value:"linux accounts management",id:"linux-accounts-management",level:2},{value:"how to create user",id:"how-to-create-user",level:3},{value:"how to log out",id:"how-to-log-out",level:3},{value:"resolution 1 (11.10 and above)",id:"resolution-1-1110-and-above",level:4},{value:"resolution 2",id:"resolution-2",level:4},{value:"set a shorter password for ubuntu",id:"set-a-shorter-password-for-ubuntu",level:3},{value:"linux net management",id:"linux-net-management",level:2},{value:"how to know my public ip address",id:"how-to-know-my-public-ip-address",level:3},{value:"how to monitor network traffic",id:"how-to-monitor-network-traffic",level:3},{value:"FIXME: check proxy",id:"fixme-check-proxy",level:3},{value:"linux date/time management",id:"linux-datetime-management",level:2},{value:"how to format date",id:"how-to-format-date",level:3},{value:"how to change timezone (and time)",id:"how-to-change-timezone-and-time",level:3},{value:"resolution 1 (conclusion): directly export",id:"resolution-1-conclusion-directly-export",level:4},{value:"resolution 2 (detail): choose following directions",id:"resolution-2-detail-choose-following-directions",level:4},{value:"linux system management",id:"linux-system-management",level:2},{value:"FIXED: <code>apt-get /var/lib/dpkg/lock-frontend</code>",id:"fixed-apt-get-varlibdpkglock-frontend",level:2},{value:"\u2705 <code>A stop job is running for Session c2 of user ... (1min 30s)</code>",id:"-a-stop-job-is-running-for-session-c2-of-user--1min-30s",level:3},{value:"Linux commands",id:"linux-commands",level:2},{value:"Linux Is Awesome",id:"linux-is-awesome",level:2},{value:"awesome discussions",id:"awesome-discussions",level:3},{value:"awesome design philosophy",id:"awesome-design-philosophy",level:3}],g={toc:f};function b(e){var t,n=e,{components:o}=n,p=((e,t)=>{var n={};for(var a in e)r.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&s)for(var a of s(e))t.indexOf(a)<0&&u.call(e,a)&&(n[a]=e[a]);return n})(n,["components"]);return(0,a.kt)("wrapper",(t=c(c({},g),p),i(t,l({components:o,mdxType:"MDXLayout"}))),(0,a.kt)("h2",c({},{id:"linux-init-manual"}),"linux init manual"),(0,a.kt)("p",null,"see: ",(0,a.kt)("a",c({parentName:"p"},{href:"/docs/coding/OS/Linux/centos-init-manual"}),"centos init manual")),(0,a.kt)("h2",c({},{id:"linux-connection-ssh"}),"linux connection (",(0,a.kt)("inlineCode",{parentName:"h2"},"ssh"),")"),(0,a.kt)("h3",c({},{id:"ssh-without-password"}),"ssh without password"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),'# ref: https://superuser.com/a/400720/1365851\ncat ~/.ssh/id_ed25519.pub | ssh root@47.113.227.53 -T "cat - >> ~/.ssh/authorized_keys"\n')),(0,a.kt)("h3",c({},{id:"ssh-keep-connection-alive"}),"ssh keep connection alive"),(0,a.kt)("p",null,"the simplest way is to force the client to keep sending ","[a null]"," message(packet) to the server, in case that the server closed the connection beyond the time limitation, and what you need to do is just to modify 2 lines in your ",(0,a.kt)("inlineCode",{parentName:"p"},"/etc/ssh/ssh_config")," file."),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"sudo vim /etc/ssh/ssh_config\n")),(0,a.kt)("p",null,"change into these:"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-yaml"}),"HOST: *\n    ServerAliveInterval 60\n")),(0,a.kt)("p",null,"finally, maybe you should restart your client. If you use the mac, you can:"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"# restart-ssh, reference: https://gist.github.com/influx6/46c39709a67f09908cc7542ca444fca2\nsudo launchctl stop com.openssh.sshd\nsudo launchctl start com.openssh.sshd\n")),(0,a.kt)("h3",c({},{id:"depreciated-scp-no-secretpassword"}),"DEPRECIATED: scp no secret/password"),(0,a.kt)("p",null,"It's easy that if only you generate a ",(0,a.kt)("inlineCode",{parentName:"p"},"id_rsa.pub")," and ",(0,a.kt)("inlineCode",{parentName:"p"}," ")," to your ",(0,a.kt)("inlineCode",{parentName:"p"},"~/.ssh/authorization_keys")," then things all done."),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),'# username="xxx"\n# server="xxxxx"\n# file="id_rsa.pub"\n\n# scp ~/.ssh/$file $username@$server:\n# ssh $username@$server\n# cat $file >> ~/.ssh/authorized_keys\n# rm $file\n')),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://alvinalexander.com/linux-unix/how-use-scp-without-password-backups-copy/"}),"How to use the Linux \u2018scp\u2019 command without a password to make remote backups | alvinalexander.com"))),(0,a.kt)("h2",c({},{id:"linux-env-management"}),"linux env management"),(0,a.kt)("h3",c({},{id:"how-to-change-apt-source"}),"how to change apt source"),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://askubuntu.com/questions/104695/how-do-i-change-mirrors-in-ubuntu-server-from-regional-to-main"}),"command line - How do I change mirrors in Ubuntu Server from regional to main? - Ask Ubuntu"))),(0,a.kt)("h4",c({},{id:"resolution-1-manual-change-from-the-app-of-softwares--updates"}),"resolution 1: manual change from the App of ",(0,a.kt)("inlineCode",{parentName:"h4"},"Softwares & Updates")),(0,a.kt)("h4",c({},{id:"resolution-2-modify-the-configuration-manually-from-the-terminal"}),"resolution 2: modify the configuration manually from the terminal"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"CONCLUSION")),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),'MIRROR_FROM="us.archive.ubuntu.com"\nMIRROR_TO="mirrors.tuna.tsinghua.edu.cn"\nAPT_FILE="/etc/apt/sources.list"\nsudo sed -i "s|${MIRROR_FROM}|${MIRROR_TO}|g" ${APT_FILE}\n')),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"DETAIL")),(0,a.kt)("p",null,"There are a few mirror servers can be used in China:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"mirrors.tuna.tsinghua.edu.cn"),(0,a.kt)("li",{parentName:"ul"},"ftp.sjtu.edu.cn"),(0,a.kt)("li",{parentName:"ul"},"mirrors.aliyun.com"),(0,a.kt)("li",{parentName:"ul"},"mirrors.huaweicloud.com"),(0,a.kt)("li",{parentName:"ul"},"mirrors.yun-idc.com"),(0,a.kt)("li",{parentName:"ul"},"...")),(0,a.kt)("p",null,"The format of these mirrors may be as ",(0,a.kt)("inlineCode",{parentName:"p"},"http://${MIRROR_URL}/ubuntu/")),(0,a.kt)("p",null,"And the default configuration of ubuntu servers are at ",(0,a.kt)("inlineCode",{parentName:"p"},"/etc/apt/sources.list"),", with a copy of backup at ",(0,a.kt)("inlineCode",{parentName:"p"},"/etc/apt/sources.list.save"),"."),(0,a.kt)("p",null,"Here is what the ",(0,a.kt)("inlineCode",{parentName:"p"},"save")," contents are:"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-yaml"}),"// /etc/apt/sources.list.save\n#deb cdrom:[Ubuntu 18.04.6 LTS _Bionic Beaver_ - Release amd64 (20210915)]/ bionic main restricted\n\n# See http://help.ubuntu.com/community/UpgradeNotes for how to upgrade to\n# newer versions of the distribution.\ndeb http://us.archive.ubuntu.com/ubuntu/ bionic main restricted\n# deb-src http://us.archive.ubuntu.com/ubuntu/ bionic main restricted\n\n## Major bug fix updates produced after the final release of the\n## distribution.\ndeb http://us.archive.ubuntu.com/ubuntu/ bionic-updates main restricted\n# deb-src http://us.archive.ubuntu.com/ubuntu/ bionic-updates main restricted\n\n## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu\n## team. Also, please note that software in universe WILL NOT receive any\n## review or updates from the Ubuntu security team.\ndeb http://us.archive.ubuntu.com/ubuntu/ bionic universe\n# deb-src http://us.archive.ubuntu.com/ubuntu/ bionic universe\ndeb http://us.archive.ubuntu.com/ubuntu/ bionic-updates universe\n# deb-src http://us.archive.ubuntu.com/ubuntu/ bionic-updates universe\n\n## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu\n## team, and may not be under a free licence. Please satisfy yourself as to\n## your rights to use the software. Also, please note that software in\n## multiverse WILL NOT receive any review or updates from the Ubuntu\n## security team.\ndeb http://us.archive.ubuntu.com/ubuntu/ bionic multiverse\n# deb-src http://us.archive.ubuntu.com/ubuntu/ bionic multiverse\ndeb http://us.archive.ubuntu.com/ubuntu/ bionic-updates multiverse\n# deb-src http://us.archive.ubuntu.com/ubuntu/ bionic-updates multiverse\n\n## N.B. software from this repository may not have been tested as\n## extensively as that contained in the main release, although it includes\n## newer versions of some series which may provide useful features.\n## Also, please note that software in backports WILL NOT receive any review\n## or updates from the Ubuntu security team.\ndeb http://us.archive.ubuntu.com/ubuntu/ bionic-backports main restricted universe multiverse\n# deb-src http://us.archive.ubuntu.com/ubuntu/ bionic-backports main restricted universe multiverse\n\n## Uncomment the following two lines to add software from Canonical's\n## 'partner' repository.\n## This software is not part of Ubuntu, but is offered by Canonical and the\n## respective vendors as a service to Ubuntu users.\n# deb http://archive.canonical.com/ubuntu bionic partner\n# deb-src http://archive.canonical.com/ubuntu bionic partner\n\ndeb http://security.ubuntu.com/ubuntu bionic-security main restricted\n# deb-src http://security.ubuntu.com/ubuntu bionic-security main restricted\ndeb http://security.ubuntu.com/ubuntu bionic-security universe\n# deb-src http://security.ubuntu.com/ubuntu bionic-security universe\ndeb http://security.ubuntu.com/ubuntu bionic-security multiverse\n# deb-src http://security.ubuntu.com/ubuntu bionic-security multiverse\n")),(0,a.kt)("h3",c({},{id:"how-to-know-whats-the-os-platform"}),"how to know what's the os platform"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"# mac: Darwin\nuname\n\n# if platform is mac\nif [[ $(uname) == Darwin ]];\nthen XXX;\nelse YYY;\nfi;\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://stackoverflow.com/questions/3466166/how-to-check-if-running-in-cygwin-mac-or-linux"}),"bash - How to check if running in Cygwin, Mac or Linux? - Stack Overflow"))),(0,a.kt)("h3",c({},{id:"how-to-configure-python-environment"}),"how to configure python environment"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"install the python on the server, the version of which would better correspond with the one of the local in case of unexpected error caused by version difference"),(0,a.kt)("li",{parentName:"ol"},"use ",(0,a.kt)("inlineCode",{parentName:"li"},"virtualenv")," to create an env based on this python version named ",(0,a.kt)("inlineCode",{parentName:"li"},"venv_py")," under this working directory"),(0,a.kt)("li",{parentName:"ol"},"activate this env"),(0,a.kt)("li",{parentName:"ol"},"use ",(0,a.kt)("inlineCode",{parentName:"li"},"pip")," to install the ",(0,a.kt)("inlineCode",{parentName:"li"},"requirements.txt")),(0,a.kt)("li",{parentName:"ol"},"run!")),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"PY_VERSION=python3.9\n\n# install the target python version based on its version number\n# if you don't use these two lines, then you would suffer from `wget blablabla...` when you checked what the hell the python repo url is\nsudo apt install software-properties-common -y\nsudo add-apt-repository ppa:deadsnakes/ppa\nsudo apt install ${PY_VERSION}\n\n# use `virtualenv` to create and activate a new python env fast~\nsudo apt install virtualenv\nvirtualenv -p ${PY_VERSION} venv_py\nsource venv_py/bin/activate\n\n# install all the requirements\n# if you need to dump all the requirements of a python project used, you can use `pip freeze > requirements.txt` so that a file named of `requirements.txt` would be generated under the current directory\npip install -r requirements.txt\n\n# run our backend of `fastapi`\npython main.py\n")),(0,a.kt)("h3",c({},{id:"-cannot-use-sudo-apt-get-install-xxx-to-install-packages"}),"\u2705 cannot use ",(0,a.kt)("inlineCode",{parentName:"h3"},"sudo apt-get install xxx")," to install packages"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"cd /var/lib/dpkg/updates\nrm -rf ./*\n\nsudo apt-get update\n\nsudo apt-get disk-upgrade # it may cost a little of time\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("p",null,"I changed the suggestion in this article from ",(0,a.kt)("inlineCode",{parentName:"p"},"rm -r")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"rm -rf"),", otherwise not successful."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://www.codeprj.com/blog/a352621.html"}),"E:dpkg was interrupted, you must manually run'dpkg \u914d\u7f6e'to correct the problem. - \u7801\u4e0a\u5feb\u4e50"))),(0,a.kt)("p",null,"This discussion seems wonderful but didn't get my problem solved."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://askubuntu.com/questions/410045/the-package-lists-or-status-file-could-not-be-parsed-or-opened"}),'apt - "The package lists or status file could not be parsed or opened" - Ask Ubuntu'))),(0,a.kt)("h2",c({},{id:"linux-file-system-management"}),"linux file system management"),(0,a.kt)("h3",c({},{id:"mkdir-if-not-exist"}),"mkdir if not exist"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"mkdir -p DIR\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://pubs.opengroup.org/onlinepubs/009695399/utilities/mkdir.html"}),"mkdir"))),(0,a.kt)("h3",c({},{id:"ls-and-delete-files"}),"ls and delete files"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"ls | grep STR | xargs rm -f\n")),(0,a.kt)("p",null,"WARNING! Since the operation pipeline is silent, ",(0,a.kt)("a",c({parentName:"p"},{href:"https://stackoverflow.com/questions/20858524/delete-a-list-of-files-with-find-and-grep#:~:text=you%20are%20likely%20to%20remove%20files%20that%20you%20did%20not%20intend%20to%20remove"}),"you are likely to remove files that you did not intend to remove"),"."),(0,a.kt)("p",null,"Hence, you'd better use ",(0,a.kt)("inlineCode",{parentName:"p"},"ls | grep STR")," first to check whether all the files to remove meet your expectation."),(0,a.kt)("h3",c({},{id:"fastest-delete-file"}),"fastest delete file"),(0,a.kt)("p",null,"Don't bother checking if the file exists, just try to remove it."),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"rm -f PATH\n\nbrew install dialog\n# or\nrm PATH 2> /dev/null\n\nfind . -name 'test'\n\nif [ \"$BLEG\" != xxx ]; then command; fi\n\n")),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-py"}),'print("hello")\n')),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-ts"}),"interface Test {\n  name: string;\n}\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://stackoverflow.com/questions/31318068/shell-script-to-remove-a-file-if-it-already-exist/31318262"}),"shell script to remove a file if it already exist - Stack Overflow"))),(0,a.kt)("h3",c({},{id:"depreciated-how-to-show-absolute-path-of-file-from-relative"}),"DEPRECIATED: how to show absolute path of file from relative"),(0,a.kt)("p",null,"I cannot use ",(0,a.kt)("inlineCode",{parentName:"p"},"brew install realpath")," like their ",(0,a.kt)("inlineCode",{parentName:"p"},"apt install realpath"),", but I can use ",(0,a.kt)("inlineCode",{parentName:"p"},"realpath"),", which may be pre-built-in."),(0,a.kt)("p",null,"Plus, later I saw that maybe realpath is a submodule of mac package, which is named as ",(0,a.kt)("inlineCode",{parentName:"p"},"findutils"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"realpath FILE\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://stackoverflow.com/questions/4175264/how-to-retrieve-absolute-path-given-relative"}),"bash - How to retrieve absolute path given relative - Stack Overflow"))),(0,a.kt)("h3",c({},{id:"update-2022-02-05-how-to-show-absolute-path-of-file-from-relative"}),"UPDATE-2022-02-05: how to show absolute path of file from relative"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"brew install coreutils\nrealpath FILE\n")),(0,a.kt)("p",null,(0,a.kt)("img",c({parentName:"p"},{src:"https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-howto-1644071924987-9cc4405cfa1edb81803f05a7e6a842f6dba03a8cf1b35e9c187f5f1a5a5880db.png",alt:"picture 42"}))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"ref")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://stackoverflow.com/questions/3572030/bash-script-absolute-path-with-os-x"}),"macos - Bash script absolute path with OS X - Stack Overflow"))),(0,a.kt)("h3",c({},{id:"how-to-copy-file-into-clipboard"}),"how to copy file into clipboard"),(0,a.kt)("p",null,"core ref: ",(0,a.kt)("a",c({parentName:"p"},{href:"https://apple.stackexchange.com/a/15327"}),"https://apple.stackexchange.com/a/15327")),(0,a.kt)("h4",c({},{id:"its-easy-to-copy-a-text-file"}),"it's easy to copy a text file"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"# copy\npbcopy < FILE\n\n# paste to command line\npbpaste\n\n# paste to a new file\npbpaste > FILE2\n")),(0,a.kt)("p",null,"But attention, the ",(0,a.kt)("inlineCode",{parentName:"p"},"pbpaste")," would cause corruption when deals with binary file."),(0,a.kt)("h4",c({},{id:"but-it-cannot-be-done-for-a-binary-file"}),"but it cannot be done for a binary file"),(0,a.kt)("p",null,"Since the traditional ",(0,a.kt)("inlineCode",{parentName:"p"},"command + c | command + v")," is just copy the reference of file into clipboard, instead of the content itself, we had no way to use ",(0,a.kt)("inlineCode",{parentName:"p"},"pbcopy")," to copy a file, and then use ",(0,a.kt)("inlineCode",{parentName:"p"},"command + v")," to paste at another place."),(0,a.kt)("p",null,"A solution is to use osascript."),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-osascript"}),'#!/usr/bin/osascript\non run args\n  set abs_path to do shell script "/usr/local/bin/greadlink -f -- " & (first item of args)\n  set the clipboard to POSIX file abs_path\nend\n')),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://apple.stackexchange.com/questions/15318/how-to-use-terminal-to-copy-a-file-to-the-clipboard"}),"mac - How to use terminal to copy a file to the clipboard? - Ask Different"))),(0,a.kt)("h3",c({},{id:"how-to-show-file-size"}),"how to show file size"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"# -l show detail\n# -h show 'human readable size\nls -lh FILE/DIR\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://www.tutorialrepublic.com/faq/how-to-make-ls-command-to-show-file-sizes-in-megabytes-in-ubuntu.php"}),"How to Make ls Command to Show File Sizes in Megabytes in Ubuntu"))),(0,a.kt)("h3",c({},{id:"how-to-compare-between-files-diff--vimdiff"}),"how to compare between files (",(0,a.kt)("inlineCode",{parentName:"h3"},"diff")," & ",(0,a.kt)("inlineCode",{parentName:"h3"},"vimdiff"),")"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"see: ",(0,a.kt)("a",c({parentName:"li"},{href:"https://stackoverflow.com/questions/17195308/unix-diff-side-to-side-results"}),"bash - unix diff side-to-side results? - Stack Overflow"))),(0,a.kt)("p",null,"There is a few of ",(0,a.kt)("inlineCode",{parentName:"p"},"diff")," commands for us to choose."),(0,a.kt)("h4",c({},{id:"resolution-1-diff-f1-f2"}),"resolution 1: ",(0,a.kt)("inlineCode",{parentName:"h4"},"diff F1 F2")),(0,a.kt)("p",null,(0,a.kt)("img",c({parentName:"p"},{src:"https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-hwoto-1642517649112-cb2bf00d7a0d7d954fdc039c3862869a96a67c75fc4190101616cd5b3ad0495a.png",alt:"picture 9"}))),(0,a.kt)("h4",c({},{id:"resolution-2-diff--y-f1-f2-or-sdiff-f1-f2"}),"resolution 2: ",(0,a.kt)("inlineCode",{parentName:"h4"},"diff -y F1 F2")," or ",(0,a.kt)("inlineCode",{parentName:"h4"},"sdiff F1 F2")),(0,a.kt)("p",null,(0,a.kt)("img",c({parentName:"p"},{src:"https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-hwoto-1642517708938-fd8d1056dcc311fca0ff60316445a2fea77f670b4d7353cea9d6034775beb75a.png",alt:"picture 10"}))),(0,a.kt)("h4",c({},{id:"resolution-3-vimdiff-f1-f2"}),"resolution 3: ",(0,a.kt)("inlineCode",{parentName:"h4"},"vimdiff F1 F2")),(0,a.kt)("p",null,"It's awesome! Isn't it?"),(0,a.kt)("p",null,(0,a.kt)("img",c({parentName:"p"},{src:"https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-hwoto-1642517738027-4beec462aa9bda3ff2127c563de64a20d8703edc7774603372fce03807992a96.png",alt:"picture 12"}))),(0,a.kt)("h4",c({},{id:"todo-resolution-4-git-diff"}),"TODO: resolution 4: git diff"),(0,a.kt)("h3",c({},{id:"fixme-how-to-copymove-directory-files-correctly-to-soft-links-under-target-directory-without-affecting-git"}),"FIXME: how to copy/move directory files correctly to soft links under target directory without affecting git?"),(0,a.kt)("p",null,"example:"),(0,a.kt)("p",null,"When I zipped one modified ",(0,a.kt)("inlineCode",{parentName:"p"},"frameworks/native")," directory to be e.g. ",(0,a.kt)("inlineCode",{parentName:"p"},"RAW"),", and then reset the ",(0,a.kt)("inlineCode",{parentName:"p"},"frameworks/native")," to be the init."),(0,a.kt)("p",null,"Then I move all the files under ",(0,a.kt)("inlineCode",{parentName:"p"},"RAW")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"frameworks/native")," with the command:"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"cp -r RAW/* TARGET/frameworks/native/\n")),(0,a.kt)("p",null,"The error arose up since there are soft links under ",(0,a.kt)("inlineCode",{parentName:"p"},"frameworks/native"),", such as ",(0,a.kt)("inlineCode",{parentName:"p"},"libs/ui")," which is indeed ",(0,a.kt)("inlineCode",{parentName:"p"},"libs/ui -> XXX/ui"),"."),(0,a.kt)("p",null,"However, in my zipped file of ",(0,a.kt)("inlineCode",{parentName:"p"},"RAW"),", the links seemingly have turned to be the real files/dirs, which introduced the problem ",(0,a.kt)("inlineCode",{parentName:"p"},"directory --\x3e non-directory"),"."),(0,a.kt)("p",null,"The wanted effect is copying/moving all the files under conflicted directory to where they should be."),(0,a.kt)("p",null,"However, the git marked those files as ",(0,a.kt)("inlineCode",{parentName:"p"},"TypeChange"),"..."),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://superuser.com/questions/1395407/cp-cannot-overwrite-directory-with-non-directory/1395410"}),"linux - cp: cannot overwrite directory with non-directory - Super User"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://unix.stackexchange.com/questions/555985/cp-recursively-into-a-directory-that-symlinks-to-dirs-of-same-name-as-in-source"}),"cp recursively into a directory that symlinks to dirs of same name as in source - Unix & Linux Stack Exchange")))),(0,a.kt)("h2",c({},{id:"linux-disk-management"}),"linux disk management"),(0,a.kt)("h3",c({},{id:"ncdu-disk-space-tui"}),(0,a.kt)("inlineCode",{parentName:"h3"},"ncdu"),", disk space tui"),(0,a.kt)("h3",c({},{id:"baobab-disk-space-gui"}),(0,a.kt)("inlineCode",{parentName:"h3"},"baobab"),", disk space gui"),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://askubuntu.com/questions/73160/how-do-i-find-the-amount-of-free-space-on-my-hard-drive"}),"disk usage - How do I find the amount of free space on my hard drive? - Ask Ubuntu"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://formulae.brew.sh/formula/baobab"}),"baobab \u2014 Homebrew Formulae")))),(0,a.kt)("h4",c({},{id:"install-problem"}),"install problem"),(0,a.kt)("p",null,"When installing ",(0,a.kt)("inlineCode",{parentName:"p"},"ncdu"),", error ocurred: ",(0,a.kt)("a",c({parentName:"p"},{href:"https://stackoverflow.com/questions/44678437/no-such-file-or-directory-rb-sysopen-ruby"}),"No such file or directory @ rb_sysopen ruby - Stack Overflow")),(0,a.kt)("p",null,"The reason is that some dependency is missing, we can first install it and then install the target."),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"brew install librsvg\nbrew install baobab\n")),(0,a.kt)("h4",c({},{id:"effects"}),"effects"),(0,a.kt)("p",null,(0,a.kt)("img",c({parentName:"p"},{src:"https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-hwoto-1642600987157-8df330aac5a1fedd7d6c5f6d46f98256fedfcfa18b3f4f3ba05914fc06e19ac4.png",alt:"picture 7"}))),(0,a.kt)("h2",c({},{id:"linux-shells-management"}),"linux shells management"),(0,a.kt)("p",null,"ref:"),(0,a.kt)("p",null,"this article is enough and recommended:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://www.cyberciti.biz/faq/how-to-change-shell-to-bash/"}),"How To Change Shell To Bash in Linux / Unix - nixCraft"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://unix.stackexchange.com/questions/140286/how-to-find-list-of-available-shells-by-command-line"}),"How to find list of available shells by command-line? - Unix & Linux Stack Exchange"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://www.cyberciti.biz/tips/how-do-i-find-out-what-shell-im-using.html"}),"How do I find out what shell I am using on Linux/Unix? - nixCraft")))),(0,a.kt)("h3",c({},{id:"redirect-stdinstderr"}),"redirect stdin/stderr"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",c({parentName:"li"},{href:"https://unix.stackexchange.com/questions/440426/how-to-prefix-any-output-in-a-bash-script#comment796857_440426"}),"redirect stdin/err with prefix"))),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),'ECHO_PREFIX="[init]"\nexec > >(\n  trap "" INT TERM\n  sed \'s/^/\'"$ECHO_PREFIX"\' /\'\n)\nexec 2> >(\n  trap "" INT TERM\n  sed \'s/^/\'"$ECHO_PREFIX"\'(stderr) /\' >&2\n)\n')),(0,a.kt)("ol",c({},{start:2}),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",c({parentName:"li"},{href:"https://unix.stackexchange.com/questions/258799/how-do-i-turn-off-redirection-once-ive-turned-it-on"}),"reset redirecting"))),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"exec > /dev/tty\nexec 2> /dev/tty\n")),(0,a.kt)("h3",c({},{id:"fixed-bash-navigate-to-directory-without-cd"}),"FIXED: ",(0,a.kt)("inlineCode",{parentName:"h3"},"bash navigate to directory without cd")),(0,a.kt)("p",null,"!!!tip \u4e00\u5b9a\u8981\u641c\u7684\u51c6\uff01\u5426\u5219\u5927\u6982\u7387\u641c\u4e0d\u5230\uff01\u641c\u8fd9\u4e2a\u4e5f\u82b1\u4e86\u5341\u51e0\u5206\u949f\u7684\u2026\u2026"),(0,a.kt)("p",null,"add this line to your ",(0,a.kt)("inlineCode",{parentName:"p"},"~/.bashrc"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"shopt -s autocd\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://ostechnix.com/automatically-switch-directory-without-using-cd-command/#:~:text=You%20can%20now%20go%20to,any%20directory%20in%20the%20Terminal."}),"Switch To A Directory Without Using Cd Command in Linux - OSTechNix"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://blog.csdn.net/dengjin20104042056/article/details/100566309"}),"(1 \u6761\u6d88\u606f) \u3010Linux\u3011\u4e00\u6b65\u4e00\u6b65\u5b66 Linux\u2014\u2014shopt \u547d\u4ee4(214)","_","\u5d4c\u5165\u5f0f\u5f00\u53d1\u5de5\u7a0b\u5e08---\u6b22\u8fce\u5927\u5bb6\u4e00\u8d77\u4ea4\u6d41-CSDN \u535a\u5ba2")))),(0,a.kt)("h3",c({},{id:"shell-common-aliases"}),"shell common aliases"),(0,a.kt)("p",null,"!!!tip ",(0,a.kt)("inlineCode",{parentName:"p"},"cd -")," is very useful for switching back and forth"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),'# Easier directory navigation.\nalias ~="cd ~"\nalias .="cd .."\nalias ..="cd ../.."\nalias ...="cd ../../.."\nalias ....="cd ../../../.."\nalias cd..="cd .." # Typo addressed.\n')),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://dev.to/mrahmadawais/shell-aliases-for-easy-directory-navigation-onedevminute-30nm"}),"Shell Aliases For Easy Directory Navigation #OneDevMinute - DEV Community"))),(0,a.kt)("h3",c({},{id:"list-all-the-shells"}),"list all the shells"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"$ cat /etc/shells # list valid login shells\n/bin/sh\n/bin/bash\n/bin/rbash\n/bin/dash\n/bin/zsh\n/usr/bin/zsh\n")),(0,a.kt)("h3",c({},{id:"background-sh-is-different-with-bash"}),"background: ",(0,a.kt)("inlineCode",{parentName:"h3"},"sh")," is different with ",(0,a.kt)("inlineCode",{parentName:"h3"},"bash")),(0,a.kt)("p",null,"When I write ",(0,a.kt)("inlineCode",{parentName:"p"},"source")," in shell script, and run by ",(0,a.kt)("inlineCode",{parentName:"p"},"sh xx.sh"),", then it failed with ",(0,a.kt)("inlineCode",{parentName:"p"},"no permission"),"."),(0,a.kt)("p",null,"However, when I use ",(0,a.kt)("inlineCode",{parentName:"p"},"bash xx.sh"),", then everything runs well."),(0,a.kt)("p",null,"Thus, the ",(0,a.kt)("inlineCode",{parentName:"p"},"sh")," definitely doesn't equal as ",(0,a.kt)("inlineCode",{parentName:"p"},"bash"),", and it seems that function of ",(0,a.kt)("inlineCode",{parentName:"p"},"sh")," is the subset of ",(0,a.kt)("inlineCode",{parentName:"p"},"bash"),"."),(0,a.kt)("p",null,"If so, why I still need to use ",(0,a.kt)("inlineCode",{parentName:"p"},"sh"),"? Just for short?"),(0,a.kt)("img",{alt:"picture 8",src:"https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/1640152196813-linux-howto-84174e9e7dbb6fcc489b015f68e1c88b23fc19874bfcba40c3171f17cc8051a1.png",width:"480"}),(0,a.kt)("p",null,"ref: ",(0,a.kt)("a",c({parentName:"p"},{href:"https://stackoverflow.com/a/48785960/9422455"}),"https://stackoverflow.com/a/48785960/9422455")),(0,a.kt)("h3",c({},{id:"see-whats-the-current-shell"}),"see what's the current Shell"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"[1:42:41]:~$ echo $SHELL\n/usr/bin/zsh\n[1:43:25]:~$ echo $0\n/usr/bin/zsh\n[1:43:29]:~$ ps -p $$\n   PID TTY          TIME CMD\n 29657 pts/2    00:00:00 zsh\n")),(0,a.kt)("h3",c({},{id:"switch-shell"}),"switch shell"),(0,a.kt)("p",null,"You can change your default shell using the chsh (\u201cchange shell\u201d ) command as follows."),(0,a.kt)("p",null,"The syntax is:"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"# usage\nchsh\nchsh -s {shell-name-here}\nchsh -s {shell-name-here} {user-name-here}\n\n# samples\nchsh -s /bin/bash\nchsh -s /bin/bash $USER\n")),(0,a.kt)("h3",c({},{id:"set-zsh-as-default-shell"}),"set zsh as default shell"),(0,a.kt)("p",null,"see: ",(0,a.kt)("a",c({parentName:"p"},{href:"/docs/coding/OS/Mac/zsh-howto"}),"zsh-howto")),(0,a.kt)("h3",c({},{id:"how-to-prefix-any-output-in-a-bash-script"}),"how to prefix any output in a bash script?"),(0,a.kt)("p",null,"see: ",(0,a.kt)("a",c({parentName:"p"},{href:"https://unix.stackexchange.com/questions/440426/how-to-prefix-any-output-in-a-bash-script#comment796857_440426"}),"How to prefix any output in a bash script? - Unix & Linux Stack Exchange")),(0,a.kt)("h4",c({},{id:"resolution-1-use-function-easiest-but-side-effect"}),"resolution 1. use function: easiest but side effect"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"function echo() { /bin/echo $PREFIX$*; }\n")),(0,a.kt)("p",null,"But this would affect the ",(0,a.kt)("inlineCode",{parentName:"p"},"echo XXX >> FILE"),", since we doesn't want to change the content to write into file."),(0,a.kt)("h4",c({},{id:"recommended-resolution-2-redirect-stdinerr"}),"RECOMMENDED: resolution 2. redirect stdin/err"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"exec > >(trap \"\" INT TERM; sed 's/^/foo: /')\nexec 2> >(trap \"\" INT TERM; sed 's/^/foo: (stderr) /' >&2)\n")),(0,a.kt)("p",null,"This is my recommended resolution since it only affects the stdin/err."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"result")),(0,a.kt)("p",null,(0,a.kt)("img",c({parentName:"p"},{src:"https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/general-howto-1643958401451-415c243209f2d1c85e94139c6c1850c5720f364be1be5c9210c78c573eb21b1b.png",alt:"picture 23"}))),(0,a.kt)("p",null,(0,a.kt)("img",c({parentName:"p"},{src:"https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/general-howto-1643958220574-b93cd09053ad7978f8b6ec09fa40dfb679bd517a9af6440b2c4a3eb443e99380.png",alt:"picture 22"}))),(0,a.kt)("h3",c({},{id:"-the-terminal-cannot-up-down-after-editing"}),"\u2705 the terminal cannot up down after editing"),(0,a.kt)("p",null,"This is a problem confused me for a long time."),(0,a.kt)("p",null,"Today, I finally knows what's the hell at: ",(0,a.kt)("a",c({parentName:"p"},{href:"https://stackoverflow.com/questions/18489216/how-to-scroll-up-and-down-in-sliced-screen-terminal"}),'linux - How to scroll up and down in sliced "screen" terminal - Stack Overflow')),(0,a.kt)("p",null,"Anyway, terminal is hard to learn, I just know ",(0,a.kt)("inlineCode",{parentName:"p"},"control + a")," can help me exit the so-called copy mode."),(0,a.kt)("h3",c({},{id:"todo-bind-option--arrow-to-jump-word-in-zsh-on-ubuntu-vmware-on-macos"}),"TODO: bind ",(0,a.kt)("inlineCode",{parentName:"h3"},"option + arrow")," to jump word in zsh on ubuntu vmware on MacOS"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"ref")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u2728 ",(0,a.kt)("a",c({parentName:"li"},{href:"https://help.ubuntu.com/stable/ubuntu-help/shell-keyboard-shortcuts.html.en"}),"Useful keyboard shortcuts")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://www.google.com/search?newwindow=1&sxsrf=AOaemvJocqqP64PM0tOaO5QuVGhGgwR1kw%3A1643272448532&lei=AFnyYY_8H8G4mAWLj7C4Cg&q=zsh%20jump%20word&ved=2ahUKEwiP_MD0wtH1AhVBHKYKHYsHDKcQsKwBKAN6BAg-EAQ&biw=1629&bih=945&dpr=2.2"}),"zsh jump word - Google Search")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://superuser.com/questions/427163/altarrow-moving-between-words-in-zsh-and-iterm2"}),"keyboard shortcuts - ALT+arrow moving between words in zsh and iTerm2 - Super User")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://support.apple.com/en-hk/guide/terminal/trmlshtcts/mac"}),"Keyboard shortcuts in Terminal on Mac - Apple Support (HK)")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://superuser.com/questions/349439/how-to-bind-command-key-in-zsh"}),"key binding - How to bind command key in zsh? - Super User")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://gist.github.com/YumaInaura/27bb1f79881a63bed2fb9635cbaed73b"}),"Zsh \u2014 Mac OS option key for bindkey")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://www.google.com/search?q=what+key+i%27m+pressing&oq=what+key+i+am&aqs=chrome.1.69i57j0i10j0i22i30l8.6503j0j4&sourceid=chrome&ie=UTF-8"}),"what key i'm pressing - Google Search")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://en.key-test.ru/"}),'"Key-Test" - keyboard test online')),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://unix.stackexchange.com/questions/58870/ctrl-left-right-arrow-keys-issue"}),"zsh - Ctrl + left/right arrow keys issue - Unix & Linux Stack Exchange")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://stackoverflow.com/questions/12382499/looking-for-altleftarrowkey-solution-in-zsh"}),"shell - Looking for ALT+LeftArrowKey solution in zsh - Stack Overflow")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://unix.stackexchange.com/questions/94331/how-can-i-delete-a-word-backward-at-the-command-line-bash-and-zsh"}),"keyboard shortcuts - How can I delete a word backward at the command line (bash and zsh)? - Unix & Linux Stack Exchange")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://askubuntu.com/questions/1017287/how-to-delete-words-in-the-terminal-with-ctrl-backspace-like-in-the-rest-of-ubun"}),"command line - How to delete words in the terminal with Ctrl-Backspace like in the rest of Ubuntu? - Ask Ubuntu")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://askubuntu.com/questions/162247/why-does-ctrl-left-arrow-not-skip-words"}),"12.04 - Why does ctrl + left arrow not skip words? - Ask Ubuntu"))),(0,a.kt)("h3",c({},{id:"how-to-clear-broken-soft-links"}),"how to clear broken soft links"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"# TODO: [UNDERSTAND] remove all broken soft links in the current directory\nfind -L . -name . -o -type d -prune -o -type l -exec rm {} +\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"result")),(0,a.kt)("p",null,(0,a.kt)("img",c({parentName:"p"},{src:"https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-howto-1643962824307-0b5ff2544be91cdb7a591f6b94322d0823537a3c5e4aec1d1258c72e2e0c886f.png",alt:"picture 24"}))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"ref")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://stackoverflow.com/questions/22097130/delete-all-broken-symbolic-links-with-a-line"}),"bash - Delete all broken symbolic links with a line? - Stack Overflow"))),(0,a.kt)("h2",c({},{id:"linux-commands-management"}),"linux commands management"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u26a0\ufe0f"),(0,a.kt)("ol",{parentName:"blockquote"},(0,a.kt)("li",{parentName:"ol"},"be careful to use `","`","` in terminal / shell since it's would be treated as executable commands: ",(0,a.kt)("img",{alt:"picture 9",src:"https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-hwoto-1641501462043-6790c46051fa5db1246b560e795c5b1737d5e508faf7a9247b1c52e1ce4abdbc.png"}),(0,a.kt)("br",{parentName:"li"}),"see: ",(0,a.kt)("a",c({parentName:"li"},{href:"https://blog.csdn.net/Luckiers/article/details/103501168"}),"(20 \u6761\u6d88\u606f) shell \u57fa\u7840\u77e5\u8bc6-echo \u53ca\u5355\u5f15\u53f7\u3001\u53cd\u5f15\u53f7\u548c\u53cc\u5f15\u53f7\u8be6\u89e3","_","Luckiers \u7684\u535a\u5ba2-CSDN \u535a\u5ba2","_","echo \u5355\u5f15\u53f7\u548c\u53cc\u5f15\u53f7")))),(0,a.kt)("h3",c({},{id:"how-to-check-fileproject-size"}),"how to check file/project size"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"using ",(0,a.kt)("inlineCode",{parentName:"li"},"find"))),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),'function checkFileSizesOfType() {\n    find . -not -path "./.history/*" -not -path "**/node_modules/*" -name "*.$1" -type f -exec ls -al {} \\; | sort -k5 -rn | sed \'s/ \\+/\\t/g\' | cut -f 9\n}\n')),(0,a.kt)("ol",c({},{start:2}),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"using ",(0,a.kt)("inlineCode",{parentName:"p"},"ncdu"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"using ",(0,a.kt)("inlineCode",{parentName:"p"},"baobab")))),(0,a.kt)("h3",c({},{id:"linux-quotes"}),"linux quotes"),(0,a.kt)("p",null,"\u975e\u5e38\u7ecf\u5178\u7684\u6587\u7ae0\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://www.grymoire.com/Unix/Quote.html"}),"UNIX Shell Quotes - a simple tutorial"))),(0,a.kt)("p",null,"\u9006\u5929\u7684\u4e94\u5f15\u53f7\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://stackoverflow.com/questions/1250079/how-to-escape-single-quotes-within-single-quoted-strings"}),"bash - How to escape single quotes within single quoted strings - Stack Overflow"))),(0,a.kt)("h3",c({},{id:"pip-uninstall-multi-packages"}),"pip uninstall multi packages"),(0,a.kt)("p",null,"scenario:"),(0,a.kt)("p",null,(0,a.kt)("img",c({parentName:"p"},{src:"https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-howto-1656146275078-576942a994df0141296e78f05af3cc20df82aafef4960ddc02a5cacbf9defbfb.png",alt:"picture 12"}))),(0,a.kt)("p",null,"requirements:"),(0,a.kt)("p",null,"uninstall all the packages of name starting with ",(0,a.kt)("inlineCode",{parentName:"p"},"pyobjc"),"."),(0,a.kt)("p",null,"solution:"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"grep pyobj requirements.txt | gsed 's/==.*//g' | xargs pip uninstall --yes\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"xargs: ",(0,a.kt)("a",c({parentName:"p"},{href:"https://stackoverflow.com/questions/6178498/using-grep-and-sed-to-find-and-replace-a-string"}),"linux - Using grep and sed to find and replace a string - Stack Overflow"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"auto yes: ",(0,a.kt)("a",c({parentName:"p"},{href:"https://superuser.com/questions/816143/how-to-run-pip-in-non-interactive-mode"}),"linux - How to run pip in non-interactive mode? - Super User")))),(0,a.kt)("h3",c({},{id:"ternary-operator-\u4e09\u5143\u8fd0\u7b97\u7b26\u77ed\u8def\u8fd0\u7b97\u7b26avar-default"}),"Ternary operator (\u4e09\u5143\u8fd0\u7b97\u7b26)\u3001\u77ed\u8def\u8fd0\u7b97\u7b26\uff08",(0,a.kt)("inlineCode",{parentName:"h3"},"a=${VAR:-DEFAULT}"),"\uff09"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://stackoverflow.com/questions/3953645/ternary-operator-in-bash"}),"syntax - Ternary operator (?:) in Bash - Stack Overflow"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://blog.csdn.net/kouryoushine/article/details/92838138"}),"(1 \u6761\u6d88\u606f) Shell \u548c Bash \u4e2d\u7684\u4e09\u5143\u8fd0\u7b97\u7b26\uff0c\u63a7\u5236 log \u6253\u5370\u65f6\u95f4","_","kouryoushine \u7684\u535a\u5ba2-CSDN \u535a\u5ba2","_","shell \u4e09\u5143\u8fd0\u7b97")))),(0,a.kt)("h3",c({},{id:"-----"}),(0,a.kt)("inlineCode",{parentName:"h3"},"|")," , ",(0,a.kt)("inlineCode",{parentName:"h3"},"||"),", ",(0,a.kt)("inlineCode",{parentName:"h3"},"&"),", ",(0,a.kt)("inlineCode",{parentName:"h3"},"&&"),", ",(0,a.kt)("inlineCode",{parentName:"h3"},";")),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"A | B   # \u7ba1\u9053\uff01\nA & B   # \u5e76\u884c\n\nA && B  # \u5f53A\u6210\u529f\u540e\u7ee7\u7eed\u8fd0\u884cB\nA || B  # \u5f53A\u5931\u8d25\u540e\u7ee7\u7eed\u8fd0\u884cB\nA; B;   # \u65e0\u8bbaA\u662f\u5426\u6210\u529f\uff0c\u4e4b\u540e\u7ee7\u7eed\u8fd0\u884cB\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://stackoverflow.com/questions/33484156/running-asynchronous-shell-commands-inside-a-synchronous-one-i-e-wait-for-resu"}),"Running asynchronous shell commands inside a synchronous one, i.e. wait for result - Stack Overflow"))),(0,a.kt)("h3",c({},{id:"-and-"}),(0,a.kt)("inlineCode",{parentName:"h3"},"&&")," and ",(0,a.kt)("inlineCode",{parentName:"h3"},";")),(0,a.kt)("p",null,(0,a.kt)("img",c({parentName:"p"},{src:"https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-howto-1644302136920-9459b3ac865f4e744a50bcefb0917e40b4f68d4b2d8f0c0e28befc62c4488a62.png",alt:"picture 17"}))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"ref")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://unix.stackexchange.com/questions/37069/what-is-the-difference-between-and-when-chaining-commands"}),'bash - What is the difference between "&&" and ";" when chaining commands - Unix & Linux Stack Exchange'))),(0,a.kt)("h3",c({},{id:"alias-vs-variable"}),(0,a.kt)("inlineCode",{parentName:"h3"},"alias")," vs ",(0,a.kt)("inlineCode",{parentName:"h3"},"variable")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("inlineCode",{parentName:"p"},"alias")," is used for executable command, while variable is a variable, so if we want to use alias as a variable, we should first define a variable of the same name.")),(0,a.kt)("h4",c({},{id:"auto-translate"}),"auto-translate"),(0,a.kt)("p",null,"!!!warning Don't use ",(0,a.kt)("inlineCode",{parentName:"p"},"~")," as the user dir, since it can't be auto translated as the sub variable. e.g."),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{}),"```sh\nexport a10=~/android\nexport n10=$a10/xxx\n```\n\nThe first `ls $a10`, and enter `TAB` is ok; while the `ls $n10` and enter `TAB` not, since it would translate to be `\\~/android` which has an extra `\\` before.\n")),(0,a.kt)("p",null,(0,a.kt)("img",c({parentName:"p"},{src:"https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-howto-1644305042688-43cf62d9c0740692f1a7192cbee01384ec36b1a6477f8094f3830d2544e9d091.png",alt:"picture 18"}))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"sample")),(0,a.kt)("p",null,(0,a.kt)("img",c({parentName:"p"},{src:"https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-howto-1644293316229-a14a79513359e9dbe269db3bc46a7fb55d13405666920f93f4b2af131c52f298.png",alt:"picture 11"}))),(0,a.kt)("p",null,"see: - ",(0,a.kt)("a",c({parentName:"p"},{href:"https://askubuntu.com/questions/364843/alias-substitution-for-a-string-to-use-it-in-a-terminal-command"}),"bash - Alias substitution for a string to use it in a terminal command - Ask Ubuntu")),(0,a.kt)("h4",c({},{id:"bugfix-alias-in-script-file-cant-use-in-the-outer-shell"}),"bugfix: alias in script file can't use in the outer shell"),(0,a.kt)("p",null,"!!!warning We should use ",(0,a.kt)("inlineCode",{parentName:"p"},"source xx.sh")," rather than ",(0,a.kt)("inlineCode",{parentName:"p"},"sh xx.sh")," in order to make variables/aliases work in the outer shell since ",(0,a.kt)("inlineCode",{parentName:"p"},"sh")," would create a sub shell while ",(0,a.kt)("inlineCode",{parentName:"p"},"source")," not."),(0,a.kt)("p",null,"see:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://blog.csdn.net/hongchangfirst/article/details/78912188"}),"(1 \u6761\u6d88\u606f) Linux source \u547d\u4ee4\u89e3\u51b3 alias not found issue_hongchangfirst-CSDN \u535a\u5ba2"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://stackoverflow.com/questions/2197461/how-to-set-an-alias-inside-a-bash-shell-script-so-that-is-it-visible-from-the-ou"}),"How to set an alias inside a bash shell script so that is it visible from the outside? - Stack Overflow")))),(0,a.kt)("h3",c({},{id:"incremental-variable"}),"incremental variable"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"var=$((var+1))\n\n((var=var+1))\n\n((var+=1))\n\n((var++))\n")),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),'var=0\n\nwhile true\ndo echo "seconds $((++var))"\nsleep 1\ndone\n')),(0,a.kt)("p",null,(0,a.kt)("img",c({parentName:"p"},{src:"https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-howto-1644421784774-8ad0810a0e1de0e8ec8d02849ba64806d7bafbad9688161804d0c2865b839452.png",alt:"picture 48"}))),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://askubuntu.com/questions/385528/how-to-increment-a-variable-in-bash"}),"How to increment a variable in bash? - Ask Ubuntu"))),(0,a.kt)("h3",c({},{id:"conditions"}),"conditions"),(0,a.kt)("p",null,"see: \u2728\u2728\u2728 very good article: ",(0,a.kt)("a",c({parentName:"p"},{href:"https://acloudguru.com/blog/engineering/conditions-in-bash-scripting-if-statements"}),"Bash If Statements and Scripting - Linux Cheat Sheet | A Cloud Guru")),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"# simple executing commands:\nif [ $foo -ge 3 ]; then     # resolution 1\nif test $foo -ge 3; then    # resolution 2\n\n# check file existed\nif [ -f regular-file ]; then\n\n# check file readable\nif [ -r readable-file]; then\n\n\n")),(0,a.kt)("h4",c({},{id:"sample-of-testing-file-readable-and-read"}),"sample of testing file readable and read"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"if [ -r somefile ];  then\n    content=$(cat somefile)\nelif [ -f somefile ]; then\n    echo \"The file 'somefile' exists but is not readable to the script.\"\nelse\n    echo \"The file 'somefile' does not exist.\"\nfi\n")),(0,a.kt)("h4",c({},{id:"\u5728\u6761\u4ef6\u4e2d\u6267\u884c\u67d0\u4e9b\u8bed\u53e5\u8981\u7528--condition-"}),"\u5728\u6761\u4ef6\u4e2d\u6267\u884c\u67d0\u4e9b\u8bed\u53e5\u8981\u7528 ",(0,a.kt)("inlineCode",{parentName:"h4"},"(( CONDITION ))")),(0,a.kt)("h3",c({},{id:"how-to-auto-input-in-command"}),"how to auto input in command"),(0,a.kt)("h4",c({},{id:"auto-input-password-for-sudo-commands"}),"auto input password for sudo commands"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"sparkles: Use ",(0,a.kt)("inlineCode",{parentName:"p"},"sudo -S")," to read input from stdin.")),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),'# no password / no secret for sudo\necho "$USER ALL=(ALL:ALL) NOPASSWD: ALL" | sudo tee -a /etc/sudoers.d/$USER \n')),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://superuser.com/questions/67765/sudo-with-password-in-one-command-line"}),"shell - sudo with password in one command line? - Super User"))),(0,a.kt)("h4",c({},{id:"auto-yes-for-some-command-yes--"}),"auto yes for some command (",(0,a.kt)("inlineCode",{parentName:"h4"},"yes | "),")"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"# usage\nyes | COMMAND\n\n# example\nyes | sh ./install.sh # e.g. install oh-my-zsh\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://stackoverflow.com/questions/7642674/how-do-i-script-a-yes-response-for-installing-programs/34176780"}),'linux - How do I script a "yes" response for installing programs? - Stack Overflow'))),(0,a.kt)("h4",c({},{id:"auto-yes-for-apt-installing-packages--y"}),"auto yes for ",(0,a.kt)("inlineCode",{parentName:"h4"},"apt")," installing packages (",(0,a.kt)("inlineCode",{parentName:"h4"},"-y"),")"),(0,a.kt)("p",null,"Just add a ",(0,a.kt)("inlineCode",{parentName:"p"},"-y")," in the command."),(0,a.kt)("p",null,"Example:"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"sudo apt install -y htop\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://askubuntu.com/questions/448358/apt-get-install-with-assume-yes-is-still-prompting-me-to-install-dependencies"}),"apt-get install with --assume-yes is still prompting me to install dependencies - Ask Ubuntu"))),(0,a.kt)("h3",c({},{id:"how-to-search-commands-by-prefix-history-search-backwardforward"}),"how to search commands by prefix (",(0,a.kt)("inlineCode",{parentName:"h3"},"history-search-backward/forward"),")"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-yaml"}),'# ~/.inputrc\n\n# Respect default shortcuts.\n$include /etc/inputrc\n\n# choice 1: recommended\n"\\e[A": history-search-backward     # arrow up      --\x3e backward\n"\\e[B": history-search-forward      # arrow down    --\x3e forward\n\n# choice 2: if prefer to the page up/down\n"\\e[5~": history-search-backward    # page up       --\x3e backward\n"\\e[6~": history-search-forward     # page down     --\x3e forward\n')),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},";warning: you should ",(0,a.kt)("strong",{parentName:"p"},"Close and re-open all terminals for the new behavior to become effective."))),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://askubuntu.com/a/59855"}),"https://askubuntu.com/a/59855"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://unix.stackexchange.com/questions/231605/search-for-a-previous-command-with-the-prefix-i-just-typed"}),"bash - Search for a previous command with the prefix I just typed - Unix & Linux Stack Exchange")))),(0,a.kt)("h3",c({},{id:"how-to-repeat-command"}),"how to repeat command"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"#  only show the last result\nwatch -n X command # X: X seconds; command may need quotes\n\n# show all the result history\nwhile true; do command; sleep X; done; # command may need quotes\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://askubuntu.com/questions/430382/repeat-a-command-every-x-interval-of-time-in-terminal"}),"bash - Repeat a command every x interval of time in terminal? - Ask Ubuntu"))),(0,a.kt)("h3",c({},{id:"how-to-use-variable-as-multi-args"}),"how to use variable as multi args"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"# when there's only one arg as a variable, it's ok to directly use it, and the following two methods are equal\nPACKAGE_TO_INSTALL=\"vim\"\nPACKAGE_TO_INSTALL=vim\nsudo apt install -y $PACKAGE_TO_INSTALL\n\n# However, if there are multi args as a variable, we need to use [`echo`](https://stackoverflow.com/a/30061925/9422455) to escape the 'hidden quotes' if I didn't understand wrongly. And also, the quotes can't be omitted, or use slashes.\nPACKAGES_TO_INSTALL=\"vim git htop zsh terminator\"\nPACKAGES_TO_INSTALL=vim\\ git\\ htop\\ zsh\\ terminator\nsudo apt install -y $(echo $INSTALLED_PACKAGES)\n\n# Since the `echo` is not safe, another way is to use [`xargs`](https://stackoverflow.com/a/51242645/9422455), which seems more professional\nPACKAGES_TO_INSTALL=\"vim git htop zsh terminator\"\necho $PACKAGE_TO_INSTALL | xargs sudo apt install -y\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://stackoverflow.com/questions/9733338/shell-script-remove-first-and-last-quote-from-a-variable"}),'string - Shell script - remove first and last quote (") from a variable - Stack Overflow'))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://stackoverflow.com/questions/30061682/bash-send-string-argument-as-multiple-arguments"}),"bash send string argument as multiple arguments - Stack Overflow"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://unix.stackexchange.com/questions/637496/escaping-quotes-inside-a-quoted-string"}),"shell - Escaping quotes inside a quoted string - Unix & Linux Stack Exchange"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"http://mywiki.wooledge.org/BashFAQ/050"}),"BashFAQ/050 - Greg's Wiki"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://stackoverflow.com/questions/5819423/bash-variables-with-spaces"}),"Bash variables with spaces - Stack Overflow"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://unix.stackexchange.com/questions/327784/how-to-assign-a-string-with-multiple-spaces-to-a-variable-in-bash"}),"shell script - How to assign a string with multiple spaces to a variable in bash? - Unix & Linux Stack Exchange"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://stackoverflow.com/questions/7454526/variable-containing-multiple-args-with-quotes-in-bash"}),"Variable containing multiple args with quotes in Bash - Stack Overflow")))),(0,a.kt)("h3",c({},{id:"how-to-set-an-alias"}),"how to set an alias"),(0,a.kt)("h4",c({},{id:"resolution-1-in-terminal"}),"resolution 1: in terminal"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u26a0\ufe0f this solution only works upon the next command, which can work immediately when executed in shell script file")),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"# don't add any other characters after alias in order to catch bug\nalias sed=gsed\n")),(0,a.kt)("h4",c({},{id:"resolution-2-write-into-bash_aliases"}),"resolution 2: write into ",(0,a.kt)("inlineCode",{parentName:"h4"},"~/.bash_aliases")),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"# ~/.bash_aliases\nalias update='sudo yum update'\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u26a0\ufe0f this solution needs to ensure the ",(0,a.kt)("inlineCode",{parentName:"p"},".bash_aliases")," enabled in ",(0,a.kt)("inlineCode",{parentName:"p"},".bashrc"))),(0,a.kt)("p",null,(0,a.kt)("img",c({parentName:"p"},{src:"https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-howto-1643117544205-afe713493b26becfe498fda953bdc5c1d098accaf07b4e4b6b5e117b4d3671a1.png",alt:"picture 47"}))),(0,a.kt)("h4",c({},{id:"-resolution-3-use-bash_aliases-with-zsh"}),"\u2728 resolution 3: use ",(0,a.kt)("inlineCode",{parentName:"h4"},".bash_aliases")," with ",(0,a.kt)("inlineCode",{parentName:"h4"},"zsh")),(0,a.kt)("p",null,"Just add one line in ",(0,a.kt)("inlineCode",{parentName:"p"},"~/.zshrc"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"# ~/.zshrc\nsource ~/.bash_aliases\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://www.cyberciti.biz/faq/create-permanent-bash-alias-linux-unix/"}),"How to create a permanent Bash alias on Linux/Unix - nixCraft"))),(0,a.kt)("h4",c({},{id:"unalias"}),"unalias"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"# sample\nunalias logout\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://www.tecmint.com/create-alias-in-linux/"}),"How to Create and Use Alias Command in Linux"))),(0,a.kt)("h3",c({},{id:"how-to-compare-between-outputs-from-two-commands"}),"how to compare between outputs from two commands"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"diff <(ls old) <(ls new)\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://askubuntu.com/questions/229447/how-do-i-diff-the-output-of-two-commands"}),"How do I diff the output of two commands? - Ask Ubuntu"))),(0,a.kt)("h3",c({},{id:"how-to-check-if-a-string-contains-another-string"}),"how to check if a string contains another string"),(0,a.kt)("p",null,"see:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://linuxize.com/post/how-to-check-if-string-contains-substring-in-bash/"}),"How to Check if a String Contains a Substring in Bash | Linuxize"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://stackoverflow.com/questions/229551/how-to-check-if-a-string-contains-a-substring-in-bash"}),"How to check if a string contains a substring in Bash - Stack Overflow")))),(0,a.kt)("h4",c({},{id:"using-"}),"using ",(0,a.kt)("inlineCode",{parentName:"h4"},"==")),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),'# resolution 1. using "=="\n[[ $a == z* ]]   # True if $a starts with a "z" (wildcard matching).\n[[ $a == "z*" ]] # True if $a is equal to z* (literal matching).\n\n# resolution 2. using "==" when has spaces\n[[ $a == "z a"* ]] # True if $a starts with a "z a"\n')),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"ref")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://stackoverflow.com/questions/2172352/in-bash-how-can-i-check-if-a-string-begins-with-some-value"}),"In Bash, how can I check if a string begins with some value? - Stack Overflow"))),(0,a.kt)("h4",c({},{id:"-using-grep"}),"\u2728 using ",(0,a.kt)("inlineCode",{parentName:"h4"},"grep")),(0,a.kt)("p",null,"e.g. if we want to match '-gen-index' as a pattern."),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"==")," resolution may be as easy as: ",(0,a.kt)("inlineCode",{parentName:"p"},"[ $0 == -gen-index ]")),(0,a.kt)("p",null,"However, in ",(0,a.kt)("inlineCode",{parentName:"p"},"grep"),", things came a little tricky."),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"# resolution 1. using regex with escape\ngrep '\\-gen-index' <<< '-gen-index-xxx'\n\n# resolution 2. using fixed string with forcing recognizing the following string as a pattern\ngrep -F -e '-gen-index' <<< '-gen-index-xxx'\n\n# if we missed the `-e`, then it would cause error, since it supposes the `-g...` is args\n")),(0,a.kt)("p",null,(0,a.kt)("img",c({parentName:"p"},{src:"https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-howto-1643980881788-43e4da7276c3547c212039e614d0b5c98d293bf0074786099aad0c9e67578706.png",alt:"picture 6"}))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"ref")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://unix.stackexchange.com/questions/387408/how-to-match-a-string-containing-the-character-with-grep"}),'bash - How to match a string containing the character "$" with grep? - Unix & Linux Stack Exchange'))),(0,a.kt)("h2",c({},{id:"linux-accounts-management"}),"linux accounts management"),(0,a.kt)("h3",c({},{id:"how-to-create-user"}),"how to create user"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"# create user with a home directory\nsudo useradd -m {USERNAME}\nls -la /home/{USERNAME}\n\n\n# create user [under root]\nsudo useradd USERNAME\n\n# create passwd [under root]\nsudo passwd USERNAME\n\n")),(0,a.kt)("h3",c({},{id:"how-to-log-out"}),"how to log out"),(0,a.kt)("h4",c({},{id:"resolution-1-1110-and-above"}),"resolution 1 (11.10 and above)"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"gnome-session-quit\n")),(0,a.kt)("h4",c({},{id:"resolution-2"}),"resolution 2"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"sudo pkill -u $USER\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://askubuntu.com/questions/15795/how-can-you-log-out-via-the-terminal"}),"command line - How can you log out via the terminal? - Ask Ubuntu"))),(0,a.kt)("h3",c({},{id:"set-a-shorter-password-for-ubuntu"}),"set a shorter password for ubuntu"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"sudo passwd <USER>\n")),(0,a.kt)("p",null,(0,a.kt)("img",c({parentName:"p"},{src:"https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-hwoto-1642479990429-35424184b62d147dc0744f2bcb9bca97f27b9efc9df47373a458c76442b30003.png",alt:"picture 7"}))),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"ref:"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://askubuntu.com/questions/180402/how-to-set-a-short-password-on-ubuntu"}),"https://askubuntu.com/questions/180402/how-to-set-a-short-password-on-ubuntu"))))),(0,a.kt)("h2",c({},{id:"linux-net-management"}),"linux net management"),(0,a.kt)("h3",c({},{id:"how-to-know-my-public-ip-address"}),"how to know my public ip address"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"resolution 1:")),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"# https://apple.stackexchange.com/questions/20547/how-do-i-find-my-ip-address-from-the-command-line\ncurl ifconfig.me\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"resolution 2:")),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"# https://www.digitalocean.com/community/tutorials/how-to-configure-remote-access-for-mongodb-on-ubuntu-20-04#:~:text=curl%20%2D4%20icanhazip.com\ncurl -4 icanhazip.com\n")),(0,a.kt)("h3",c({},{id:"how-to-monitor-network-traffic"}),"how to monitor network traffic"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"sudo apt install nethogs\n\nsudo nethogs\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://stackoverflow.com/questions/368002/network-usage-top-htop-on-linux"}),"networking - Network usage top/htop on Linux - Stack Overflow"))),(0,a.kt)("h3",c({},{id:"fixme-check-proxy"}),"FIXME: check proxy"),(0,a.kt)("p",null,"In ",(0,a.kt)("a",c({parentName:"p"},{href:"https://releases.ubuntu.com/18.04/"}),"Ubuntu 18.04.6 LTS (Bionic Beaver)"),", it introduced two methods to see what/which proxies are we using:"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"## approach 1\necho $http_proxy\n\n## approach 2\nenv | grep -i proxy\n")),(0,a.kt)("p",null,"However, when I configured the proxies in ",(0,a.kt)("inlineCode",{parentName:"p"},"Manual Proxy"),", I am surprised to find nothing using either commands in the above, while the ping to ",(0,a.kt)("inlineCode",{parentName:"p"},"google.com")," does work so that I use it as the measure then."),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"ping google.com\n")),(0,a.kt)("p",null,"And another wield thing is before the system was restarted, the ",(0,a.kt)("inlineCode",{parentName:"p"},"env | grep -i proxy")," even shows duplicated results and the change in ",(0,a.kt)("inlineCode",{parentName:"p"},"Manual Proxy")," doesn't work, which is quite confusing."),(0,a.kt)("p",null,"Maybe we can do more tests later."),(0,a.kt)("h2",c({},{id:"linux-datetime-management"}),"linux date/time management"),(0,a.kt)("h3",c({},{id:"how-to-format-date"}),"how to format date"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u26a0\ufe0f"),(0,a.kt)("ol",{parentName:"blockquote"},(0,a.kt)("li",{parentName:"ol"},"the space in formatter should be using ",(0,a.kt)("inlineCode",{parentName:"li"},"\\ ")," or anything other ways"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"date"),"\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u4e0d\u662f\u53d8\u91cf\uff0c\u53d8\u91cf\u91c7\u7528",(0,a.kt)("inlineCode",{parentName:"li"},"$XX"),"\u6216\u8005",(0,a.kt)("inlineCode",{parentName:"li"},"${XX}"),"\u7684\u5f62\u5f0f\uff0c\u4f46\u662f\u51fd\u6570\u8981\u7528",(0,a.kt)("inlineCode",{parentName:"li"},"$(XX)"),"\uff0c\u5e76\u4e14\u4e0d\u80fd\u5728\u5b57\u7b26\u4e32\u4e2d"))),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"# directly output date\ndate +%Y-%m-%d\\ %H:%M:%S\n\n# output date into variable\nT='the date is '$(date +%Y-%m-%d\\ %H:%M:%S)\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://unix.stackexchange.com/questions/549415/how-to-concatenate-a-date-variable-and-string-variable-in-unix"}),"shell script - How to concatenate a date variable and string variable in unix? - Unix & Linux Stack Exchange"))),(0,a.kt)("h3",c({},{id:"how-to-change-timezone-and-time"}),"how to change timezone (and time)"),(0,a.kt)("h4",c({},{id:"resolution-1-conclusion-directly-export"}),"resolution 1 (conclusion): directly export"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"echo \"export TZ='Asia/Shanghai'\\n\" >> ~/.profile\n\nsudo pkill -u $USER --force\n")),(0,a.kt)("h4",c({},{id:"resolution-2-detail-choose-following-directions"}),"resolution 2 (detail): choose following directions"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"# check current time, as well as timezone\ndate -R\n\n# if the ending is `+0800`, then it's ok, otherwise you need to change (e.g. `-0800`)\n\n# change timezone (just choose as directed)\ntzselect\n")),(0,a.kt)("p",null,"And finally you will get a command suggestion to write into profile file, that is ",(0,a.kt)("a",c({parentName:"p"},{href:"#solution-1-directly-export"}),"#solution-1-directly-export")),(0,a.kt)("h2",c({},{id:"linux-system-management"}),"linux system management"),(0,a.kt)("h2",c({},{id:"fixed-apt-get-varlibdpkglock-frontend"}),"FIXED: ",(0,a.kt)("inlineCode",{parentName:"h2"},"apt-get /var/lib/dpkg/lock-frontend")),(0,a.kt)("p",null,"solution 01:"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"sudo rm /var/lib/dpkg/lock-frontend\nsudo rm /var/lib/dpkg/lock\nsudo rm /var/cache/apt/archives/lock\n")),(0,a.kt)("p",null,"solution 02:"),(0,a.kt)("pre",null,(0,a.kt)("code",c({parentName:"pre"},{className:"language-sh"}),"sudo lsof /var/lib/dpkg/lock-frontend\nkill -9 XXX\n")),(0,a.kt)("p",null,"ref:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://zhuanlan.zhihu.com/p/126538251"}),"\u89e3\u51b3 apt-get /var/lib/dpkg/lock-frontend \u95ee\u9898 - \u77e5\u4e4e"))),(0,a.kt)("h3",c({},{id:"-a-stop-job-is-running-for-session-c2-of-user--1min-30s"}),"\u2705 ",(0,a.kt)("inlineCode",{parentName:"h3"},"A stop job is running for Session c2 of user ... (1min 30s)")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"resolution")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"restart system"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"journalctl -p5")),(0,a.kt)("li",{parentName:"ol"},"search ",(0,a.kt)("inlineCode",{parentName:"li"},"timed out. Killing")),(0,a.kt)("li",{parentName:"ol"},"analyze the target process of ",(0,a.kt)("inlineCode",{parentName:"li"},"Killing process 1234 (jack_thru) with signal SIGKILL."))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u26a0\ufe0f \u6ce8\u610f\uff0c\u4e5f\u6709\u5176\u4ed6\u51e0\u79cd\u89e3\u51b3\u65b9\u6848\uff0c\u6bd4\u5982\u88c5",(0,a.kt)("inlineCode",{parentName:"p"},"watchdog"),"\u548c\u7f29\u77ed",(0,a.kt)("inlineCode",{parentName:"p"},"timeout"),"\u65f6\u95f4\u7684\uff0c\u8fd9\u4e9b\u90fd\u4fb5\u5165\u6027\u592a\u9ad8\u4e86\uff0c\u5e76\u4e14\u4e0d\u662f\u6cbb\u672c\u4e4b\u7b56\uff0c\u6240\u4ee5\u8fd8\u662f\u5f97\u4ece log \u6765\u5206\u6790\u539f\u56e0\u627e\u5bf9\u5e94\u653f\u7b56\u3002\u5c24\u5176\u662f\u88c5",(0,a.kt)("inlineCode",{parentName:"p"},"watchdog"),"\u7684\u65b9\u6848\uff0c\u6211\u7b80\u5355\u770b\u4e86\u4e00\u4e0b\uff0c\u5927\u81f4\u662f\u6bcf\u5206\u949f\u68c0\u67e5\u4e00\u4e0b\u7cfb\u7edf\u7684\u60c5\u51b5\uff0c\u4f46\u95ee\u9898\u662f\uff0c\u4e3a\u4ec0\u4e48\u5f88\u4e45\u4ee5\u524d\u7cfb\u7edf\u5c31\u6ca1\u6709\u8fd9\u79cd\u95ee\u9898\u5462\uff1f\u90a3\u4e2a\u65f6\u5019\u4e5f\u6ca1\u88c5 ",(0,a.kt)("inlineCode",{parentName:"p"},"watchdog")," \u554a\uff0c\u6240\u4ee5\u5bf9\u4e8e\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u4e0d\u80fd\u5077\u61d2!")),(0,a.kt)("p",null,"."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"result")),(0,a.kt)("p",null,(0,a.kt)("img",c({parentName:"p"},{src:"https://mark-vue-oss.oss-cn-hangzhou.aliyuncs.com/linux-bugfix-1643550947015-7ed703f287400ec8593914f35740044149d43c47e7b97df89135a6ffff3681a5.png",alt:"picture 9"}))),(0,a.kt)("p",null,"It tells me the last one is because of ",(0,a.kt)("inlineCode",{parentName:"p"},"adb"),", since I do open the ",(0,a.kt)("inlineCode",{parentName:"p"},"adb")," and not responding then."),(0,a.kt)("p",null,"And I also checked the last few times when ",(0,a.kt)("inlineCode",{parentName:"p"},"timed out"),", but to find they are different."),(0,a.kt)("p",null,"So I confirmed the timeout error is temporary, since now I am not going to run any ",(0,a.kt)("inlineCode",{parentName:"p"},"adb"),"."),(0,a.kt)("p",null,"I tried to restart again, and the system does well which identified what I think."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"ref")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://unix.stackexchange.com/questions/273876/a-stop-job-is-running-for-session-c2-of-user/297318"}),"systemd - A stop job is running for Session c2 of user - Unix & Linux Stack Exchange"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://qastack.cn/unix/273876/a-stop-job-is-running-for-session-c2-of-user"}),"\u7528\u6237\u7684\u4f1a\u8bdd c2 \u6b63\u5728\u8fd0\u884c\u505c\u6b62\u4f5c\u4e1a"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",c({parentName:"p"},{href:"https://bbs.archlinux.org/viewtopic.php?id=264233"}),"systemd stop job for Session 2 on shutdown / Newbie Corner / Arch Linux Forums")))),(0,a.kt)("h2",c({},{id:"linux-commands"}),"Linux commands"),(0,a.kt)("p",null,"see ",(0,a.kt)("a",c({parentName:"p"},{href:"/docs/coding/OS/Linux/linux-commands"}),"linux-commands")),(0,a.kt)("h2",c({},{id:"linux-is-awesome"}),"Linux Is Awesome"),(0,a.kt)("h3",c({},{id:"awesome-discussions"}),"awesome discussions"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",c({parentName:"li"},{href:"https://stackoverflow.com/questions/192249/how-do-i-parse-command-line-arguments-in-bash/14203146#14203146"}),"How do I parse command line arguments in Bash? - Stack Overflow"))),(0,a.kt)("h3",c({},{id:"awesome-design-philosophy"}),"awesome design philosophy"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"cd ."),", when directory re-created"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"perl/sed sX..X..X"),", arbitrary splitter, easy to handle especially multi-lines problem")))}b.isMDXComponent=!0}}]);